import{t as Z,e as U}from"./tslib-3efcab99.js";import{f as v,r as ee,h as te}from"./index-fddf8486.js";var T=globalThis&&globalThis.__spreadArray||function(t,e,n){if(n||arguments.length===2)for(var r=0,o=e.length,i;r<o;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},ne=function(){function t(e,n,r){this.name=e,this.version=n,this.os=r,this.type="browser"}return t}(),re=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),oe=function(){function t(e,n,r,o){this.name=e,this.version=n,this.os=r,this.bot=o,this.type="bot-device"}return t}(),ie=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),se=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),ae=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,ce=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,C=3,ue=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",ae]],A=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function wt(t){return t?N(t):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new se:typeof navigator<"u"?N(navigator.userAgent):he()}function de(t){return t!==""&&ue.reduce(function(e,n){var r=n[0],o=n[1];if(e)return e;var i=o.exec(t);return!!i&&[r,i]},!1)}function N(t){var e=de(t);if(!e)return null;var n=e[0],r=e[1];if(n==="searchbot")return new ie;var o=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);o?o.length<C&&(o=T(T([],o,!0),le(C-o.length),!0)):o=[];var i=o.join("."),c=fe(t),d=ce.exec(t);return d&&d[1]?new oe(n,i,c,d[1]):new ne(n,i,c)}function fe(t){for(var e=0,n=A.length;e<n;e++){var r=A[e],o=r[0],i=r[1],c=i.exec(t);if(c)return o}return null}function he(){var t=typeof process<"u"&&process.version;return t?new re(process.version.slice(1)):null}function le(t){for(var e=[],n=0;n<t;n++)e.push("0");return e}var s={};Object.defineProperty(s,"__esModule",{value:!0});var ge=s.getLocalStorage=We=s.getLocalStorageOrThrow=Me=s.getCrypto=Pe=s.getCryptoOrThrow=Ae=s.getLocation=Te=s.getLocationOrThrow=Se=s.getNavigator=Re=s.getNavigatorOrThrow=ye=s.getDocument=me=s.getDocumentOrThrow=ve=s.getFromWindowOrThrow=pe=s.getFromWindow=void 0;function p(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}var pe=s.getFromWindow=p;function w(t){const e=p(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}var ve=s.getFromWindowOrThrow=w;function we(){return w("document")}var me=s.getDocumentOrThrow=we;function Ee(){return p("document")}var ye=s.getDocument=Ee;function Oe(){return w("navigator")}var Re=s.getNavigatorOrThrow=Oe;function be(){return p("navigator")}var Se=s.getNavigator=be;function _e(){return w("location")}var Te=s.getLocationOrThrow=_e;function Ce(){return p("location")}var Ae=s.getLocation=Ce;function Ne(){return w("crypto")}var Pe=s.getCryptoOrThrow=Ne;function xe(){return p("crypto")}var Me=s.getCrypto=xe;function Le(){return w("localStorage")}var We=s.getLocalStorageOrThrow=Le;function Ie(){return p("localStorage")}ge=s.getLocalStorage=Ie;var b={};Object.defineProperty(b,"__esModule",{value:!0});var Be=b.getWindowMetadata=void 0;const P=s;function Fe(){let t,e;try{t=P.getDocumentOrThrow(),e=P.getLocationOrThrow()}catch{return null}function n(){const u=t.getElementsByTagName("link"),l=[];for(let g=0;g<u.length;g++){const m=u[g],E=m.getAttribute("rel");if(E&&E.toLowerCase().indexOf("icon")>-1){const a=m.getAttribute("href");if(a)if(a.toLowerCase().indexOf("https:")===-1&&a.toLowerCase().indexOf("http:")===-1&&a.indexOf("//")!==0){let y=e.protocol+"//"+e.host;if(a.indexOf("/")===0)y+=a;else{const _=e.pathname.split("/");_.pop();const Y=_.join("/");y+=Y+"/"+a}l.push(y)}else if(a.indexOf("//")===0){const y=e.protocol+a;l.push(y)}else l.push(a)}}return l}function r(...u){const l=t.getElementsByTagName("meta");for(let g=0;g<l.length;g++){const m=l[g],E=["itemprop","property","name"].map(a=>m.getAttribute(a)).filter(a=>a?u.includes(a):!1);if(E.length&&E){const a=m.getAttribute("content");if(a)return a}}return""}function o(){let u=r("name","og:site_name","og:title","twitter:title");return u||(u=t.title),u}function i(){return r("description","og:description","twitter:description","keywords")}const c=o(),d=i(),z=e.origin,Q=n();return{description:d,url:z,icons:Q,name:c}}Be=b.getWindowMetadata=Fe;var mt=t=>encodeURIComponent(t).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),k="%[a-f0-9]{2}",x=new RegExp("("+k+")|([^%]+?)","gi"),M=new RegExp("("+k+")+","gi");function R(t,e){try{return[decodeURIComponent(t.join(""))]}catch{}if(t.length===1)return t;e=e||1;var n=t.slice(0,e),r=t.slice(e);return Array.prototype.concat.call([],R(n),R(r))}function De(t){try{return decodeURIComponent(t)}catch{for(var e=t.match(x)||[],n=1;n<e.length;n++)t=R(e,n).join(""),e=t.match(x)||[];return t}}function je(t){for(var e={"%FE%FF":"��","%FF%FE":"��"},n=M.exec(t);n;){try{e[n[0]]=decodeURIComponent(n[0])}catch{var r=De(n[0]);r!==n[0]&&(e[n[0]]=r)}n=M.exec(t)}e["%C2"]="�";for(var o=Object.keys(e),i=0;i<o.length;i++){var c=o[i];t=t.replace(new RegExp(c,"g"),e[c])}return t}var Et=function(t){if(typeof t!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch{return je(t)}},yt=(t,e)=>{if(!(typeof t=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e==="")return[t];const n=t.indexOf(e);return n===-1?[t]:[t.slice(0,n),t.slice(n+e.length)]},Ot=function(t,e){for(var n={},r=Object.keys(t),o=Array.isArray(e),i=0;i<r.length;i++){var c=r[i],d=t[c];(o?e.indexOf(c)!==-1:e(c,d,t))&&(n[c]=d)}return n};const $e=t=>JSON.stringify(t,(e,n)=>typeof n=="bigint"?n.toString()+"n":n),Ue=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,n=t.replace(e,'$1"$2n"$3');return JSON.parse(n,(r,o)=>typeof o=="string"&&o.match(/^\d+n$/)?BigInt(o.substring(0,o.length-1)):o)};function ke(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return Ue(t)}catch{return t}}function L(t){return typeof t=="string"?t:$e(t)||""}const Je="PARSE_ERROR",He="INVALID_REQUEST",Ve="METHOD_NOT_FOUND",Xe="INVALID_PARAMS",J="INTERNAL_ERROR",S="SERVER_ERROR",qe=[-32700,-32600,-32601,-32602,-32603],O={[Je]:{code:-32700,message:"Parse error"},[He]:{code:-32600,message:"Invalid Request"},[Ve]:{code:-32601,message:"Method not found"},[Xe]:{code:-32602,message:"Invalid params"},[J]:{code:-32603,message:"Internal error"},[S]:{code:-32e3,message:"Server error"}},H=S;function Ge(t){return qe.includes(t)}function W(t){return Object.keys(O).includes(t)?O[t]:O[H]}function Ke(t){const e=Object.values(O).find(n=>n.code===t);return e||O[H]}function ze(t,e,n){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${n} RPC url at ${e}`):t}var Qe={},f={},I;function Ye(){if(I)return f;I=1,Object.defineProperty(f,"__esModule",{value:!0}),f.isBrowserCryptoAvailable=f.getSubtleCrypto=f.getBrowerCrypto=void 0;function t(){return(v===null||v===void 0?void 0:v.crypto)||(v===null||v===void 0?void 0:v.msCrypto)||{}}f.getBrowerCrypto=t;function e(){const r=t();return r.subtle||r.webkitSubtle}f.getSubtleCrypto=e;function n(){return!!t()&&!!e()}return f.isBrowserCryptoAvailable=n,f}var h={},B;function Ze(){if(B)return h;B=1,Object.defineProperty(h,"__esModule",{value:!0}),h.isBrowser=h.isNode=h.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}h.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}h.isNode=e;function n(){return!t()&&!e()}return h.isBrowser=n,h}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Z;e.__exportStar(Ye(),t),e.__exportStar(Ze(),t)})(Qe);function V(t=3){const e=Date.now()*Math.pow(10,t),n=Math.floor(Math.random()*Math.pow(10,t));return e+n}function et(t=6){return BigInt(V(t))}function tt(t,e,n){return{id:n||V(),jsonrpc:"2.0",method:t,params:e}}function Rt(t,e){return{id:t,jsonrpc:"2.0",result:e}}function nt(t,e,n){return{id:t,jsonrpc:"2.0",error:rt(e,n)}}function rt(t,e){return typeof t>"u"?W(J):(typeof t=="string"&&(t=Object.assign(Object.assign({},W(S)),{message:t})),typeof e<"u"&&(t.data=e),Ge(t.code)&&(t=Ke(t.code)),t)}class X{}class bt extends X{constructor(e){super()}}class ot extends X{constructor(){super()}}class it extends ot{constructor(e){super()}}const st="^https?:",at="^wss?:";function ct(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function q(t,e){const n=ct(t);return typeof n>"u"?!1:new RegExp(e).test(n)}function F(t){return q(t,st)}function St(t){return q(t,at)}function _t(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function G(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function Tt(t){return G(t)&&"method"in t}function ut(t){return G(t)&&(dt(t)||K(t))}function dt(t){return"result"in t}function K(t){return"error"in t}class Ct extends it{constructor(e){super(e),this.events=new U.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async request(e,n){return this.requestStrict(tt(e.method,e.params||[],e.id||et().toString()),n)}async requestStrict(e,n){return new Promise(async(r,o)=>{if(!this.connection.connected)try{await this.open()}catch(i){o(i)}this.events.on(`${e.id}`,i=>{K(i)?o(i.error):r(i.result)});try{await this.connection.send(e,n)}catch(i){o(i)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),ut(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}}var ft=ee();const D=te(ft),ht={Accept:"application/json","Content-Type":"application/json"},lt="POST",j={headers:ht,method:lt},$=10;class At{constructor(e,n=!1){if(this.url=e,this.disableProviderPing=n,this.events=new U.EventEmitter,this.isAvailable=!1,this.registering=!1,!F(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=n}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e,n){this.isAvailable||await this.register();try{const r=L(e),i=await(await D(this.url,Object.assign(Object.assign({},j),{body:r}))).json();this.onPayload({data:i})}catch(r){this.onError(e.id,r)}}async register(e=this.url){if(!F(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,o)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),o(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return o(new Error("HTTP connection is missing or invalid"));r()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const n=L({id:1,jsonrpc:"2.0",method:"test",params:[]});await D(e,Object.assign(Object.assign({},j),{body:n}))}this.onOpen()}catch(n){const r=this.parseError(n);throw this.events.emit("register_error",r),this.onClose(),r}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?ke(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),o=r.message||r.toString(),i=nt(e,o);this.events.emit("payload",i)}parseError(e,n=this.url){return ze(e,n,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>$&&this.events.setMaxListeners($)}}export{Re as A,Te as B,Pe as C,Me as D,We as E,V as F,At as H,bt as I,Ct as J,mt as a,Se as b,ye as c,Et as d,wt as e,Ot as f,Be as g,Ae as h,L as i,St as j,Qe as k,_t as l,ke as m,nt as n,Tt as o,ze as p,Rt as q,dt as r,yt as s,K as t,ut as u,tt as v,ge as w,pe as x,ve as y,me as z};
