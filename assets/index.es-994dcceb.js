import{g as cu,a as pd,c as yb,b as cr,r as _b,_ as bb}from"./index-ac64f58d.js";var uu={exports:{}},Pn=typeof Reflect=="object"?Reflect:null,Nl=Pn&&typeof Pn.apply=="function"?Pn.apply:function(e,r,s){return Function.prototype.apply.call(e,r,s)},Po;Pn&&typeof Pn.ownKeys=="function"?Po=Pn.ownKeys:Object.getOwnPropertySymbols?Po=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Po=function(e){return Object.getOwnPropertyNames(e)};function mb(n){console&&console.warn&&console.warn(n)}var gd=Number.isNaN||function(e){return e!==e};function ot(){ot.init.call(this)}uu.exports=ot;uu.exports.once=Sb;ot.EventEmitter=ot;ot.prototype._events=void 0;ot.prototype._eventsCount=0;ot.prototype._maxListeners=void 0;var Rl=10;function zo(n){if(typeof n!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n)}Object.defineProperty(ot,"defaultMaxListeners",{enumerable:!0,get:function(){return Rl},set:function(n){if(typeof n!="number"||n<0||gd(n))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+n+".");Rl=n}});ot.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};ot.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||gd(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function vd(n){return n._maxListeners===void 0?ot.defaultMaxListeners:n._maxListeners}ot.prototype.getMaxListeners=function(){return vd(this)};ot.prototype.emit=function(e){for(var r=[],s=1;s<arguments.length;s++)r.push(arguments[s]);var a=e==="error",l=this._events;if(l!==void 0)a=a&&l.error===void 0;else if(!a)return!1;if(a){var p;if(r.length>0&&(p=r[0]),p instanceof Error)throw p;var f=new Error("Unhandled error."+(p?" ("+p.message+")":""));throw f.context=p,f}var g=l[e];if(g===void 0)return!1;if(typeof g=="function")Nl(g,this,r);else for(var w=g.length,I=wd(g,w),s=0;s<w;++s)Nl(I[s],this,r);return!0};function yd(n,e,r,s){var a,l,p;if(zo(r),l=n._events,l===void 0?(l=n._events=Object.create(null),n._eventsCount=0):(l.newListener!==void 0&&(n.emit("newListener",e,r.listener?r.listener:r),l=n._events),p=l[e]),p===void 0)p=l[e]=r,++n._eventsCount;else if(typeof p=="function"?p=l[e]=s?[r,p]:[p,r]:s?p.unshift(r):p.push(r),a=vd(n),a>0&&p.length>a&&!p.warned){p.warned=!0;var f=new Error("Possible EventEmitter memory leak detected. "+p.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");f.name="MaxListenersExceededWarning",f.emitter=n,f.type=e,f.count=p.length,mb(f)}return n}ot.prototype.addListener=function(e,r){return yd(this,e,r,!1)};ot.prototype.on=ot.prototype.addListener;ot.prototype.prependListener=function(e,r){return yd(this,e,r,!0)};function wb(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _d(n,e,r){var s={fired:!1,wrapFn:void 0,target:n,type:e,listener:r},a=wb.bind(s);return a.listener=r,s.wrapFn=a,a}ot.prototype.once=function(e,r){return zo(r),this.on(e,_d(this,e,r)),this};ot.prototype.prependOnceListener=function(e,r){return zo(r),this.prependListener(e,_d(this,e,r)),this};ot.prototype.removeListener=function(e,r){var s,a,l,p,f;if(zo(r),a=this._events,a===void 0)return this;if(s=a[e],s===void 0)return this;if(s===r||s.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete a[e],a.removeListener&&this.emit("removeListener",e,s.listener||r));else if(typeof s!="function"){for(l=-1,p=s.length-1;p>=0;p--)if(s[p]===r||s[p].listener===r){f=s[p].listener,l=p;break}if(l<0)return this;l===0?s.shift():Eb(s,l),s.length===1&&(a[e]=s[0]),a.removeListener!==void 0&&this.emit("removeListener",e,f||r)}return this};ot.prototype.off=ot.prototype.removeListener;ot.prototype.removeAllListeners=function(e){var r,s,a;if(s=this._events,s===void 0)return this;if(s.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):s[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete s[e]),this;if(arguments.length===0){var l=Object.keys(s),p;for(a=0;a<l.length;++a)p=l[a],p!=="removeListener"&&this.removeAllListeners(p);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=s[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(a=r.length-1;a>=0;a--)this.removeListener(e,r[a]);return this};function bd(n,e,r){var s=n._events;if(s===void 0)return[];var a=s[e];return a===void 0?[]:typeof a=="function"?r?[a.listener||a]:[a]:r?Db(a):wd(a,a.length)}ot.prototype.listeners=function(e){return bd(this,e,!0)};ot.prototype.rawListeners=function(e){return bd(this,e,!1)};ot.listenerCount=function(n,e){return typeof n.listenerCount=="function"?n.listenerCount(e):md.call(n,e)};ot.prototype.listenerCount=md;function md(n){var e=this._events;if(e!==void 0){var r=e[n];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}ot.prototype.eventNames=function(){return this._eventsCount>0?Po(this._events):[]};function wd(n,e){for(var r=new Array(e),s=0;s<e;++s)r[s]=n[s];return r}function Eb(n,e){for(;e+1<n.length;e++)n[e]=n[e+1];n.pop()}function Db(n){for(var e=new Array(n.length),r=0;r<e.length;++r)e[r]=n[r].listener||n[r];return e}function Sb(n,e){return new Promise(function(r,s){function a(p){n.removeListener(e,l),s(p)}function l(){typeof n.removeListener=="function"&&n.removeListener("error",a),r([].slice.call(arguments))}Ed(n,e,l,{once:!0}),e!=="error"&&Ib(n,a,{once:!0})})}function Ib(n,e,r){typeof n.on=="function"&&Ed(n,"error",e,r)}function Ed(n,e,r,s){if(typeof n.on=="function")s.once?n.once(e,r):n.on(e,r);else if(typeof n.addEventListener=="function")n.addEventListener(e,function a(l){s.once&&n.removeEventListener(e,a),r(l)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof n)}var xr=uu.exports;const hu=cu(xr);var lu={},qo={},Ue={},Dd={};(function(n){Object.defineProperty(n,"__esModule",{value:!0});function e(f,g){var w=f>>>16&65535,I=f&65535,R=g>>>16&65535,B=g&65535;return I*B+(w*B+I*R<<16>>>0)|0}n.mul=Math.imul||e;function r(f,g){return f+g|0}n.add=r;function s(f,g){return f-g|0}n.sub=s;function a(f,g){return f<<g|f>>>32-g}n.rotl=a;function l(f,g){return f<<32-g|f>>>g}n.rotr=l;function p(f){return typeof f=="number"&&isFinite(f)&&Math.floor(f)===f}n.isInteger=Number.isInteger||p,n.MAX_SAFE_INTEGER=9007199254740991,n.isSafeInteger=function(f){return n.isInteger(f)&&f>=-n.MAX_SAFE_INTEGER&&f<=n.MAX_SAFE_INTEGER}})(Dd);Object.defineProperty(Ue,"__esModule",{value:!0});var Sd=Dd;function xb(n,e){return e===void 0&&(e=0),(n[e+0]<<8|n[e+1])<<16>>16}Ue.readInt16BE=xb;function Ob(n,e){return e===void 0&&(e=0),(n[e+0]<<8|n[e+1])>>>0}Ue.readUint16BE=Ob;function Cb(n,e){return e===void 0&&(e=0),(n[e+1]<<8|n[e])<<16>>16}Ue.readInt16LE=Cb;function Ab(n,e){return e===void 0&&(e=0),(n[e+1]<<8|n[e])>>>0}Ue.readUint16LE=Ab;function Id(n,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=n>>>8,e[r+1]=n>>>0,e}Ue.writeUint16BE=Id;Ue.writeInt16BE=Id;function xd(n,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=n>>>0,e[r+1]=n>>>8,e}Ue.writeUint16LE=xd;Ue.writeInt16LE=xd;function Kc(n,e){return e===void 0&&(e=0),n[e]<<24|n[e+1]<<16|n[e+2]<<8|n[e+3]}Ue.readInt32BE=Kc;function kc(n,e){return e===void 0&&(e=0),(n[e]<<24|n[e+1]<<16|n[e+2]<<8|n[e+3])>>>0}Ue.readUint32BE=kc;function Vc(n,e){return e===void 0&&(e=0),n[e+3]<<24|n[e+2]<<16|n[e+1]<<8|n[e]}Ue.readInt32LE=Vc;function Wc(n,e){return e===void 0&&(e=0),(n[e+3]<<24|n[e+2]<<16|n[e+1]<<8|n[e])>>>0}Ue.readUint32LE=Wc;function Fo(n,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=n>>>24,e[r+1]=n>>>16,e[r+2]=n>>>8,e[r+3]=n>>>0,e}Ue.writeUint32BE=Fo;Ue.writeInt32BE=Fo;function Lo(n,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=n>>>0,e[r+1]=n>>>8,e[r+2]=n>>>16,e[r+3]=n>>>24,e}Ue.writeUint32LE=Lo;Ue.writeInt32LE=Lo;function Pb(n,e){e===void 0&&(e=0);var r=Kc(n,e),s=Kc(n,e+4);return r*4294967296+s-(s>>31)*4294967296}Ue.readInt64BE=Pb;function Tb(n,e){e===void 0&&(e=0);var r=kc(n,e),s=kc(n,e+4);return r*4294967296+s}Ue.readUint64BE=Tb;function Nb(n,e){e===void 0&&(e=0);var r=Vc(n,e),s=Vc(n,e+4);return s*4294967296+r-(r>>31)*4294967296}Ue.readInt64LE=Nb;function Rb(n,e){e===void 0&&(e=0);var r=Wc(n,e),s=Wc(n,e+4);return s*4294967296+r}Ue.readUint64LE=Rb;function Od(n,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),Fo(n/4294967296>>>0,e,r),Fo(n>>>0,e,r+4),e}Ue.writeUint64BE=Od;Ue.writeInt64BE=Od;function Cd(n,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),Lo(n>>>0,e,r),Lo(n/4294967296>>>0,e,r+4),e}Ue.writeUint64LE=Cd;Ue.writeInt64LE=Cd;function Fb(n,e,r){if(r===void 0&&(r=0),n%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(n/8>e.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var s=0,a=1,l=n/8+r-1;l>=r;l--)s+=e[l]*a,a*=256;return s}Ue.readUintBE=Fb;function Lb(n,e,r){if(r===void 0&&(r=0),n%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(n/8>e.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var s=0,a=1,l=r;l<r+n/8;l++)s+=e[l]*a,a*=256;return s}Ue.readUintLE=Lb;function Ub(n,e,r,s){if(r===void 0&&(r=new Uint8Array(n/8)),s===void 0&&(s=0),n%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!Sd.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var a=1,l=n/8+s-1;l>=s;l--)r[l]=e/a&255,a*=256;return r}Ue.writeUintBE=Ub;function $b(n,e,r,s){if(r===void 0&&(r=new Uint8Array(n/8)),s===void 0&&(s=0),n%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!Sd.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var a=1,l=s;l<s+n/8;l++)r[l]=e/a&255,a*=256;return r}Ue.writeUintLE=$b;function Mb(n,e){e===void 0&&(e=0);var r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getFloat32(e)}Ue.readFloat32BE=Mb;function jb(n,e){e===void 0&&(e=0);var r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getFloat32(e,!0)}Ue.readFloat32LE=jb;function zb(n,e){e===void 0&&(e=0);var r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getFloat64(e)}Ue.readFloat64BE=zb;function qb(n,e){e===void 0&&(e=0);var r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getFloat64(e,!0)}Ue.readFloat64LE=qb;function Bb(n,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var s=new DataView(e.buffer,e.byteOffset,e.byteLength);return s.setFloat32(r,n),e}Ue.writeFloat32BE=Bb;function Hb(n,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var s=new DataView(e.buffer,e.byteOffset,e.byteLength);return s.setFloat32(r,n,!0),e}Ue.writeFloat32LE=Hb;function Kb(n,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var s=new DataView(e.buffer,e.byteOffset,e.byteLength);return s.setFloat64(r,n),e}Ue.writeFloat64BE=Kb;function kb(n,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var s=new DataView(e.buffer,e.byteOffset,e.byteLength);return s.setFloat64(r,n,!0),e}Ue.writeFloat64LE=kb;var Or={};Object.defineProperty(Or,"__esModule",{value:!0});function Vb(n){for(var e=0;e<n.length;e++)n[e]=0;return n}Or.wipe=Vb;Object.defineProperty(qo,"__esModule",{value:!0});var er=Ue,Gc=Or,Wb=20;function Gb(n,e,r){for(var s=1634760805,a=857760878,l=2036477234,p=1797285236,f=r[3]<<24|r[2]<<16|r[1]<<8|r[0],g=r[7]<<24|r[6]<<16|r[5]<<8|r[4],w=r[11]<<24|r[10]<<16|r[9]<<8|r[8],I=r[15]<<24|r[14]<<16|r[13]<<8|r[12],R=r[19]<<24|r[18]<<16|r[17]<<8|r[16],B=r[23]<<24|r[22]<<16|r[21]<<8|r[20],F=r[27]<<24|r[26]<<16|r[25]<<8|r[24],L=r[31]<<24|r[30]<<16|r[29]<<8|r[28],k=e[3]<<24|e[2]<<16|e[1]<<8|e[0],W=e[7]<<24|e[6]<<16|e[5]<<8|e[4],ae=e[11]<<24|e[10]<<16|e[9]<<8|e[8],T=e[15]<<24|e[14]<<16|e[13]<<8|e[12],U=s,E=a,C=l,b=p,c=f,y=g,J=w,x=I,z=R,K=B,Z=F,S=L,A=k,ie=W,ee=ae,X=T,G=0;G<Wb;G+=2)U=U+c|0,A^=U,A=A>>>32-16|A<<16,z=z+A|0,c^=z,c=c>>>32-12|c<<12,E=E+y|0,ie^=E,ie=ie>>>32-16|ie<<16,K=K+ie|0,y^=K,y=y>>>32-12|y<<12,C=C+J|0,ee^=C,ee=ee>>>32-16|ee<<16,Z=Z+ee|0,J^=Z,J=J>>>32-12|J<<12,b=b+x|0,X^=b,X=X>>>32-16|X<<16,S=S+X|0,x^=S,x=x>>>32-12|x<<12,C=C+J|0,ee^=C,ee=ee>>>32-8|ee<<8,Z=Z+ee|0,J^=Z,J=J>>>32-7|J<<7,b=b+x|0,X^=b,X=X>>>32-8|X<<8,S=S+X|0,x^=S,x=x>>>32-7|x<<7,E=E+y|0,ie^=E,ie=ie>>>32-8|ie<<8,K=K+ie|0,y^=K,y=y>>>32-7|y<<7,U=U+c|0,A^=U,A=A>>>32-8|A<<8,z=z+A|0,c^=z,c=c>>>32-7|c<<7,U=U+y|0,X^=U,X=X>>>32-16|X<<16,Z=Z+X|0,y^=Z,y=y>>>32-12|y<<12,E=E+J|0,A^=E,A=A>>>32-16|A<<16,S=S+A|0,J^=S,J=J>>>32-12|J<<12,C=C+x|0,ie^=C,ie=ie>>>32-16|ie<<16,z=z+ie|0,x^=z,x=x>>>32-12|x<<12,b=b+c|0,ee^=b,ee=ee>>>32-16|ee<<16,K=K+ee|0,c^=K,c=c>>>32-12|c<<12,C=C+x|0,ie^=C,ie=ie>>>32-8|ie<<8,z=z+ie|0,x^=z,x=x>>>32-7|x<<7,b=b+c|0,ee^=b,ee=ee>>>32-8|ee<<8,K=K+ee|0,c^=K,c=c>>>32-7|c<<7,E=E+J|0,A^=E,A=A>>>32-8|A<<8,S=S+A|0,J^=S,J=J>>>32-7|J<<7,U=U+y|0,X^=U,X=X>>>32-8|X<<8,Z=Z+X|0,y^=Z,y=y>>>32-7|y<<7;er.writeUint32LE(U+s|0,n,0),er.writeUint32LE(E+a|0,n,4),er.writeUint32LE(C+l|0,n,8),er.writeUint32LE(b+p|0,n,12),er.writeUint32LE(c+f|0,n,16),er.writeUint32LE(y+g|0,n,20),er.writeUint32LE(J+w|0,n,24),er.writeUint32LE(x+I|0,n,28),er.writeUint32LE(z+R|0,n,32),er.writeUint32LE(K+B|0,n,36),er.writeUint32LE(Z+F|0,n,40),er.writeUint32LE(S+L|0,n,44),er.writeUint32LE(A+k|0,n,48),er.writeUint32LE(ie+W|0,n,52),er.writeUint32LE(ee+ae|0,n,56),er.writeUint32LE(X+T|0,n,60)}function Ad(n,e,r,s,a){if(a===void 0&&(a=0),n.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(s.length<r.length)throw new Error("ChaCha: destination is shorter than source");var l,p;if(a===0){if(e.length!==8&&e.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");l=new Uint8Array(16),p=l.length-e.length,l.set(e,p)}else{if(e.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");l=e,p=a}for(var f=new Uint8Array(64),g=0;g<r.length;g+=64){Gb(f,l,n);for(var w=g;w<g+64&&w<r.length;w++)s[w]=r[w]^f[w-g];Jb(l,0,p)}return Gc.wipe(f),a===0&&Gc.wipe(l),s}qo.streamXOR=Ad;function Yb(n,e,r,s){return s===void 0&&(s=0),Gc.wipe(r),Ad(n,e,r,r,s)}qo.stream=Yb;function Jb(n,e,r){for(var s=1;r--;)s=s+(n[e]&255)|0,n[e]=s&255,s>>>=8,e++;if(s>0)throw new Error("ChaCha: counter overflow")}var Pd={},Ri={};Object.defineProperty(Ri,"__esModule",{value:!0});function Xb(n,e,r){return~(n-1)&e|n-1&r}Ri.select=Xb;function Qb(n,e){return(n|0)-(e|0)-1>>>31&1}Ri.lessOrEqual=Qb;function Td(n,e){if(n.length!==e.length)return 0;for(var r=0,s=0;s<n.length;s++)r|=n[s]^e[s];return 1&r-1>>>8}Ri.compare=Td;function Zb(n,e){return n.length===0||e.length===0?!1:Td(n,e)!==0}Ri.equal=Zb;(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=Ri,r=Or;n.DIGEST_LENGTH=16;var s=function(){function p(f){this.digestLength=n.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var g=f[0]|f[1]<<8;this._r[0]=g&8191;var w=f[2]|f[3]<<8;this._r[1]=(g>>>13|w<<3)&8191;var I=f[4]|f[5]<<8;this._r[2]=(w>>>10|I<<6)&7939;var R=f[6]|f[7]<<8;this._r[3]=(I>>>7|R<<9)&8191;var B=f[8]|f[9]<<8;this._r[4]=(R>>>4|B<<12)&255,this._r[5]=B>>>1&8190;var F=f[10]|f[11]<<8;this._r[6]=(B>>>14|F<<2)&8191;var L=f[12]|f[13]<<8;this._r[7]=(F>>>11|L<<5)&8065;var k=f[14]|f[15]<<8;this._r[8]=(L>>>8|k<<8)&8191,this._r[9]=k>>>5&127,this._pad[0]=f[16]|f[17]<<8,this._pad[1]=f[18]|f[19]<<8,this._pad[2]=f[20]|f[21]<<8,this._pad[3]=f[22]|f[23]<<8,this._pad[4]=f[24]|f[25]<<8,this._pad[5]=f[26]|f[27]<<8,this._pad[6]=f[28]|f[29]<<8,this._pad[7]=f[30]|f[31]<<8}return p.prototype._blocks=function(f,g,w){for(var I=this._fin?0:2048,R=this._h[0],B=this._h[1],F=this._h[2],L=this._h[3],k=this._h[4],W=this._h[5],ae=this._h[6],T=this._h[7],U=this._h[8],E=this._h[9],C=this._r[0],b=this._r[1],c=this._r[2],y=this._r[3],J=this._r[4],x=this._r[5],z=this._r[6],K=this._r[7],Z=this._r[8],S=this._r[9];w>=16;){var A=f[g+0]|f[g+1]<<8;R+=A&8191;var ie=f[g+2]|f[g+3]<<8;B+=(A>>>13|ie<<3)&8191;var ee=f[g+4]|f[g+5]<<8;F+=(ie>>>10|ee<<6)&8191;var X=f[g+6]|f[g+7]<<8;L+=(ee>>>7|X<<9)&8191;var G=f[g+8]|f[g+9]<<8;k+=(X>>>4|G<<12)&8191,W+=G>>>1&8191;var Y=f[g+10]|f[g+11]<<8;ae+=(G>>>14|Y<<2)&8191;var se=f[g+12]|f[g+13]<<8;T+=(Y>>>11|se<<5)&8191;var ve=f[g+14]|f[g+15]<<8;U+=(se>>>8|ve<<8)&8191,E+=ve>>>5|I;var ce=0,_e=ce;_e+=R*C,_e+=B*(5*S),_e+=F*(5*Z),_e+=L*(5*K),_e+=k*(5*z),ce=_e>>>13,_e&=8191,_e+=W*(5*x),_e+=ae*(5*J),_e+=T*(5*y),_e+=U*(5*c),_e+=E*(5*b),ce+=_e>>>13,_e&=8191;var he=ce;he+=R*b,he+=B*C,he+=F*(5*S),he+=L*(5*Z),he+=k*(5*K),ce=he>>>13,he&=8191,he+=W*(5*z),he+=ae*(5*x),he+=T*(5*J),he+=U*(5*y),he+=E*(5*c),ce+=he>>>13,he&=8191;var be=ce;be+=R*c,be+=B*b,be+=F*C,be+=L*(5*S),be+=k*(5*Z),ce=be>>>13,be&=8191,be+=W*(5*K),be+=ae*(5*z),be+=T*(5*x),be+=U*(5*J),be+=E*(5*y),ce+=be>>>13,be&=8191;var H=ce;H+=R*y,H+=B*c,H+=F*b,H+=L*C,H+=k*(5*S),ce=H>>>13,H&=8191,H+=W*(5*Z),H+=ae*(5*K),H+=T*(5*z),H+=U*(5*x),H+=E*(5*J),ce+=H>>>13,H&=8191;var q=ce;q+=R*J,q+=B*y,q+=F*c,q+=L*b,q+=k*C,ce=q>>>13,q&=8191,q+=W*(5*S),q+=ae*(5*Z),q+=T*(5*K),q+=U*(5*z),q+=E*(5*x),ce+=q>>>13,q&=8191;var N=ce;N+=R*x,N+=B*J,N+=F*y,N+=L*c,N+=k*b,ce=N>>>13,N&=8191,N+=W*C,N+=ae*(5*S),N+=T*(5*Z),N+=U*(5*K),N+=E*(5*z),ce+=N>>>13,N&=8191;var h=ce;h+=R*z,h+=B*x,h+=F*J,h+=L*y,h+=k*c,ce=h>>>13,h&=8191,h+=W*b,h+=ae*C,h+=T*(5*S),h+=U*(5*Z),h+=E*(5*K),ce+=h>>>13,h&=8191;var O=ce;O+=R*K,O+=B*z,O+=F*x,O+=L*J,O+=k*y,ce=O>>>13,O&=8191,O+=W*c,O+=ae*b,O+=T*C,O+=U*(5*S),O+=E*(5*Z),ce+=O>>>13,O&=8191;var ue=ce;ue+=R*Z,ue+=B*K,ue+=F*z,ue+=L*x,ue+=k*J,ce=ue>>>13,ue&=8191,ue+=W*y,ue+=ae*c,ue+=T*b,ue+=U*C,ue+=E*(5*S),ce+=ue>>>13,ue&=8191;var de=ce;de+=R*S,de+=B*Z,de+=F*K,de+=L*z,de+=k*x,ce=de>>>13,de&=8191,de+=W*J,de+=ae*y,de+=T*c,de+=U*b,de+=E*C,ce+=de>>>13,de&=8191,ce=(ce<<2)+ce|0,ce=ce+_e|0,_e=ce&8191,ce=ce>>>13,he+=ce,R=_e,B=he,F=be,L=H,k=q,W=N,ae=h,T=O,U=ue,E=de,g+=16,w-=16}this._h[0]=R,this._h[1]=B,this._h[2]=F,this._h[3]=L,this._h[4]=k,this._h[5]=W,this._h[6]=ae,this._h[7]=T,this._h[8]=U,this._h[9]=E},p.prototype.finish=function(f,g){g===void 0&&(g=0);var w=new Uint16Array(10),I,R,B,F;if(this._leftover){for(F=this._leftover,this._buffer[F++]=1;F<16;F++)this._buffer[F]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(I=this._h[1]>>>13,this._h[1]&=8191,F=2;F<10;F++)this._h[F]+=I,I=this._h[F]>>>13,this._h[F]&=8191;for(this._h[0]+=I*5,I=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=I,I=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=I,w[0]=this._h[0]+5,I=w[0]>>>13,w[0]&=8191,F=1;F<10;F++)w[F]=this._h[F]+I,I=w[F]>>>13,w[F]&=8191;for(w[9]-=8192,R=(I^1)-1,F=0;F<10;F++)w[F]&=R;for(R=~R,F=0;F<10;F++)this._h[F]=this._h[F]&R|w[F];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,B=this._h[0]+this._pad[0],this._h[0]=B&65535,F=1;F<8;F++)B=(this._h[F]+this._pad[F]|0)+(B>>>16)|0,this._h[F]=B&65535;return f[g+0]=this._h[0]>>>0,f[g+1]=this._h[0]>>>8,f[g+2]=this._h[1]>>>0,f[g+3]=this._h[1]>>>8,f[g+4]=this._h[2]>>>0,f[g+5]=this._h[2]>>>8,f[g+6]=this._h[3]>>>0,f[g+7]=this._h[3]>>>8,f[g+8]=this._h[4]>>>0,f[g+9]=this._h[4]>>>8,f[g+10]=this._h[5]>>>0,f[g+11]=this._h[5]>>>8,f[g+12]=this._h[6]>>>0,f[g+13]=this._h[6]>>>8,f[g+14]=this._h[7]>>>0,f[g+15]=this._h[7]>>>8,this._finished=!0,this},p.prototype.update=function(f){var g=0,w=f.length,I;if(this._leftover){I=16-this._leftover,I>w&&(I=w);for(var R=0;R<I;R++)this._buffer[this._leftover+R]=f[g+R];if(w-=I,g+=I,this._leftover+=I,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(w>=16&&(I=w-w%16,this._blocks(f,g,I),g+=I,w-=I),w){for(var R=0;R<w;R++)this._buffer[this._leftover+R]=f[g+R];this._leftover+=w}return this},p.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var f=new Uint8Array(16);return this.finish(f),f},p.prototype.clean=function(){return r.wipe(this._buffer),r.wipe(this._r),r.wipe(this._h),r.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},p}();n.Poly1305=s;function a(p,f){var g=new s(p);g.update(f);var w=g.digest();return g.clean(),w}n.oneTimeAuth=a;function l(p,f){return p.length!==n.DIGEST_LENGTH||f.length!==n.DIGEST_LENGTH?!1:e.equal(p,f)}n.equal=l})(Pd);(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=qo,r=Pd,s=Or,a=Ue,l=Ri;n.KEY_LENGTH=32,n.NONCE_LENGTH=12,n.TAG_LENGTH=16;var p=new Uint8Array(16),f=function(){function g(w){if(this.nonceLength=n.NONCE_LENGTH,this.tagLength=n.TAG_LENGTH,w.length!==n.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(w)}return g.prototype.seal=function(w,I,R,B){if(w.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var F=new Uint8Array(16);F.set(w,F.length-w.length);var L=new Uint8Array(32);e.stream(this._key,F,L,4);var k=I.length+this.tagLength,W;if(B){if(B.length!==k)throw new Error("ChaCha20Poly1305: incorrect destination length");W=B}else W=new Uint8Array(k);return e.streamXOR(this._key,F,I,W,4),this._authenticate(W.subarray(W.length-this.tagLength,W.length),L,W.subarray(0,W.length-this.tagLength),R),s.wipe(F),W},g.prototype.open=function(w,I,R,B){if(w.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(I.length<this.tagLength)return null;var F=new Uint8Array(16);F.set(w,F.length-w.length);var L=new Uint8Array(32);e.stream(this._key,F,L,4);var k=new Uint8Array(this.tagLength);if(this._authenticate(k,L,I.subarray(0,I.length-this.tagLength),R),!l.equal(k,I.subarray(I.length-this.tagLength,I.length)))return null;var W=I.length-this.tagLength,ae;if(B){if(B.length!==W)throw new Error("ChaCha20Poly1305: incorrect destination length");ae=B}else ae=new Uint8Array(W);return e.streamXOR(this._key,F,I.subarray(0,I.length-this.tagLength),ae,4),s.wipe(F),ae},g.prototype.clean=function(){return s.wipe(this._key),this},g.prototype._authenticate=function(w,I,R,B){var F=new r.Poly1305(I);B&&(F.update(B),B.length%16>0&&F.update(p.subarray(B.length%16))),F.update(R),R.length%16>0&&F.update(p.subarray(R.length%16));var L=new Uint8Array(8);B&&a.writeUint64LE(B.length,L),F.update(L),a.writeUint64LE(R.length,L),F.update(L);for(var k=F.digest(),W=0;W<k.length;W++)w[W]=k[W];F.clean(),s.wipe(k),s.wipe(L)},g}();n.ChaCha20Poly1305=f})(lu);var Nd={},vs={},fu={};Object.defineProperty(fu,"__esModule",{value:!0});function em(n){return typeof n.saveState<"u"&&typeof n.restoreState<"u"&&typeof n.cleanSavedState<"u"}fu.isSerializableHash=em;Object.defineProperty(vs,"__esModule",{value:!0});var ei=fu,tm=Ri,rm=Or,Rd=function(){function n(e,r){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var s=new Uint8Array(this.blockSize);r.length>this.blockSize?this._inner.update(r).finish(s).clean():s.set(r);for(var a=0;a<s.length;a++)s[a]^=54;this._inner.update(s);for(var a=0;a<s.length;a++)s[a]^=106;this._outer.update(s),ei.isSerializableHash(this._inner)&&ei.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),rm.wipe(s)}return n.prototype.reset=function(){if(!ei.isSerializableHash(this._inner)||!ei.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},n.prototype.clean=function(){ei.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),ei.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},n.prototype.update=function(e){return this._inner.update(e),this},n.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},n.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},n.prototype.saveState=function(){if(!ei.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},n.prototype.restoreState=function(e){if(!ei.isSerializableHash(this._inner)||!ei.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},n.prototype.cleanSavedState=function(e){if(!ei.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},n}();vs.HMAC=Rd;function im(n,e,r){var s=new Rd(n,e);s.update(r);var a=s.digest();return s.clean(),a}vs.hmac=im;vs.equal=tm.equal;Object.defineProperty(Nd,"__esModule",{value:!0});var Fl=vs,Ll=Or,nm=function(){function n(e,r,s,a){s===void 0&&(s=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=a;var l=Fl.hmac(this._hash,s,r);this._hmac=new Fl.HMAC(e,l),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return n.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(e===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},n.prototype.expand=function(e){for(var r=new Uint8Array(e),s=0;s<r.length;s++)this._bufpos===this._buffer.length&&this._fillBuffer(),r[s]=this._buffer[this._bufpos++];return r},n.prototype.clean=function(){this._hmac.clean(),Ll.wipe(this._buffer),Ll.wipe(this._counter),this._bufpos=0},n}(),sm=Nd.HKDF=nm,Rn={},Bo={},Ho={};Object.defineProperty(Ho,"__esModule",{value:!0});Ho.BrowserRandomSource=void 0;const Ul=65536;class om{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues!==void 0&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const r=new Uint8Array(e);for(let s=0;s<r.length;s+=Ul)this._crypto.getRandomValues(r.subarray(s,s+Math.min(r.length-s,Ul)));return r}}Ho.BrowserRandomSource=om;var Ko={};const am={},cm=Object.freeze(Object.defineProperty({__proto__:null,default:am},Symbol.toStringTag,{value:"Module"})),um=pd(cm);Object.defineProperty(Ko,"__esModule",{value:!0});Ko.NodeRandomSource=void 0;const hm=Or;class lm{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof yb<"u"){const e=um;e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let r=this._crypto.randomBytes(e);if(r.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const s=new Uint8Array(e);for(let a=0;a<s.length;a++)s[a]=r[a];return(0,hm.wipe)(r),s}}Ko.NodeRandomSource=lm;Object.defineProperty(Bo,"__esModule",{value:!0});Bo.SystemRandomSource=void 0;const fm=Ho,dm=Ko;class pm{constructor(){if(this.isAvailable=!1,this.name="",this._source=new fm.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new dm.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}Bo.SystemRandomSource=pm;(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.randomStringForEntropy=n.randomString=n.randomUint32=n.randomBytes=n.defaultRandomSource=void 0;const e=Bo,r=Ue,s=Or;n.defaultRandomSource=new e.SystemRandomSource;function a(w,I=n.defaultRandomSource){return I.randomBytes(w)}n.randomBytes=a;function l(w=n.defaultRandomSource){const I=a(4,w),R=(0,r.readUint32LE)(I);return(0,s.wipe)(I),R}n.randomUint32=l;const p="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function f(w,I=p,R=n.defaultRandomSource){if(I.length<2)throw new Error("randomString charset is too short");if(I.length>256)throw new Error("randomString charset is too long");let B="";const F=I.length,L=256-256%F;for(;w>0;){const k=a(Math.ceil(w*256/L),R);for(let W=0;W<k.length&&w>0;W++){const ae=k[W];ae<L&&(B+=I.charAt(ae%F),w--)}(0,s.wipe)(k)}return B}n.randomString=f;function g(w,I=p,R=n.defaultRandomSource){const B=Math.ceil(w/(Math.log(I.length)/Math.LN2));return f(B,I,R)}n.randomStringForEntropy=g})(Rn);var ko={};(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=Ue,r=Or;n.DIGEST_LENGTH=32,n.BLOCK_SIZE=64;var s=function(){function f(){this.digestLength=n.DIGEST_LENGTH,this.blockSize=n.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return f.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},f.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},f.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._temp),this.reset()},f.prototype.update=function(g,w){if(w===void 0&&(w=g.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var I=0;if(this._bytesHashed+=w,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&w>0;)this._buffer[this._bufferLength++]=g[I++],w--;this._bufferLength===this.blockSize&&(l(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(w>=this.blockSize&&(I=l(this._temp,this._state,g,I,w),w%=this.blockSize);w>0;)this._buffer[this._bufferLength++]=g[I++],w--;return this},f.prototype.finish=function(g){if(!this._finished){var w=this._bytesHashed,I=this._bufferLength,R=w/536870912|0,B=w<<3,F=w%64<56?64:128;this._buffer[I]=128;for(var L=I+1;L<F-8;L++)this._buffer[L]=0;e.writeUint32BE(R,this._buffer,F-8),e.writeUint32BE(B,this._buffer,F-4),l(this._temp,this._state,this._buffer,0,F),this._finished=!0}for(var L=0;L<this.digestLength/4;L++)e.writeUint32BE(this._state[L],g,L*4);return this},f.prototype.digest=function(){var g=new Uint8Array(this.digestLength);return this.finish(g),g},f.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},f.prototype.restoreState=function(g){return this._state.set(g.state),this._bufferLength=g.bufferLength,g.buffer&&this._buffer.set(g.buffer),this._bytesHashed=g.bytesHashed,this._finished=!1,this},f.prototype.cleanSavedState=function(g){r.wipe(g.state),g.buffer&&r.wipe(g.buffer),g.bufferLength=0,g.bytesHashed=0},f}();n.SHA256=s;var a=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function l(f,g,w,I,R){for(;R>=64;){for(var B=g[0],F=g[1],L=g[2],k=g[3],W=g[4],ae=g[5],T=g[6],U=g[7],E=0;E<16;E++){var C=I+E*4;f[E]=e.readUint32BE(w,C)}for(var E=16;E<64;E++){var b=f[E-2],c=(b>>>17|b<<32-17)^(b>>>19|b<<32-19)^b>>>10;b=f[E-15];var y=(b>>>7|b<<32-7)^(b>>>18|b<<32-18)^b>>>3;f[E]=(c+f[E-7]|0)+(y+f[E-16]|0)}for(var E=0;E<64;E++){var c=(((W>>>6|W<<26)^(W>>>11|W<<21)^(W>>>25|W<<7))+(W&ae^~W&T)|0)+(U+(a[E]+f[E]|0)|0)|0,y=((B>>>2|B<<32-2)^(B>>>13|B<<32-13)^(B>>>22|B<<32-22))+(B&F^B&L^F&L)|0;U=T,T=ae,ae=W,W=k+c|0,k=L,L=F,F=B,B=c+y|0}g[0]+=B,g[1]+=F,g[2]+=L,g[3]+=k,g[4]+=W,g[5]+=ae,g[6]+=T,g[7]+=U,I+=64,R-=64}return I}function p(f){var g=new s;g.update(f);var w=g.digest();return g.clean(),w}n.hash=p})(ko);var du={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.sharedKey=n.generateKeyPair=n.generateKeyPairFromSeed=n.scalarMultBase=n.scalarMult=n.SHARED_KEY_LENGTH=n.SECRET_KEY_LENGTH=n.PUBLIC_KEY_LENGTH=void 0;const e=Rn,r=Or;n.PUBLIC_KEY_LENGTH=32,n.SECRET_KEY_LENGTH=32,n.SHARED_KEY_LENGTH=32;function s(E){const C=new Float64Array(16);if(E)for(let b=0;b<E.length;b++)C[b]=E[b];return C}const a=new Uint8Array(32);a[0]=9;const l=s([56129,1]);function p(E){let C=1;for(let b=0;b<16;b++){let c=E[b]+C+65535;C=Math.floor(c/65536),E[b]=c-C*65536}E[0]+=C-1+37*(C-1)}function f(E,C,b){const c=~(b-1);for(let y=0;y<16;y++){const J=c&(E[y]^C[y]);E[y]^=J,C[y]^=J}}function g(E,C){const b=s(),c=s();for(let y=0;y<16;y++)c[y]=C[y];p(c),p(c),p(c);for(let y=0;y<2;y++){b[0]=c[0]-65517;for(let x=1;x<15;x++)b[x]=c[x]-65535-(b[x-1]>>16&1),b[x-1]&=65535;b[15]=c[15]-32767-(b[14]>>16&1);const J=b[15]>>16&1;b[14]&=65535,f(c,b,1-J)}for(let y=0;y<16;y++)E[2*y]=c[y]&255,E[2*y+1]=c[y]>>8}function w(E,C){for(let b=0;b<16;b++)E[b]=C[2*b]+(C[2*b+1]<<8);E[15]&=32767}function I(E,C,b){for(let c=0;c<16;c++)E[c]=C[c]+b[c]}function R(E,C,b){for(let c=0;c<16;c++)E[c]=C[c]-b[c]}function B(E,C,b){let c,y,J=0,x=0,z=0,K=0,Z=0,S=0,A=0,ie=0,ee=0,X=0,G=0,Y=0,se=0,ve=0,ce=0,_e=0,he=0,be=0,H=0,q=0,N=0,h=0,O=0,ue=0,de=0,Ie=0,Be=0,ke=0,$e=0,gt=0,vt=0,je=b[0],xe=b[1],Re=b[2],Fe=b[3],ze=b[4],Ce=b[5],Le=b[6],Se=b[7],Ae=b[8],He=b[9],Oe=b[10],Ve=b[11],Ge=b[12],et=b[13],tt=b[14],Je=b[15];c=C[0],J+=c*je,x+=c*xe,z+=c*Re,K+=c*Fe,Z+=c*ze,S+=c*Ce,A+=c*Le,ie+=c*Se,ee+=c*Ae,X+=c*He,G+=c*Oe,Y+=c*Ve,se+=c*Ge,ve+=c*et,ce+=c*tt,_e+=c*Je,c=C[1],x+=c*je,z+=c*xe,K+=c*Re,Z+=c*Fe,S+=c*ze,A+=c*Ce,ie+=c*Le,ee+=c*Se,X+=c*Ae,G+=c*He,Y+=c*Oe,se+=c*Ve,ve+=c*Ge,ce+=c*et,_e+=c*tt,he+=c*Je,c=C[2],z+=c*je,K+=c*xe,Z+=c*Re,S+=c*Fe,A+=c*ze,ie+=c*Ce,ee+=c*Le,X+=c*Se,G+=c*Ae,Y+=c*He,se+=c*Oe,ve+=c*Ve,ce+=c*Ge,_e+=c*et,he+=c*tt,be+=c*Je,c=C[3],K+=c*je,Z+=c*xe,S+=c*Re,A+=c*Fe,ie+=c*ze,ee+=c*Ce,X+=c*Le,G+=c*Se,Y+=c*Ae,se+=c*He,ve+=c*Oe,ce+=c*Ve,_e+=c*Ge,he+=c*et,be+=c*tt,H+=c*Je,c=C[4],Z+=c*je,S+=c*xe,A+=c*Re,ie+=c*Fe,ee+=c*ze,X+=c*Ce,G+=c*Le,Y+=c*Se,se+=c*Ae,ve+=c*He,ce+=c*Oe,_e+=c*Ve,he+=c*Ge,be+=c*et,H+=c*tt,q+=c*Je,c=C[5],S+=c*je,A+=c*xe,ie+=c*Re,ee+=c*Fe,X+=c*ze,G+=c*Ce,Y+=c*Le,se+=c*Se,ve+=c*Ae,ce+=c*He,_e+=c*Oe,he+=c*Ve,be+=c*Ge,H+=c*et,q+=c*tt,N+=c*Je,c=C[6],A+=c*je,ie+=c*xe,ee+=c*Re,X+=c*Fe,G+=c*ze,Y+=c*Ce,se+=c*Le,ve+=c*Se,ce+=c*Ae,_e+=c*He,he+=c*Oe,be+=c*Ve,H+=c*Ge,q+=c*et,N+=c*tt,h+=c*Je,c=C[7],ie+=c*je,ee+=c*xe,X+=c*Re,G+=c*Fe,Y+=c*ze,se+=c*Ce,ve+=c*Le,ce+=c*Se,_e+=c*Ae,he+=c*He,be+=c*Oe,H+=c*Ve,q+=c*Ge,N+=c*et,h+=c*tt,O+=c*Je,c=C[8],ee+=c*je,X+=c*xe,G+=c*Re,Y+=c*Fe,se+=c*ze,ve+=c*Ce,ce+=c*Le,_e+=c*Se,he+=c*Ae,be+=c*He,H+=c*Oe,q+=c*Ve,N+=c*Ge,h+=c*et,O+=c*tt,ue+=c*Je,c=C[9],X+=c*je,G+=c*xe,Y+=c*Re,se+=c*Fe,ve+=c*ze,ce+=c*Ce,_e+=c*Le,he+=c*Se,be+=c*Ae,H+=c*He,q+=c*Oe,N+=c*Ve,h+=c*Ge,O+=c*et,ue+=c*tt,de+=c*Je,c=C[10],G+=c*je,Y+=c*xe,se+=c*Re,ve+=c*Fe,ce+=c*ze,_e+=c*Ce,he+=c*Le,be+=c*Se,H+=c*Ae,q+=c*He,N+=c*Oe,h+=c*Ve,O+=c*Ge,ue+=c*et,de+=c*tt,Ie+=c*Je,c=C[11],Y+=c*je,se+=c*xe,ve+=c*Re,ce+=c*Fe,_e+=c*ze,he+=c*Ce,be+=c*Le,H+=c*Se,q+=c*Ae,N+=c*He,h+=c*Oe,O+=c*Ve,ue+=c*Ge,de+=c*et,Ie+=c*tt,Be+=c*Je,c=C[12],se+=c*je,ve+=c*xe,ce+=c*Re,_e+=c*Fe,he+=c*ze,be+=c*Ce,H+=c*Le,q+=c*Se,N+=c*Ae,h+=c*He,O+=c*Oe,ue+=c*Ve,de+=c*Ge,Ie+=c*et,Be+=c*tt,ke+=c*Je,c=C[13],ve+=c*je,ce+=c*xe,_e+=c*Re,he+=c*Fe,be+=c*ze,H+=c*Ce,q+=c*Le,N+=c*Se,h+=c*Ae,O+=c*He,ue+=c*Oe,de+=c*Ve,Ie+=c*Ge,Be+=c*et,ke+=c*tt,$e+=c*Je,c=C[14],ce+=c*je,_e+=c*xe,he+=c*Re,be+=c*Fe,H+=c*ze,q+=c*Ce,N+=c*Le,h+=c*Se,O+=c*Ae,ue+=c*He,de+=c*Oe,Ie+=c*Ve,Be+=c*Ge,ke+=c*et,$e+=c*tt,gt+=c*Je,c=C[15],_e+=c*je,he+=c*xe,be+=c*Re,H+=c*Fe,q+=c*ze,N+=c*Ce,h+=c*Le,O+=c*Se,ue+=c*Ae,de+=c*He,Ie+=c*Oe,Be+=c*Ve,ke+=c*Ge,$e+=c*et,gt+=c*tt,vt+=c*Je,J+=38*he,x+=38*be,z+=38*H,K+=38*q,Z+=38*N,S+=38*h,A+=38*O,ie+=38*ue,ee+=38*de,X+=38*Ie,G+=38*Be,Y+=38*ke,se+=38*$e,ve+=38*gt,ce+=38*vt,y=1,c=J+y+65535,y=Math.floor(c/65536),J=c-y*65536,c=x+y+65535,y=Math.floor(c/65536),x=c-y*65536,c=z+y+65535,y=Math.floor(c/65536),z=c-y*65536,c=K+y+65535,y=Math.floor(c/65536),K=c-y*65536,c=Z+y+65535,y=Math.floor(c/65536),Z=c-y*65536,c=S+y+65535,y=Math.floor(c/65536),S=c-y*65536,c=A+y+65535,y=Math.floor(c/65536),A=c-y*65536,c=ie+y+65535,y=Math.floor(c/65536),ie=c-y*65536,c=ee+y+65535,y=Math.floor(c/65536),ee=c-y*65536,c=X+y+65535,y=Math.floor(c/65536),X=c-y*65536,c=G+y+65535,y=Math.floor(c/65536),G=c-y*65536,c=Y+y+65535,y=Math.floor(c/65536),Y=c-y*65536,c=se+y+65535,y=Math.floor(c/65536),se=c-y*65536,c=ve+y+65535,y=Math.floor(c/65536),ve=c-y*65536,c=ce+y+65535,y=Math.floor(c/65536),ce=c-y*65536,c=_e+y+65535,y=Math.floor(c/65536),_e=c-y*65536,J+=y-1+37*(y-1),y=1,c=J+y+65535,y=Math.floor(c/65536),J=c-y*65536,c=x+y+65535,y=Math.floor(c/65536),x=c-y*65536,c=z+y+65535,y=Math.floor(c/65536),z=c-y*65536,c=K+y+65535,y=Math.floor(c/65536),K=c-y*65536,c=Z+y+65535,y=Math.floor(c/65536),Z=c-y*65536,c=S+y+65535,y=Math.floor(c/65536),S=c-y*65536,c=A+y+65535,y=Math.floor(c/65536),A=c-y*65536,c=ie+y+65535,y=Math.floor(c/65536),ie=c-y*65536,c=ee+y+65535,y=Math.floor(c/65536),ee=c-y*65536,c=X+y+65535,y=Math.floor(c/65536),X=c-y*65536,c=G+y+65535,y=Math.floor(c/65536),G=c-y*65536,c=Y+y+65535,y=Math.floor(c/65536),Y=c-y*65536,c=se+y+65535,y=Math.floor(c/65536),se=c-y*65536,c=ve+y+65535,y=Math.floor(c/65536),ve=c-y*65536,c=ce+y+65535,y=Math.floor(c/65536),ce=c-y*65536,c=_e+y+65535,y=Math.floor(c/65536),_e=c-y*65536,J+=y-1+37*(y-1),E[0]=J,E[1]=x,E[2]=z,E[3]=K,E[4]=Z,E[5]=S,E[6]=A,E[7]=ie,E[8]=ee,E[9]=X,E[10]=G,E[11]=Y,E[12]=se,E[13]=ve,E[14]=ce,E[15]=_e}function F(E,C){B(E,C,C)}function L(E,C){const b=s();for(let c=0;c<16;c++)b[c]=C[c];for(let c=253;c>=0;c--)F(b,b),c!==2&&c!==4&&B(b,b,C);for(let c=0;c<16;c++)E[c]=b[c]}function k(E,C){const b=new Uint8Array(32),c=new Float64Array(80),y=s(),J=s(),x=s(),z=s(),K=s(),Z=s();for(let ee=0;ee<31;ee++)b[ee]=E[ee];b[31]=E[31]&127|64,b[0]&=248,w(c,C);for(let ee=0;ee<16;ee++)J[ee]=c[ee];y[0]=z[0]=1;for(let ee=254;ee>=0;--ee){const X=b[ee>>>3]>>>(ee&7)&1;f(y,J,X),f(x,z,X),I(K,y,x),R(y,y,x),I(x,J,z),R(J,J,z),F(z,K),F(Z,y),B(y,x,y),B(x,J,K),I(K,y,x),R(y,y,x),F(J,y),R(x,z,Z),B(y,x,l),I(y,y,z),B(x,x,y),B(y,z,Z),B(z,J,c),F(J,K),f(y,J,X),f(x,z,X)}for(let ee=0;ee<16;ee++)c[ee+16]=y[ee],c[ee+32]=x[ee],c[ee+48]=J[ee],c[ee+64]=z[ee];const S=c.subarray(32),A=c.subarray(16);L(S,S),B(A,A,S);const ie=new Uint8Array(32);return g(ie,A),ie}n.scalarMult=k;function W(E){return k(E,a)}n.scalarMultBase=W;function ae(E){if(E.length!==n.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${n.SECRET_KEY_LENGTH} bytes`);const C=new Uint8Array(E);return{publicKey:W(C),secretKey:C}}n.generateKeyPairFromSeed=ae;function T(E){const C=(0,e.randomBytes)(32,E),b=ae(C);return(0,r.wipe)(C),b}n.generateKeyPair=T;function U(E,C,b=!1){if(E.length!==n.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(C.length!==n.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const c=k(E,C);if(b){let y=0;for(let J=0;J<c.length;J++)y|=c[J];if(y===0)throw new Error("X25519: invalid shared key")}return c}n.sharedKey=U})(du);function pu(n){return globalThis.Buffer!=null?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):n}function Fd(n=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?pu(globalThis.Buffer.allocUnsafe(n)):new Uint8Array(n)}function Yc(n,e){e||(e=n.reduce((a,l)=>a+l.length,0));const r=Fd(e);let s=0;for(const a of n)r.set(a,s),s+=a.length;return pu(r)}function gm(n,e){if(n.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),s=0;s<r.length;s++)r[s]=255;for(var a=0;a<n.length;a++){var l=n.charAt(a),p=l.charCodeAt(0);if(r[p]!==255)throw new TypeError(l+" is ambiguous");r[p]=a}var f=n.length,g=n.charAt(0),w=Math.log(f)/Math.log(256),I=Math.log(256)/Math.log(f);function R(L){if(L instanceof Uint8Array||(ArrayBuffer.isView(L)?L=new Uint8Array(L.buffer,L.byteOffset,L.byteLength):Array.isArray(L)&&(L=Uint8Array.from(L))),!(L instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(L.length===0)return"";for(var k=0,W=0,ae=0,T=L.length;ae!==T&&L[ae]===0;)ae++,k++;for(var U=(T-ae)*I+1>>>0,E=new Uint8Array(U);ae!==T;){for(var C=L[ae],b=0,c=U-1;(C!==0||b<W)&&c!==-1;c--,b++)C+=256*E[c]>>>0,E[c]=C%f>>>0,C=C/f>>>0;if(C!==0)throw new Error("Non-zero carry");W=b,ae++}for(var y=U-W;y!==U&&E[y]===0;)y++;for(var J=g.repeat(k);y<U;++y)J+=n.charAt(E[y]);return J}function B(L){if(typeof L!="string")throw new TypeError("Expected String");if(L.length===0)return new Uint8Array;var k=0;if(L[k]!==" "){for(var W=0,ae=0;L[k]===g;)W++,k++;for(var T=(L.length-k)*w+1>>>0,U=new Uint8Array(T);L[k];){var E=r[L.charCodeAt(k)];if(E===255)return;for(var C=0,b=T-1;(E!==0||C<ae)&&b!==-1;b--,C++)E+=f*U[b]>>>0,U[b]=E%256>>>0,E=E/256>>>0;if(E!==0)throw new Error("Non-zero carry");ae=C,k++}if(L[k]!==" "){for(var c=T-ae;c!==T&&U[c]===0;)c++;for(var y=new Uint8Array(W+(T-c)),J=W;c!==T;)y[J++]=U[c++];return y}}}function F(L){var k=B(L);if(k)return k;throw new Error(`Non-${e} character`)}return{encode:R,decodeUnsafe:B,decode:F}}var vm=gm,ym=vm;const _m=n=>{if(n instanceof Uint8Array&&n.constructor.name==="Uint8Array")return n;if(n instanceof ArrayBuffer)return new Uint8Array(n);if(ArrayBuffer.isView(n))return new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("Unknown type, must be binary type")},bm=n=>new TextEncoder().encode(n),mm=n=>new TextDecoder().decode(n);class wm{constructor(e,r,s){this.name=e,this.prefix=r,this.baseEncode=s}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Em{constructor(e,r,s){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=s}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Ld(this,e)}}class Dm{constructor(e){this.decoders=e}or(e){return Ld(this,e)}decode(e){const r=e[0],s=this.decoders[r];if(s)return s.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Ld=(n,e)=>new Dm({...n.decoders||{[n.prefix]:n},...e.decoders||{[e.prefix]:e}});class Sm{constructor(e,r,s,a){this.name=e,this.prefix=r,this.baseEncode=s,this.baseDecode=a,this.encoder=new wm(e,r,s),this.decoder=new Em(e,r,a)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Vo=({name:n,prefix:e,encode:r,decode:s})=>new Sm(n,e,r,s),ys=({prefix:n,name:e,alphabet:r})=>{const{encode:s,decode:a}=ym(r,e);return Vo({prefix:n,name:e,encode:s,decode:l=>_m(a(l))})},Im=(n,e,r,s)=>{const a={};for(let I=0;I<e.length;++I)a[e[I]]=I;let l=n.length;for(;n[l-1]==="=";)--l;const p=new Uint8Array(l*r/8|0);let f=0,g=0,w=0;for(let I=0;I<l;++I){const R=a[n[I]];if(R===void 0)throw new SyntaxError(`Non-${s} character`);g=g<<r|R,f+=r,f>=8&&(f-=8,p[w++]=255&g>>f)}if(f>=r||255&g<<8-f)throw new SyntaxError("Unexpected end of data");return p},xm=(n,e,r)=>{const s=e[e.length-1]==="=",a=(1<<r)-1;let l="",p=0,f=0;for(let g=0;g<n.length;++g)for(f=f<<8|n[g],p+=8;p>r;)p-=r,l+=e[a&f>>p];if(p&&(l+=e[a&f<<r-p]),s)for(;l.length*r&7;)l+="=";return l},Jt=({name:n,prefix:e,bitsPerChar:r,alphabet:s})=>Vo({prefix:e,name:n,encode(a){return xm(a,s,r)},decode(a){return Im(a,s,r,n)}}),Om=Vo({prefix:"\0",name:"identity",encode:n=>mm(n),decode:n=>bm(n)}),Cm=Object.freeze(Object.defineProperty({__proto__:null,identity:Om},Symbol.toStringTag,{value:"Module"})),Am=Jt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),Pm=Object.freeze(Object.defineProperty({__proto__:null,base2:Am},Symbol.toStringTag,{value:"Module"})),Tm=Jt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),Nm=Object.freeze(Object.defineProperty({__proto__:null,base8:Tm},Symbol.toStringTag,{value:"Module"})),Rm=ys({prefix:"9",name:"base10",alphabet:"0123456789"}),Fm=Object.freeze(Object.defineProperty({__proto__:null,base10:Rm},Symbol.toStringTag,{value:"Module"})),Lm=Jt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Um=Jt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),$m=Object.freeze(Object.defineProperty({__proto__:null,base16:Lm,base16upper:Um},Symbol.toStringTag,{value:"Module"})),Mm=Jt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),jm=Jt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),zm=Jt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),qm=Jt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Bm=Jt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Hm=Jt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Km=Jt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),km=Jt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Vm=Jt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Wm=Object.freeze(Object.defineProperty({__proto__:null,base32:Mm,base32hex:Bm,base32hexpad:Km,base32hexpadupper:km,base32hexupper:Hm,base32pad:zm,base32padupper:qm,base32upper:jm,base32z:Vm},Symbol.toStringTag,{value:"Module"})),Gm=ys({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Ym=ys({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),Jm=Object.freeze(Object.defineProperty({__proto__:null,base36:Gm,base36upper:Ym},Symbol.toStringTag,{value:"Module"})),Xm=ys({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Qm=ys({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),Zm=Object.freeze(Object.defineProperty({__proto__:null,base58btc:Xm,base58flickr:Qm},Symbol.toStringTag,{value:"Module"})),ew=Jt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),tw=Jt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),rw=Jt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),iw=Jt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),nw=Object.freeze(Object.defineProperty({__proto__:null,base64:ew,base64pad:tw,base64url:rw,base64urlpad:iw},Symbol.toStringTag,{value:"Module"})),Ud=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),sw=Ud.reduce((n,e,r)=>(n[r]=e,n),[]),ow=Ud.reduce((n,e,r)=>(n[e.codePointAt(0)]=r,n),[]);function aw(n){return n.reduce((e,r)=>(e+=sw[r],e),"")}function cw(n){const e=[];for(const r of n){const s=ow[r.codePointAt(0)];if(s===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(s)}return new Uint8Array(e)}const uw=Vo({prefix:"🚀",name:"base256emoji",encode:aw,decode:cw}),hw=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:uw},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const $l={...Cm,...Pm,...Nm,...Fm,...$m,...Wm,...Jm,...Zm,...nw,...hw};function $d(n,e,r,s){return{name:n,prefix:e,encoder:{name:n,prefix:e,encode:r},decoder:{decode:s}}}const Ml=$d("utf8","u",n=>"u"+new TextDecoder("utf8").decode(n),n=>new TextEncoder().encode(n.substring(1))),Dc=$d("ascii","a",n=>{let e="a";for(let r=0;r<n.length;r++)e+=String.fromCharCode(n[r]);return e},n=>{n=n.substring(1);const e=Fd(n.length);for(let r=0;r<n.length;r++)e[r]=n.charCodeAt(r);return e}),Md={utf8:Ml,"utf-8":Ml,hex:$l.base16,latin1:Dc,ascii:Dc,binary:Dc,...$l};function br(n,e="utf8"){const r=Md[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?pu(globalThis.Buffer.from(n,"utf-8")):r.decoder.decode(`${r.prefix}${n}`)}function lr(n,e="utf8"){const r=Md[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(n.buffer,n.byteOffset,n.byteLength).toString("utf8"):r.encoder.encode(n).substring(1)}var jl=globalThis&&globalThis.__spreadArray||function(n,e,r){if(r||arguments.length===2)for(var s=0,a=e.length,l;s<a;s++)(l||!(s in e))&&(l||(l=Array.prototype.slice.call(e,0,s)),l[s]=e[s]);return n.concat(l||Array.prototype.slice.call(e))},lw=function(){function n(e,r,s){this.name=e,this.version=r,this.os=s,this.type="browser"}return n}(),fw=function(){function n(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return n}(),dw=function(){function n(e,r,s,a){this.name=e,this.version=r,this.os=s,this.bot=a,this.type="bot-device"}return n}(),pw=function(){function n(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return n}(),gw=function(){function n(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return n}(),vw=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,yw=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,zl=3,_w=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",vw]],ql=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function bw(n){return n?Bl(n):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new gw:typeof navigator<"u"?Bl(navigator.userAgent):Ew()}function mw(n){return n!==""&&_w.reduce(function(e,r){var s=r[0],a=r[1];if(e)return e;var l=a.exec(n);return!!l&&[s,l]},!1)}function Bl(n){var e=mw(n);if(!e)return null;var r=e[0],s=e[1];if(r==="searchbot")return new pw;var a=s[1]&&s[1].split(".").join("_").split("_").slice(0,3);a?a.length<zl&&(a=jl(jl([],a,!0),Dw(zl-a.length),!0)):a=[];var l=a.join("."),p=ww(n),f=yw.exec(n);return f&&f[1]?new dw(r,l,p,f[1]):new lw(r,l,p)}function ww(n){for(var e=0,r=ql.length;e<r;e++){var s=ql[e],a=s[0],l=s[1],p=l.exec(n);if(p)return a}return null}function Ew(){var n=typeof process<"u"&&process.version;return n?new fw(process.version.slice(1)):null}function Dw(n){for(var e=[],r=0;r<n;r++)e.push("0");return e}var me={},jd={exports:{}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(function(n){var e,r,s,a,l,p,f,g,w,I,R,B,F,L,k,W,ae,T,U,E,C,b,c;(function(y){var J=typeof cr=="object"?cr:typeof self=="object"?self:typeof this=="object"?this:{};y(x(J,x(n.exports)));function x(z,K){return z!==J&&(typeof Object.create=="function"?Object.defineProperty(z,"__esModule",{value:!0}):z.__esModule=!0),function(Z,S){return z[Z]=K?K(Z,S):S}}})(function(y){var J=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,z){x.__proto__=z}||function(x,z){for(var K in z)z.hasOwnProperty(K)&&(x[K]=z[K])};e=function(x,z){J(x,z);function K(){this.constructor=x}x.prototype=z===null?Object.create(z):(K.prototype=z.prototype,new K)},r=Object.assign||function(x){for(var z,K=1,Z=arguments.length;K<Z;K++){z=arguments[K];for(var S in z)Object.prototype.hasOwnProperty.call(z,S)&&(x[S]=z[S])}return x},s=function(x,z){var K={};for(var Z in x)Object.prototype.hasOwnProperty.call(x,Z)&&z.indexOf(Z)<0&&(K[Z]=x[Z]);if(x!=null&&typeof Object.getOwnPropertySymbols=="function")for(var S=0,Z=Object.getOwnPropertySymbols(x);S<Z.length;S++)z.indexOf(Z[S])<0&&Object.prototype.propertyIsEnumerable.call(x,Z[S])&&(K[Z[S]]=x[Z[S]]);return K},a=function(x,z,K,Z){var S=arguments.length,A=S<3?z:Z===null?Z=Object.getOwnPropertyDescriptor(z,K):Z,ie;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(x,z,K,Z);else for(var ee=x.length-1;ee>=0;ee--)(ie=x[ee])&&(A=(S<3?ie(A):S>3?ie(z,K,A):ie(z,K))||A);return S>3&&A&&Object.defineProperty(z,K,A),A},l=function(x,z){return function(K,Z){z(K,Z,x)}},p=function(x,z){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(x,z)},f=function(x,z,K,Z){function S(A){return A instanceof K?A:new K(function(ie){ie(A)})}return new(K||(K=Promise))(function(A,ie){function ee(Y){try{G(Z.next(Y))}catch(se){ie(se)}}function X(Y){try{G(Z.throw(Y))}catch(se){ie(se)}}function G(Y){Y.done?A(Y.value):S(Y.value).then(ee,X)}G((Z=Z.apply(x,z||[])).next())})},g=function(x,z){var K={label:0,sent:function(){if(A[0]&1)throw A[1];return A[1]},trys:[],ops:[]},Z,S,A,ie;return ie={next:ee(0),throw:ee(1),return:ee(2)},typeof Symbol=="function"&&(ie[Symbol.iterator]=function(){return this}),ie;function ee(G){return function(Y){return X([G,Y])}}function X(G){if(Z)throw new TypeError("Generator is already executing.");for(;K;)try{if(Z=1,S&&(A=G[0]&2?S.return:G[0]?S.throw||((A=S.return)&&A.call(S),0):S.next)&&!(A=A.call(S,G[1])).done)return A;switch(S=0,A&&(G=[G[0]&2,A.value]),G[0]){case 0:case 1:A=G;break;case 4:return K.label++,{value:G[1],done:!1};case 5:K.label++,S=G[1],G=[0];continue;case 7:G=K.ops.pop(),K.trys.pop();continue;default:if(A=K.trys,!(A=A.length>0&&A[A.length-1])&&(G[0]===6||G[0]===2)){K=0;continue}if(G[0]===3&&(!A||G[1]>A[0]&&G[1]<A[3])){K.label=G[1];break}if(G[0]===6&&K.label<A[1]){K.label=A[1],A=G;break}if(A&&K.label<A[2]){K.label=A[2],K.ops.push(G);break}A[2]&&K.ops.pop(),K.trys.pop();continue}G=z.call(x,K)}catch(Y){G=[6,Y],S=0}finally{Z=A=0}if(G[0]&5)throw G[1];return{value:G[0]?G[1]:void 0,done:!0}}},c=function(x,z,K,Z){Z===void 0&&(Z=K),x[Z]=z[K]},w=function(x,z){for(var K in x)K!=="default"&&!z.hasOwnProperty(K)&&(z[K]=x[K])},I=function(x){var z=typeof Symbol=="function"&&Symbol.iterator,K=z&&x[z],Z=0;if(K)return K.call(x);if(x&&typeof x.length=="number")return{next:function(){return x&&Z>=x.length&&(x=void 0),{value:x&&x[Z++],done:!x}}};throw new TypeError(z?"Object is not iterable.":"Symbol.iterator is not defined.")},R=function(x,z){var K=typeof Symbol=="function"&&x[Symbol.iterator];if(!K)return x;var Z=K.call(x),S,A=[],ie;try{for(;(z===void 0||z-- >0)&&!(S=Z.next()).done;)A.push(S.value)}catch(ee){ie={error:ee}}finally{try{S&&!S.done&&(K=Z.return)&&K.call(Z)}finally{if(ie)throw ie.error}}return A},B=function(){for(var x=[],z=0;z<arguments.length;z++)x=x.concat(R(arguments[z]));return x},F=function(){for(var x=0,z=0,K=arguments.length;z<K;z++)x+=arguments[z].length;for(var Z=Array(x),S=0,z=0;z<K;z++)for(var A=arguments[z],ie=0,ee=A.length;ie<ee;ie++,S++)Z[S]=A[ie];return Z},L=function(x){return this instanceof L?(this.v=x,this):new L(x)},k=function(x,z,K){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Z=K.apply(x,z||[]),S,A=[];return S={},ie("next"),ie("throw"),ie("return"),S[Symbol.asyncIterator]=function(){return this},S;function ie(ve){Z[ve]&&(S[ve]=function(ce){return new Promise(function(_e,he){A.push([ve,ce,_e,he])>1||ee(ve,ce)})})}function ee(ve,ce){try{X(Z[ve](ce))}catch(_e){se(A[0][3],_e)}}function X(ve){ve.value instanceof L?Promise.resolve(ve.value.v).then(G,Y):se(A[0][2],ve)}function G(ve){ee("next",ve)}function Y(ve){ee("throw",ve)}function se(ve,ce){ve(ce),A.shift(),A.length&&ee(A[0][0],A[0][1])}},W=function(x){var z,K;return z={},Z("next"),Z("throw",function(S){throw S}),Z("return"),z[Symbol.iterator]=function(){return this},z;function Z(S,A){z[S]=x[S]?function(ie){return(K=!K)?{value:L(x[S](ie)),done:S==="return"}:A?A(ie):ie}:A}},ae=function(x){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var z=x[Symbol.asyncIterator],K;return z?z.call(x):(x=typeof I=="function"?I(x):x[Symbol.iterator](),K={},Z("next"),Z("throw"),Z("return"),K[Symbol.asyncIterator]=function(){return this},K);function Z(A){K[A]=x[A]&&function(ie){return new Promise(function(ee,X){ie=x[A](ie),S(ee,X,ie.done,ie.value)})}}function S(A,ie,ee,X){Promise.resolve(X).then(function(G){A({value:G,done:ee})},ie)}},T=function(x,z){return Object.defineProperty?Object.defineProperty(x,"raw",{value:z}):x.raw=z,x},U=function(x){if(x&&x.__esModule)return x;var z={};if(x!=null)for(var K in x)Object.hasOwnProperty.call(x,K)&&(z[K]=x[K]);return z.default=x,z},E=function(x){return x&&x.__esModule?x:{default:x}},C=function(x,z){if(!z.has(x))throw new TypeError("attempted to get private field on non-instance");return z.get(x)},b=function(x,z,K){if(!z.has(x))throw new TypeError("attempted to set private field on non-instance");return z.set(x,K),K},y("__extends",e),y("__assign",r),y("__rest",s),y("__decorate",a),y("__param",l),y("__metadata",p),y("__awaiter",f),y("__generator",g),y("__exportStar",w),y("__createBinding",c),y("__values",I),y("__read",R),y("__spread",B),y("__spreadArrays",F),y("__await",L),y("__asyncGenerator",k),y("__asyncDelegator",W),y("__asyncValues",ae),y("__makeTemplateObject",T),y("__importStar",U),y("__importDefault",E),y("__classPrivateFieldGet",C),y("__classPrivateFieldSet",b)})})(jd);var zr=jd.exports,Sc={},ts={},Hl;function Sw(){if(Hl)return ts;Hl=1,Object.defineProperty(ts,"__esModule",{value:!0}),ts.delay=void 0;function n(e){return new Promise(r=>{setTimeout(()=>{r(!0)},e)})}return ts.delay=n,ts}var Ji={},Ic={},Xi={},Kl;function Iw(){return Kl||(Kl=1,Object.defineProperty(Xi,"__esModule",{value:!0}),Xi.ONE_THOUSAND=Xi.ONE_HUNDRED=void 0,Xi.ONE_HUNDRED=100,Xi.ONE_THOUSAND=1e3),Xi}var xc={},kl;function xw(){return kl||(kl=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.ONE_YEAR=n.FOUR_WEEKS=n.THREE_WEEKS=n.TWO_WEEKS=n.ONE_WEEK=n.THIRTY_DAYS=n.SEVEN_DAYS=n.FIVE_DAYS=n.THREE_DAYS=n.ONE_DAY=n.TWENTY_FOUR_HOURS=n.TWELVE_HOURS=n.SIX_HOURS=n.THREE_HOURS=n.ONE_HOUR=n.SIXTY_MINUTES=n.THIRTY_MINUTES=n.TEN_MINUTES=n.FIVE_MINUTES=n.ONE_MINUTE=n.SIXTY_SECONDS=n.THIRTY_SECONDS=n.TEN_SECONDS=n.FIVE_SECONDS=n.ONE_SECOND=void 0,n.ONE_SECOND=1,n.FIVE_SECONDS=5,n.TEN_SECONDS=10,n.THIRTY_SECONDS=30,n.SIXTY_SECONDS=60,n.ONE_MINUTE=n.SIXTY_SECONDS,n.FIVE_MINUTES=n.ONE_MINUTE*5,n.TEN_MINUTES=n.ONE_MINUTE*10,n.THIRTY_MINUTES=n.ONE_MINUTE*30,n.SIXTY_MINUTES=n.ONE_MINUTE*60,n.ONE_HOUR=n.SIXTY_MINUTES,n.THREE_HOURS=n.ONE_HOUR*3,n.SIX_HOURS=n.ONE_HOUR*6,n.TWELVE_HOURS=n.ONE_HOUR*12,n.TWENTY_FOUR_HOURS=n.ONE_HOUR*24,n.ONE_DAY=n.TWENTY_FOUR_HOURS,n.THREE_DAYS=n.ONE_DAY*3,n.FIVE_DAYS=n.ONE_DAY*5,n.SEVEN_DAYS=n.ONE_DAY*7,n.THIRTY_DAYS=n.ONE_DAY*30,n.ONE_WEEK=n.SEVEN_DAYS,n.TWO_WEEKS=n.ONE_WEEK*2,n.THREE_WEEKS=n.ONE_WEEK*3,n.FOUR_WEEKS=n.ONE_WEEK*4,n.ONE_YEAR=n.ONE_DAY*365}(xc)),xc}var Vl;function zd(){return Vl||(Vl=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=zr;e.__exportStar(Iw(),n),e.__exportStar(xw(),n)}(Ic)),Ic}var Wl;function Ow(){if(Wl)return Ji;Wl=1,Object.defineProperty(Ji,"__esModule",{value:!0}),Ji.fromMiliseconds=Ji.toMiliseconds=void 0;const n=zd();function e(s){return s*n.ONE_THOUSAND}Ji.toMiliseconds=e;function r(s){return Math.floor(s/n.ONE_THOUSAND)}return Ji.fromMiliseconds=r,Ji}var Gl;function Cw(){return Gl||(Gl=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=zr;e.__exportStar(Sw(),n),e.__exportStar(Ow(),n)}(Sc)),Sc}var On={},Yl;function Aw(){if(Yl)return On;Yl=1,Object.defineProperty(On,"__esModule",{value:!0}),On.Watch=void 0;class n{constructor(){this.timestamps=new Map}start(r){if(this.timestamps.has(r))throw new Error(`Watch already started for label: ${r}`);this.timestamps.set(r,{started:Date.now()})}stop(r){const s=this.get(r);if(typeof s.elapsed<"u")throw new Error(`Watch already stopped for label: ${r}`);const a=Date.now()-s.started;this.timestamps.set(r,{started:s.started,elapsed:a})}get(r){const s=this.timestamps.get(r);if(typeof s>"u")throw new Error(`No timestamp found for label: ${r}`);return s}elapsed(r){const s=this.get(r);return s.elapsed||Date.now()-s.started}}return On.Watch=n,On.default=n,On}var Oc={},rs={},Jl;function Pw(){if(Jl)return rs;Jl=1,Object.defineProperty(rs,"__esModule",{value:!0}),rs.IWatch=void 0;class n{}return rs.IWatch=n,rs}var Xl;function Tw(){return Xl||(Xl=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),zr.__exportStar(Pw(),n)}(Oc)),Oc}(function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=zr;e.__exportStar(Cw(),n),e.__exportStar(Aw(),n),e.__exportStar(Tw(),n),e.__exportStar(zd(),n)})(me);var ft={};Object.defineProperty(ft,"__esModule",{value:!0});ft.getLocalStorage=ft.getLocalStorageOrThrow=ft.getCrypto=ft.getCryptoOrThrow=Bd=ft.getLocation=ft.getLocationOrThrow=gu=ft.getNavigator=ft.getNavigatorOrThrow=qd=ft.getDocument=ft.getDocumentOrThrow=ft.getFromWindowOrThrow=ft.getFromWindow=void 0;function rn(n){let e;return typeof window<"u"&&typeof window[n]<"u"&&(e=window[n]),e}ft.getFromWindow=rn;function Fn(n){const e=rn(n);if(!e)throw new Error(`${n} is not defined in Window`);return e}ft.getFromWindowOrThrow=Fn;function Nw(){return Fn("document")}ft.getDocumentOrThrow=Nw;function Rw(){return rn("document")}var qd=ft.getDocument=Rw;function Fw(){return Fn("navigator")}ft.getNavigatorOrThrow=Fw;function Lw(){return rn("navigator")}var gu=ft.getNavigator=Lw;function Uw(){return Fn("location")}ft.getLocationOrThrow=Uw;function $w(){return rn("location")}var Bd=ft.getLocation=$w;function Mw(){return Fn("crypto")}ft.getCryptoOrThrow=Mw;function jw(){return rn("crypto")}ft.getCrypto=jw;function zw(){return Fn("localStorage")}ft.getLocalStorageOrThrow=zw;function qw(){return rn("localStorage")}ft.getLocalStorage=qw;var vu={};Object.defineProperty(vu,"__esModule",{value:!0});var Hd=vu.getWindowMetadata=void 0;const Ql=ft;function Bw(){let n,e;try{n=Ql.getDocumentOrThrow(),e=Ql.getLocationOrThrow()}catch{return null}function r(){const R=n.getElementsByTagName("link"),B=[];for(let F=0;F<R.length;F++){const L=R[F],k=L.getAttribute("rel");if(k&&k.toLowerCase().indexOf("icon")>-1){const W=L.getAttribute("href");if(W)if(W.toLowerCase().indexOf("https:")===-1&&W.toLowerCase().indexOf("http:")===-1&&W.indexOf("//")!==0){let ae=e.protocol+"//"+e.host;if(W.indexOf("/")===0)ae+=W;else{const T=e.pathname.split("/");T.pop();const U=T.join("/");ae+=U+"/"+W}B.push(ae)}else if(W.indexOf("//")===0){const ae=e.protocol+W;B.push(ae)}else B.push(W)}}return B}function s(...R){const B=n.getElementsByTagName("meta");for(let F=0;F<B.length;F++){const L=B[F],k=["itemprop","property","name"].map(W=>L.getAttribute(W)).filter(W=>W?R.includes(W):!1);if(k.length&&k){const W=L.getAttribute("content");if(W)return W}}return""}function a(){let R=s("name","og:site_name","og:title","twitter:title");return R||(R=n.title),R}function l(){return s("description","og:description","twitter:description","keywords")}const p=a(),f=l(),g=e.origin,w=r();return{description:f,url:g,icons:w,name:p}}Hd=vu.getWindowMetadata=Bw;var ps={},Hw=n=>encodeURIComponent(n).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),Kd="%[a-f0-9]{2}",Zl=new RegExp("("+Kd+")|([^%]+?)","gi"),ef=new RegExp("("+Kd+")+","gi");function Jc(n,e){try{return[decodeURIComponent(n.join(""))]}catch{}if(n.length===1)return n;e=e||1;var r=n.slice(0,e),s=n.slice(e);return Array.prototype.concat.call([],Jc(r),Jc(s))}function Kw(n){try{return decodeURIComponent(n)}catch{for(var e=n.match(Zl)||[],r=1;r<e.length;r++)n=Jc(e,r).join(""),e=n.match(Zl)||[];return n}}function kw(n){for(var e={"%FE%FF":"��","%FF%FE":"��"},r=ef.exec(n);r;){try{e[r[0]]=decodeURIComponent(r[0])}catch{var s=Kw(r[0]);s!==r[0]&&(e[r[0]]=s)}r=ef.exec(n)}e["%C2"]="�";for(var a=Object.keys(e),l=0;l<a.length;l++){var p=a[l];n=n.replace(new RegExp(p,"g"),e[p])}return n}var Vw=function(n){if(typeof n!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof n+"`");try{return n=n.replace(/\+/g," "),decodeURIComponent(n)}catch{return kw(n)}},Ww=(n,e)=>{if(!(typeof n=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e==="")return[n];const r=n.indexOf(e);return r===-1?[n]:[n.slice(0,r),n.slice(r+e.length)]},Gw=function(n,e){for(var r={},s=Object.keys(n),a=Array.isArray(e),l=0;l<s.length;l++){var p=s[l],f=n[p];(a?e.indexOf(p)!==-1:e(p,f,n))&&(r[p]=f)}return r};(function(n){const e=Hw,r=Vw,s=Ww,a=Gw,l=T=>T==null,p=Symbol("encodeFragmentIdentifier");function f(T){switch(T.arrayFormat){case"index":return U=>(E,C)=>{const b=E.length;return C===void 0||T.skipNull&&C===null||T.skipEmptyString&&C===""?E:C===null?[...E,[I(U,T),"[",b,"]"].join("")]:[...E,[I(U,T),"[",I(b,T),"]=",I(C,T)].join("")]};case"bracket":return U=>(E,C)=>C===void 0||T.skipNull&&C===null||T.skipEmptyString&&C===""?E:C===null?[...E,[I(U,T),"[]"].join("")]:[...E,[I(U,T),"[]=",I(C,T)].join("")];case"colon-list-separator":return U=>(E,C)=>C===void 0||T.skipNull&&C===null||T.skipEmptyString&&C===""?E:C===null?[...E,[I(U,T),":list="].join("")]:[...E,[I(U,T),":list=",I(C,T)].join("")];case"comma":case"separator":case"bracket-separator":{const U=T.arrayFormat==="bracket-separator"?"[]=":"=";return E=>(C,b)=>b===void 0||T.skipNull&&b===null||T.skipEmptyString&&b===""?C:(b=b===null?"":b,C.length===0?[[I(E,T),U,I(b,T)].join("")]:[[C,I(b,T)].join(T.arrayFormatSeparator)])}default:return U=>(E,C)=>C===void 0||T.skipNull&&C===null||T.skipEmptyString&&C===""?E:C===null?[...E,I(U,T)]:[...E,[I(U,T),"=",I(C,T)].join("")]}}function g(T){let U;switch(T.arrayFormat){case"index":return(E,C,b)=>{if(U=/\[(\d*)\]$/.exec(E),E=E.replace(/\[\d*\]$/,""),!U){b[E]=C;return}b[E]===void 0&&(b[E]={}),b[E][U[1]]=C};case"bracket":return(E,C,b)=>{if(U=/(\[\])$/.exec(E),E=E.replace(/\[\]$/,""),!U){b[E]=C;return}if(b[E]===void 0){b[E]=[C];return}b[E]=[].concat(b[E],C)};case"colon-list-separator":return(E,C,b)=>{if(U=/(:list)$/.exec(E),E=E.replace(/:list$/,""),!U){b[E]=C;return}if(b[E]===void 0){b[E]=[C];return}b[E]=[].concat(b[E],C)};case"comma":case"separator":return(E,C,b)=>{const c=typeof C=="string"&&C.includes(T.arrayFormatSeparator),y=typeof C=="string"&&!c&&R(C,T).includes(T.arrayFormatSeparator);C=y?R(C,T):C;const J=c||y?C.split(T.arrayFormatSeparator).map(x=>R(x,T)):C===null?C:R(C,T);b[E]=J};case"bracket-separator":return(E,C,b)=>{const c=/(\[\])$/.test(E);if(E=E.replace(/\[\]$/,""),!c){b[E]=C&&R(C,T);return}const y=C===null?[]:C.split(T.arrayFormatSeparator).map(J=>R(J,T));if(b[E]===void 0){b[E]=y;return}b[E]=[].concat(b[E],y)};default:return(E,C,b)=>{if(b[E]===void 0){b[E]=C;return}b[E]=[].concat(b[E],C)}}}function w(T){if(typeof T!="string"||T.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function I(T,U){return U.encode?U.strict?e(T):encodeURIComponent(T):T}function R(T,U){return U.decode?r(T):T}function B(T){return Array.isArray(T)?T.sort():typeof T=="object"?B(Object.keys(T)).sort((U,E)=>Number(U)-Number(E)).map(U=>T[U]):T}function F(T){const U=T.indexOf("#");return U!==-1&&(T=T.slice(0,U)),T}function L(T){let U="";const E=T.indexOf("#");return E!==-1&&(U=T.slice(E)),U}function k(T){T=F(T);const U=T.indexOf("?");return U===-1?"":T.slice(U+1)}function W(T,U){return U.parseNumbers&&!Number.isNaN(Number(T))&&typeof T=="string"&&T.trim()!==""?T=Number(T):U.parseBooleans&&T!==null&&(T.toLowerCase()==="true"||T.toLowerCase()==="false")&&(T=T.toLowerCase()==="true"),T}function ae(T,U){U=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},U),w(U.arrayFormatSeparator);const E=g(U),C=Object.create(null);if(typeof T!="string"||(T=T.trim().replace(/^[?#&]/,""),!T))return C;for(const b of T.split("&")){if(b==="")continue;let[c,y]=s(U.decode?b.replace(/\+/g," "):b,"=");y=y===void 0?null:["comma","separator","bracket-separator"].includes(U.arrayFormat)?y:R(y,U),E(R(c,U),y,C)}for(const b of Object.keys(C)){const c=C[b];if(typeof c=="object"&&c!==null)for(const y of Object.keys(c))c[y]=W(c[y],U);else C[b]=W(c,U)}return U.sort===!1?C:(U.sort===!0?Object.keys(C).sort():Object.keys(C).sort(U.sort)).reduce((b,c)=>{const y=C[c];return y&&typeof y=="object"&&!Array.isArray(y)?b[c]=B(y):b[c]=y,b},Object.create(null))}n.extract=k,n.parse=ae,n.stringify=(T,U)=>{if(!T)return"";U=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},U),w(U.arrayFormatSeparator);const E=y=>U.skipNull&&l(T[y])||U.skipEmptyString&&T[y]==="",C=f(U),b={};for(const y of Object.keys(T))E(y)||(b[y]=T[y]);const c=Object.keys(b);return U.sort!==!1&&c.sort(U.sort),c.map(y=>{const J=T[y];return J===void 0?"":J===null?I(y,U):Array.isArray(J)?J.length===0&&U.arrayFormat==="bracket-separator"?I(y,U)+"[]":J.reduce(C(y),[]).join("&"):I(y,U)+"="+I(J,U)}).filter(y=>y.length>0).join("&")},n.parseUrl=(T,U)=>{U=Object.assign({decode:!0},U);const[E,C]=s(T,"#");return Object.assign({url:E.split("?")[0]||"",query:ae(k(T),U)},U&&U.parseFragmentIdentifier&&C?{fragmentIdentifier:R(C,U)}:{})},n.stringifyUrl=(T,U)=>{U=Object.assign({encode:!0,strict:!0,[p]:!0},U);const E=F(T.url).split("?")[0]||"",C=n.extract(T.url),b=n.parse(C,{sort:!1}),c=Object.assign(b,T.query);let y=n.stringify(c,U);y&&(y=`?${y}`);let J=L(T.url);return T.fragmentIdentifier&&(J=`#${U[p]?I(T.fragmentIdentifier,U):T.fragmentIdentifier}`),`${E}${y}${J}`},n.pick=(T,U,E)=>{E=Object.assign({parseFragmentIdentifier:!0,[p]:!1},E);const{url:C,query:b,fragmentIdentifier:c}=n.parseUrl(T,E);return n.stringifyUrl({url:C,query:a(b,U),fragmentIdentifier:c},E)},n.exclude=(T,U,E)=>{const C=Array.isArray(U)?b=>!U.includes(b):(b,c)=>!U(b,c);return n.pick(T,C,E)}})(ps);const Yw={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}};function Jw(n,e=[]){const r=[];return Object.keys(n).forEach(s=>{if(e.length&&!e.includes(s))return;const a=n[s];r.push(...a.accounts)}),r}function kd(n,e){return n.includes(":")?[n]:e.chains||[]}const Vd="base10",hr="base16",Xc="base64pad",yu="utf8",Wd=0,nn=1,Xw=0,tf=1,Qc=12,_u=32;function Qw(){const n=du.generateKeyPair();return{privateKey:lr(n.secretKey,hr),publicKey:lr(n.publicKey,hr)}}function Zc(){const n=Rn.randomBytes(_u);return lr(n,hr)}function Zw(n,e){const r=du.sharedKey(br(n,hr),br(e,hr)),s=new sm(ko.SHA256,r).expand(_u);return lr(s,hr)}function eE(n){const e=ko.hash(br(n,hr));return lr(e,hr)}function Tn(n){const e=ko.hash(br(n,yu));return lr(e,hr)}function tE(n){return br(`${n}`,Vd)}function _s(n){return Number(lr(n,Vd))}function rE(n){const e=tE(typeof n.type<"u"?n.type:Wd);if(_s(e)===nn&&typeof n.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof n.senderPublicKey<"u"?br(n.senderPublicKey,hr):void 0,s=typeof n.iv<"u"?br(n.iv,hr):Rn.randomBytes(Qc),a=new lu.ChaCha20Poly1305(br(n.symKey,hr)).seal(s,br(n.message,yu));return nE({type:e,sealed:a,iv:s,senderPublicKey:r})}function iE(n){const e=new lu.ChaCha20Poly1305(br(n.symKey,hr)),{sealed:r,iv:s}=Uo(n.encoded),a=e.open(s,r);if(a===null)throw new Error("Failed to decrypt");return lr(a,yu)}function nE(n){if(_s(n.type)===nn){if(typeof n.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return lr(Yc([n.type,n.senderPublicKey,n.iv,n.sealed]),Xc)}return lr(Yc([n.type,n.iv,n.sealed]),Xc)}function Uo(n){const e=br(n,Xc),r=e.slice(Xw,tf),s=tf;if(_s(r)===nn){const f=s+_u,g=f+Qc,w=e.slice(s,f),I=e.slice(f,g),R=e.slice(g);return{type:r,sealed:R,iv:I,senderPublicKey:w}}const a=s+Qc,l=e.slice(s,a),p=e.slice(a);return{type:r,sealed:p,iv:l}}function sE(n,e){const r=Uo(n);return Gd({type:_s(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?lr(r.senderPublicKey,hr):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function Gd(n){const e=(n==null?void 0:n.type)||Wd;if(e===nn){if(typeof(n==null?void 0:n.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(n==null?void 0:n.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:n==null?void 0:n.senderPublicKey,receiverPublicKey:n==null?void 0:n.receiverPublicKey}}function rf(n){return n.type===nn&&typeof n.senderPublicKey=="string"&&typeof n.receiverPublicKey=="string"}var oE=Object.defineProperty,nf=Object.getOwnPropertySymbols,aE=Object.prototype.hasOwnProperty,cE=Object.prototype.propertyIsEnumerable,sf=(n,e,r)=>e in n?oE(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,of=(n,e)=>{for(var r in e||(e={}))aE.call(e,r)&&sf(n,r,e[r]);if(nf)for(var r of nf(e))cE.call(e,r)&&sf(n,r,e[r]);return n};const uE="ReactNative",en={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},hE="js";function bu(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Yd(){return!qd()&&!!gu()&&navigator.product===uE}function mu(){return!bu()&&!!gu()}function Jd(){return Yd()?en.reactNative:bu()?en.node:mu()?en.browser:en.unknown}function lE(n,e){let r=ps.parse(n);return r=of(of({},r),e),n=ps.stringify(r),n}function fE(){return Hd()||{name:"",description:"",url:"",icons:[""]}}function dE(){const n=bw();if(n===null)return"unknown";const e=n.os?n.os.replace(" ","").toLowerCase():"unknown";return n.type==="browser"?[e,n.name,n.version].join("-"):[e,n.version].join("-")}function pE(){var n;const e=Jd();return e===en.browser?[e,((n=Bd())==null?void 0:n.host)||"unknown"].join(":"):e}function gE(n,e,r){const s=dE(),a=pE();return[[n,e].join("-"),[hE,r].join("-"),s,a].join("/")}function vE({protocol:n,version:e,relayUrl:r,sdkVersion:s,auth:a,projectId:l,useOnCloseEvent:p}){const f=r.split("?"),g=gE(n,e,s),w={auth:a,ua:g,projectId:l,useOnCloseEvent:p||void 0},I=lE(f[1]||"",w);return f[0]+"?"+I}function tn(n,e){return n.filter(r=>e.includes(r)).length===n.length}function Xd(n){return Object.fromEntries(n.entries())}function Qd(n){return new Map(Object.entries(n))}function Cn(n=me.FIVE_MINUTES,e){const r=me.toMiliseconds(n||me.FIVE_MINUTES);let s,a,l;return{resolve:p=>{l&&s&&(clearTimeout(l),s(p))},reject:p=>{l&&a&&(clearTimeout(l),a(p))},done:()=>new Promise((p,f)=>{l=setTimeout(()=>{f(new Error(e))},r),s=p,a=f})}}function $o(n,e,r){return new Promise(async(s,a)=>{const l=setTimeout(()=>a(new Error(r)),e);try{const p=await n;s(p)}catch(p){a(p)}clearTimeout(l)})}function Zd(n,e){if(typeof e=="string"&&e.startsWith(`${n}:`))return e;if(n.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(n.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${n}`)}function yE(n){return Zd("topic",n)}function _E(n){return Zd("id",n)}function ep(n){const[e,r]=n.split(":"),s={id:void 0,topic:void 0};if(e==="topic"&&typeof r=="string")s.topic=r;else if(e==="id"&&Number.isInteger(Number(r)))s.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${r}`);return s}function ii(n,e){return me.fromMiliseconds((e||Date.now())+me.toMiliseconds(n))}function Ti(n){return Date.now()>=me.toMiliseconds(n)}function Ht(n,e){return`${n}${e?`:${e}`:""}`}function Cc(n=[],e=[]){return[...new Set([...n,...e])]}async function bE({id:n,topic:e,wcDeepLink:r}){try{if(!r)return;const s=typeof r=="string"?JSON.parse(r):r;let a=s==null?void 0:s.href;if(typeof a!="string")return;a.endsWith("/")&&(a=a.slice(0,-1));const l=`${a}/wc?requestId=${n}&sessionTopic=${e}`,p=Jd();p===en.browser?window.open(l,"_self","noreferrer noopener"):p===en.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(l)}catch(s){console.error(s)}}const mE="irn";function eu(n){return(n==null?void 0:n.relay)||{protocol:mE}}function To(n){const e=Yw[n];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${n}`);return e}var wE=Object.defineProperty,af=Object.getOwnPropertySymbols,EE=Object.prototype.hasOwnProperty,DE=Object.prototype.propertyIsEnumerable,cf=(n,e,r)=>e in n?wE(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,SE=(n,e)=>{for(var r in e||(e={}))EE.call(e,r)&&cf(n,r,e[r]);if(af)for(var r of af(e))DE.call(e,r)&&cf(n,r,e[r]);return n};function IE(n,e="-"){const r={},s="relay"+e;return Object.keys(n).forEach(a=>{if(a.startsWith(s)){const l=a.replace(s,""),p=n[a];r[l]=p}}),r}function xE(n){const e=n.indexOf(":"),r=n.indexOf("?")!==-1?n.indexOf("?"):void 0,s=n.substring(0,e),a=n.substring(e+1,r).split("@"),l=typeof r<"u"?n.substring(r):"",p=ps.parse(l);return{protocol:s,topic:OE(a[0]),version:parseInt(a[1],10),symKey:p.symKey,relay:IE(p)}}function OE(n){return n.startsWith("//")?n.substring(2):n}function CE(n,e="-"){const r="relay",s={};return Object.keys(n).forEach(a=>{const l=r+e+a;n[a]&&(s[l]=n[a])}),s}function AE(n){return`${n.protocol}:${n.topic}@${n.version}?`+ps.stringify(SE({symKey:n.symKey},CE(n.relay)))}function Ln(n){const e=[];return n.forEach(r=>{const[s,a]=r.split(":");e.push(`${s}:${a}`)}),e}function PE(n){const e=[];return Object.values(n).forEach(r=>{e.push(...Ln(r.accounts))}),e}function TE(n,e){const r=[];return Object.values(n).forEach(s=>{Ln(s.accounts).includes(e)&&r.push(...s.methods)}),r}function NE(n,e){const r=[];return Object.values(n).forEach(s=>{Ln(s.accounts).includes(e)&&r.push(...s.events)}),r}function RE(n,e){const r=Ro(n,e);if(r)throw new Error(r.message);const s={};for(const[a,l]of Object.entries(n))s[a]={methods:l.methods,events:l.events,chains:l.accounts.map(p=>`${p.split(":")[0]}:${p.split(":")[1]}`)};return s}function tp(n){return n.includes(":")}function No(n){return tp(n)?n.split(":")[0]:n}const FE={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},LE={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function fe(n,e){const{message:r,code:s}=LE[n];return{message:e?`${r} ${e}`:r,code:s}}function Ft(n,e){const{message:r,code:s}=FE[n];return{message:e?`${r} ${e}`:r,code:s}}function bi(n,e){return Array.isArray(n)?typeof e<"u"&&n.length?n.every(e):!0:!1}function Nn(n){return Object.getPrototypeOf(n)===Object.prototype&&Object.keys(n).length}function ur(n){return typeof n>"u"}function Gt(n,e){return e&&ur(n)?!0:typeof n=="string"&&!!n.trim().length}function wu(n,e){return e&&ur(n)?!0:typeof n=="number"&&!isNaN(n)}function UE(n,e){const{requiredNamespaces:r}=e,s=Object.keys(n.namespaces),a=Object.keys(r);let l=!0;return tn(a,s)?(s.forEach(p=>{const{accounts:f,methods:g,events:w}=n.namespaces[p],I=Ln(f),R=r[p];(!tn(kd(p,R),I)||!tn(R.methods,g)||!tn(R.events,w))&&(l=!1)}),l):!1}function Eu(n){return Gt(n,!1)&&n.includes(":")?n.split(":").length===2:!1}function $E(n){if(Gt(n,!1)&&n.includes(":")){const e=n.split(":");if(e.length===3){const r=e[0]+":"+e[1];return!!e[2]&&Eu(r)}}return!1}function ME(n){if(Gt(n,!1))try{return typeof new URL(n)<"u"}catch{return!1}return!1}function jE(n){var e;return(e=n==null?void 0:n.proposer)==null?void 0:e.publicKey}function zE(n){return n==null?void 0:n.topic}function qE(n,e){let r=null;return Gt(n==null?void 0:n.publicKey,!1)||(r=fe("MISSING_OR_INVALID",`${e} controller public key should be a string`)),r}function uf(n){let e=!0;return bi(n)?n.length&&(e=n.every(r=>Gt(r,!1))):e=!1,e}function BE(n,e,r){let s=null;return bi(e)?e.forEach(a=>{s||(!Eu(a)||!a.includes(n))&&(s=Ft("UNSUPPORTED_CHAINS",`${r}, chain ${a} should be a string and conform to "namespace:chainId" format`))}):s=Ft("UNSUPPORTED_CHAINS",`${r}, chains ${e} should be an array of strings conforming to "namespace:chainId" format`),s}function HE(n,e){let r=null;return Object.entries(n).forEach(([s,a])=>{if(r)return;const l=BE(s,kd(s,a),`${e} requiredNamespace`);l&&(r=l)}),r}function KE(n,e){let r=null;return bi(n)?n.forEach(s=>{r||$E(s)||(r=Ft("UNSUPPORTED_ACCOUNTS",`${e}, account ${s} should be a string and conform to "namespace:chainId:address" format`))}):r=Ft("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function kE(n,e){let r=null;return Object.values(n).forEach(s=>{if(r)return;const a=KE(s==null?void 0:s.accounts,`${e} namespace`);a&&(r=a)}),r}function VE(n,e){let r=null;return uf(n==null?void 0:n.methods)?uf(n==null?void 0:n.events)||(r=Ft("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):r=Ft("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),r}function rp(n,e){let r=null;return Object.values(n).forEach(s=>{if(r)return;const a=VE(s,`${e}, namespace`);a&&(r=a)}),r}function WE(n,e,r){let s=null;if(n&&Nn(n)){const a=rp(n,e);a&&(s=a);const l=HE(n,e);l&&(s=l)}else s=fe("MISSING_OR_INVALID",`${e}, ${r} should be an object with data`);return s}function Ro(n,e){let r=null;if(n&&Nn(n)){const s=rp(n,e);s&&(r=s);const a=kE(n,e);a&&(r=a)}else r=fe("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return r}function ip(n){return Gt(n.protocol,!0)}function GE(n,e){let r=!1;return e&&!n?r=!0:n&&bi(n)&&n.length&&n.forEach(s=>{r=ip(s)}),r}function YE(n){return typeof n=="number"}function _r(n){return typeof n<"u"&&typeof n!==null}function JE(n){return!(!n||typeof n!="object"||!n.code||!wu(n.code,!1)||!n.message||!Gt(n.message,!1))}function XE(n){return!(ur(n)||!Gt(n.method,!1))}function QE(n){return!(ur(n)||ur(n.result)&&ur(n.error)||!wu(n.id,!1)||!Gt(n.jsonrpc,!1))}function ZE(n){return!(ur(n)||!Gt(n.name,!1))}function hf(n,e){return!(!Eu(e)||!PE(n).includes(e))}function e3(n,e,r){return Gt(r,!1)?TE(n,e).includes(r):!1}function t3(n,e,r){return Gt(r,!1)?NE(n,e).includes(r):!1}function lf(n,e,r){let s=null;const a=r3(n),l=i3(e),p=Object.keys(a),f=Object.keys(l),g=ff(Object.keys(n)),w=ff(Object.keys(e)),I=g.filter(R=>!w.includes(R));return I.length&&(s=fe("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${I.toString()}
      Received: ${Object.keys(e).toString()}`)),tn(p,f)||(s=fe("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${p.toString()}
      Approved: ${f.toString()}`)),Object.keys(e).forEach(R=>{if(!R.includes(":")||s)return;const B=Ln(e[R].accounts);B.includes(R)||(s=fe("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${R}
        Required: ${R}
        Approved: ${B.toString()}`))}),p.forEach(R=>{s||(tn(a[R].methods,l[R].methods)?tn(a[R].events,l[R].events)||(s=fe("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${R}`)):s=fe("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${R}`))}),s}function r3(n){const e={};return Object.keys(n).forEach(r=>{var s;r.includes(":")?e[r]=n[r]:(s=n[r].chains)==null||s.forEach(a=>{e[a]={methods:n[r].methods,events:n[r].events}})}),e}function ff(n){return[...new Set(n.map(e=>e.includes(":")?e.split(":")[0]:e))]}function i3(n){const e={};return Object.keys(n).forEach(r=>{if(r.includes(":"))e[r]=n[r];else{const s=Ln(n[r].accounts);s==null||s.forEach(a=>{e[a]={accounts:n[r].accounts.filter(l=>l.includes(`${a}:`)),methods:n[r].methods,events:n[r].events}})}}),e}function n3(n,e){return wu(n,!1)&&n<=e.max&&n>=e.min}var Wo={},bs={};Object.defineProperty(bs,"__esModule",{value:!0});function s3(n){if(typeof n!="string")throw new Error(`Cannot safe json parse value of type ${typeof n}`);try{return JSON.parse(n)}catch{return n}}bs.safeJsonParse=s3;function o3(n){return typeof n=="string"?n:JSON.stringify(n,(e,r)=>typeof r>"u"?null:r)}bs.safeJsonStringify=o3;var is={exports:{}},df;function a3(){return df||(df=1,function(){let n;function e(){}n=e,n.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},n.prototype.setItem=function(r,s){this[r]=String(s)},n.prototype.removeItem=function(r){delete this[r]},n.prototype.clear=function(){const r=this;Object.keys(r).forEach(function(s){r[s]=void 0,delete r[s]})},n.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},n.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof cr<"u"&&cr.localStorage?is.exports=cr.localStorage:typeof window<"u"&&window.localStorage?is.exports=window.localStorage:is.exports=new e}()),is.exports}var Ac={},ns={},pf;function c3(){if(pf)return ns;pf=1,Object.defineProperty(ns,"__esModule",{value:!0}),ns.IKeyValueStorage=void 0;class n{}return ns.IKeyValueStorage=n,ns}var ss={},gf;function u3(){if(gf)return ss;gf=1,Object.defineProperty(ss,"__esModule",{value:!0}),ss.parseEntry=void 0;const n=bs;function e(r){var s;return[r[0],n.safeJsonParse((s=r[1])!==null&&s!==void 0?s:"")]}return ss.parseEntry=e,ss}var vf;function h3(){return vf||(vf=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=zr;e.__exportStar(c3(),n),e.__exportStar(u3(),n)}(Ac)),Ac}Object.defineProperty(Wo,"__esModule",{value:!0});Wo.KeyValueStorage=void 0;const An=zr,yf=bs,l3=An.__importDefault(a3()),f3=h3();class np{constructor(){this.localStorage=l3.default}getKeys(){return An.__awaiter(this,void 0,void 0,function*(){return Object.keys(this.localStorage)})}getEntries(){return An.__awaiter(this,void 0,void 0,function*(){return Object.entries(this.localStorage).map(f3.parseEntry)})}getItem(e){return An.__awaiter(this,void 0,void 0,function*(){const r=this.localStorage.getItem(e);if(r!==null)return yf.safeJsonParse(r)})}setItem(e,r){return An.__awaiter(this,void 0,void 0,function*(){this.localStorage.setItem(e,yf.safeJsonStringify(r))})}removeItem(e){return An.__awaiter(this,void 0,void 0,function*(){this.localStorage.removeItem(e)})}}Wo.KeyValueStorage=np;var d3=Wo.default=np,ms={},os={},Pc={},as={};let sn=class{};const p3=Object.freeze(Object.defineProperty({__proto__:null,IEvents:sn},Symbol.toStringTag,{value:"Module"})),g3=pd(p3);var _f;function v3(){if(_f)return as;_f=1,Object.defineProperty(as,"__esModule",{value:!0}),as.IHeartBeat=void 0;const n=g3;class e extends n.IEvents{constructor(s){super()}}return as.IHeartBeat=e,as}var bf;function sp(){return bf||(bf=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),zr.__exportStar(v3(),n)}(Pc)),Pc}var Tc={},Qi={},mf;function y3(){if(mf)return Qi;mf=1,Object.defineProperty(Qi,"__esModule",{value:!0}),Qi.HEARTBEAT_EVENTS=Qi.HEARTBEAT_INTERVAL=void 0;const n=me;return Qi.HEARTBEAT_INTERVAL=n.FIVE_SECONDS,Qi.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"},Qi}var wf;function op(){return wf||(wf=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),zr.__exportStar(y3(),n)}(Tc)),Tc}var Ef;function _3(){if(Ef)return os;Ef=1,Object.defineProperty(os,"__esModule",{value:!0}),os.HeartBeat=void 0;const n=zr,e=xr,r=me,s=sp(),a=op();class l extends s.IHeartBeat{constructor(f){super(f),this.events=new e.EventEmitter,this.interval=a.HEARTBEAT_INTERVAL,this.interval=(f==null?void 0:f.interval)||a.HEARTBEAT_INTERVAL}static init(f){return n.__awaiter(this,void 0,void 0,function*(){const g=new l(f);return yield g.init(),g})}init(){return n.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(f,g){this.events.on(f,g)}once(f,g){this.events.once(f,g)}off(f,g){this.events.off(f,g)}removeListener(f,g){this.events.removeListener(f,g)}initialize(){return n.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),r.toMiliseconds(this.interval))})}pulse(){this.events.emit(a.HEARTBEAT_EVENTS.pulse)}}return os.HeartBeat=l,os}(function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=zr;e.__exportStar(_3(),n),e.__exportStar(sp(),n),e.__exportStar(op(),n)})(ms);var Ze={},Nc,Df;function b3(){if(Df)return Nc;Df=1;function n(r){try{return JSON.stringify(r)}catch{return'"[Circular]"'}}Nc=e;function e(r,s,a){var l=a&&a.stringify||n,p=1;if(typeof r=="object"&&r!==null){var f=s.length+p;if(f===1)return r;var g=new Array(f);g[0]=l(r);for(var w=1;w<f;w++)g[w]=l(s[w]);return g.join(" ")}if(typeof r!="string")return r;var I=s.length;if(I===0)return r;for(var R="",B=1-p,F=-1,L=r&&r.length||0,k=0;k<L;){if(r.charCodeAt(k)===37&&k+1<L){switch(F=F>-1?F:0,r.charCodeAt(k+1)){case 100:case 102:if(B>=I||s[B]==null)break;F<k&&(R+=r.slice(F,k)),R+=Number(s[B]),F=k+2,k++;break;case 105:if(B>=I||s[B]==null)break;F<k&&(R+=r.slice(F,k)),R+=Math.floor(Number(s[B])),F=k+2,k++;break;case 79:case 111:case 106:if(B>=I||s[B]===void 0)break;F<k&&(R+=r.slice(F,k));var W=typeof s[B];if(W==="string"){R+="'"+s[B]+"'",F=k+2,k++;break}if(W==="function"){R+=s[B].name||"<anonymous>",F=k+2,k++;break}R+=l(s[B]),F=k+2,k++;break;case 115:if(B>=I)break;F<k&&(R+=r.slice(F,k)),R+=String(s[B]),F=k+2,k++;break;case 37:F<k&&(R+=r.slice(F,k)),R+="%",F=k+2,k++,B--;break}++B}++k}return F===-1?r:(F<L&&(R+=r.slice(F)),R)}return Nc}var Rc,Sf;function m3(){if(Sf)return Rc;Sf=1;const n=b3();Rc=a;const e=C().console||{},r={mapHttpRequest:L,mapHttpResponse:L,wrapRequestSerializer:k,wrapResponseSerializer:k,wrapErrorSerializer:k,req:L,res:L,err:B};function s(b,c){return Array.isArray(b)?b.filter(function(J){return J!=="!stdSerializers.err"}):b===!0?Object.keys(c):!1}function a(b){b=b||{},b.browser=b.browser||{};const c=b.browser.transmit;if(c&&typeof c.send!="function")throw Error("pino: transmit option must have a send function");const y=b.browser.write||e;b.browser.write&&(b.browser.asObject=!0);const J=b.serializers||{},x=s(b.browser.serialize,J);let z=b.browser.serialize;Array.isArray(b.browser.serialize)&&b.browser.serialize.indexOf("!stdSerializers.err")>-1&&(z=!1);const K=["error","fatal","warn","info","debug","trace"];typeof y=="function"&&(y.error=y.fatal=y.warn=y.info=y.debug=y.trace=y),b.enabled===!1&&(b.level="silent");const Z=b.level||"info",S=Object.create(y);S.log||(S.log=W),Object.defineProperty(S,"levelVal",{get:ie}),Object.defineProperty(S,"level",{get:ee,set:X});const A={transmit:c,serialize:x,asObject:b.browser.asObject,levels:K,timestamp:F(b)};S.levels=a.levels,S.level=Z,S.setMaxListeners=S.getMaxListeners=S.emit=S.addListener=S.on=S.prependListener=S.once=S.prependOnceListener=S.removeListener=S.removeAllListeners=S.listeners=S.listenerCount=S.eventNames=S.write=S.flush=W,S.serializers=J,S._serialize=x,S._stdErrSerialize=z,S.child=G,c&&(S._logEvent=R());function ie(){return this.level==="silent"?1/0:this.levels.values[this.level]}function ee(){return this._level}function X(Y){if(Y!=="silent"&&!this.levels.values[Y])throw Error("unknown level "+Y);this._level=Y,l(A,S,"error","log"),l(A,S,"fatal","error"),l(A,S,"warn","error"),l(A,S,"info","log"),l(A,S,"debug","log"),l(A,S,"trace","log")}function G(Y,se){if(!Y)throw new Error("missing bindings for child Pino");se=se||{},x&&Y.serializers&&(se.serializers=Y.serializers);const ve=se.serializers;if(x&&ve){var ce=Object.assign({},J,ve),_e=b.browser.serialize===!0?Object.keys(ce):x;delete Y.serializers,g([Y],_e,ce,this._stdErrSerialize)}function he(be){this._childLevel=(be._childLevel|0)+1,this.error=w(be,Y,"error"),this.fatal=w(be,Y,"fatal"),this.warn=w(be,Y,"warn"),this.info=w(be,Y,"info"),this.debug=w(be,Y,"debug"),this.trace=w(be,Y,"trace"),ce&&(this.serializers=ce,this._serialize=_e),c&&(this._logEvent=R([].concat(be._logEvent.bindings,Y)))}return he.prototype=this,new he(this)}return S}a.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},a.stdSerializers=r,a.stdTimeFunctions=Object.assign({},{nullTime:ae,epochTime:T,unixTime:U,isoTime:E});function l(b,c,y,J){const x=Object.getPrototypeOf(c);c[y]=c.levelVal>c.levels.values[y]?W:x[y]?x[y]:e[y]||e[J]||W,p(b,c,y)}function p(b,c,y){!b.transmit&&c[y]===W||(c[y]=function(J){return function(){const z=b.timestamp(),K=new Array(arguments.length),Z=Object.getPrototypeOf&&Object.getPrototypeOf(this)===e?e:this;for(var S=0;S<K.length;S++)K[S]=arguments[S];if(b.serialize&&!b.asObject&&g(K,this._serialize,this.serializers,this._stdErrSerialize),b.asObject?J.call(Z,f(this,y,K,z)):J.apply(Z,K),b.transmit){const A=b.transmit.level||c.level,ie=a.levels.values[A],ee=a.levels.values[y];if(ee<ie)return;I(this,{ts:z,methodLevel:y,methodValue:ee,transmitLevel:A,transmitValue:a.levels.values[b.transmit.level||c.level],send:b.transmit.send,val:c.levelVal},K)}}}(c[y]))}function f(b,c,y,J){b._serialize&&g(y,b._serialize,b.serializers,b._stdErrSerialize);const x=y.slice();let z=x[0];const K={};J&&(K.time=J),K.level=a.levels.values[c];let Z=(b._childLevel|0)+1;if(Z<1&&(Z=1),z!==null&&typeof z=="object"){for(;Z--&&typeof x[0]=="object";)Object.assign(K,x.shift());z=x.length?n(x.shift(),x):void 0}else typeof z=="string"&&(z=n(x.shift(),x));return z!==void 0&&(K.msg=z),K}function g(b,c,y,J){for(const x in b)if(J&&b[x]instanceof Error)b[x]=a.stdSerializers.err(b[x]);else if(typeof b[x]=="object"&&!Array.isArray(b[x]))for(const z in b[x])c&&c.indexOf(z)>-1&&z in y&&(b[x][z]=y[z](b[x][z]))}function w(b,c,y){return function(){const J=new Array(1+arguments.length);J[0]=c;for(var x=1;x<J.length;x++)J[x]=arguments[x-1];return b[y].apply(this,J)}}function I(b,c,y){const J=c.send,x=c.ts,z=c.methodLevel,K=c.methodValue,Z=c.val,S=b._logEvent.bindings;g(y,b._serialize||Object.keys(b.serializers),b.serializers,b._stdErrSerialize===void 0?!0:b._stdErrSerialize),b._logEvent.ts=x,b._logEvent.messages=y.filter(function(A){return S.indexOf(A)===-1}),b._logEvent.level.label=z,b._logEvent.level.value=K,J(z,b._logEvent,Z),b._logEvent=R(S)}function R(b){return{ts:0,messages:[],bindings:b||[],level:{label:"",value:0}}}function B(b){const c={type:b.constructor.name,msg:b.message,stack:b.stack};for(const y in b)c[y]===void 0&&(c[y]=b[y]);return c}function F(b){return typeof b.timestamp=="function"?b.timestamp:b.timestamp===!1?ae:T}function L(){return{}}function k(b){return b}function W(){}function ae(){return!1}function T(){return Date.now()}function U(){return Math.round(Date.now()/1e3)}function E(){return new Date(Date.now()).toISOString()}function C(){function b(c){return typeof c<"u"&&c}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return b(self)||b(window)||b(this)||{}}}return Rc}var Zi={},If;function ap(){return If||(If=1,Object.defineProperty(Zi,"__esModule",{value:!0}),Zi.PINO_CUSTOM_CONTEXT_KEY=Zi.PINO_LOGGER_DEFAULTS=void 0,Zi.PINO_LOGGER_DEFAULTS={level:"info"},Zi.PINO_CUSTOM_CONTEXT_KEY="custom_context"),Zi}var ar={},xf;function w3(){if(xf)return ar;xf=1,Object.defineProperty(ar,"__esModule",{value:!0}),ar.generateChildLogger=ar.formatChildLoggerContext=ar.getLoggerContext=ar.setBrowserLoggerContext=ar.getBrowserLoggerContext=ar.getDefaultLoggerOptions=void 0;const n=ap();function e(f){return Object.assign(Object.assign({},f),{level:(f==null?void 0:f.level)||n.PINO_LOGGER_DEFAULTS.level})}ar.getDefaultLoggerOptions=e;function r(f,g=n.PINO_CUSTOM_CONTEXT_KEY){return f[g]||""}ar.getBrowserLoggerContext=r;function s(f,g,w=n.PINO_CUSTOM_CONTEXT_KEY){return f[w]=g,f}ar.setBrowserLoggerContext=s;function a(f,g=n.PINO_CUSTOM_CONTEXT_KEY){let w="";return typeof f.bindings>"u"?w=r(f,g):w=f.bindings().context||"",w}ar.getLoggerContext=a;function l(f,g,w=n.PINO_CUSTOM_CONTEXT_KEY){const I=a(f,w);return I.trim()?`${I}/${g}`:g}ar.formatChildLoggerContext=l;function p(f,g,w=n.PINO_CUSTOM_CONTEXT_KEY){const I=l(f,g,w),R=f.child({context:I});return s(R,I,w)}return ar.generateChildLogger=p,ar}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.pino=void 0;const e=zr,r=e.__importDefault(m3());Object.defineProperty(n,"pino",{enumerable:!0,get:function(){return r.default}}),e.__exportStar(ap(),n),e.__exportStar(w3(),n)})(Ze);class E3 extends sn{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}}class D3 extends sn{constructor(e,r){super(),this.core=e,this.logger=r,this.records=new Map}}class S3{constructor(e,r){this.logger=e,this.core=r}}let I3=class extends sn{constructor(e,r){super(),this.relayer=e,this.logger=r}},x3=class extends sn{constructor(e){super()}},O3=class{constructor(e,r,s,a){this.core=e,this.logger=r,this.name=s}};class C3 extends sn{constructor(e,r){super(),this.relayer=e,this.logger=r}}class A3 extends sn{constructor(e,r){super(),this.core=e,this.logger=r}}let P3=class{constructor(e,r){this.projectId=e,this.logger=r}},T3=class{constructor(e){this.opts=e,this.protocol="wc",this.version=2}};class N3{constructor(e){this.client=e}}const R3=n=>JSON.stringify(n,(e,r)=>typeof r=="bigint"?r.toString()+"n":r),F3=n=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,r=n.replace(e,'$1"$2n"$3');return JSON.parse(r,(s,a)=>typeof a=="string"&&a.match(/^\d+n$/)?BigInt(a.substring(0,a.length-1)):a)};function Du(n){if(typeof n!="string")throw new Error(`Cannot safe json parse value of type ${typeof n}`);try{return F3(n)}catch{return n}}function gs(n){return typeof n=="string"?n:R3(n)||""}var Su={},cp={};(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=Ue,r=Or;n.DIGEST_LENGTH=64,n.BLOCK_SIZE=128;var s=function(){function f(){this.digestLength=n.DIGEST_LENGTH,this.blockSize=n.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return f.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},f.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},f.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._tempHi),r.wipe(this._tempLo),this.reset()},f.prototype.update=function(g,w){if(w===void 0&&(w=g.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var I=0;if(this._bytesHashed+=w,this._bufferLength>0){for(;this._bufferLength<n.BLOCK_SIZE&&w>0;)this._buffer[this._bufferLength++]=g[I++],w--;this._bufferLength===this.blockSize&&(l(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(w>=this.blockSize&&(I=l(this._tempHi,this._tempLo,this._stateHi,this._stateLo,g,I,w),w%=this.blockSize);w>0;)this._buffer[this._bufferLength++]=g[I++],w--;return this},f.prototype.finish=function(g){if(!this._finished){var w=this._bytesHashed,I=this._bufferLength,R=w/536870912|0,B=w<<3,F=w%128<112?128:256;this._buffer[I]=128;for(var L=I+1;L<F-8;L++)this._buffer[L]=0;e.writeUint32BE(R,this._buffer,F-8),e.writeUint32BE(B,this._buffer,F-4),l(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,F),this._finished=!0}for(var L=0;L<this.digestLength/8;L++)e.writeUint32BE(this._stateHi[L],g,L*8),e.writeUint32BE(this._stateLo[L],g,L*8+4);return this},f.prototype.digest=function(){var g=new Uint8Array(this.digestLength);return this.finish(g),g},f.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},f.prototype.restoreState=function(g){return this._stateHi.set(g.stateHi),this._stateLo.set(g.stateLo),this._bufferLength=g.bufferLength,g.buffer&&this._buffer.set(g.buffer),this._bytesHashed=g.bytesHashed,this._finished=!1,this},f.prototype.cleanSavedState=function(g){r.wipe(g.stateHi),r.wipe(g.stateLo),g.buffer&&r.wipe(g.buffer),g.bufferLength=0,g.bytesHashed=0},f}();n.SHA512=s;var a=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function l(f,g,w,I,R,B,F){for(var L=w[0],k=w[1],W=w[2],ae=w[3],T=w[4],U=w[5],E=w[6],C=w[7],b=I[0],c=I[1],y=I[2],J=I[3],x=I[4],z=I[5],K=I[6],Z=I[7],S,A,ie,ee,X,G,Y,se;F>=128;){for(var ve=0;ve<16;ve++){var ce=8*ve+B;f[ve]=e.readUint32BE(R,ce),g[ve]=e.readUint32BE(R,ce+4)}for(var ve=0;ve<80;ve++){var _e=L,he=k,be=W,H=ae,q=T,N=U,h=E,O=C,ue=b,de=c,Ie=y,Be=J,ke=x,$e=z,gt=K,vt=Z;if(S=C,A=Z,X=A&65535,G=A>>>16,Y=S&65535,se=S>>>16,S=(T>>>14|x<<32-14)^(T>>>18|x<<32-18)^(x>>>41-32|T<<32-(41-32)),A=(x>>>14|T<<32-14)^(x>>>18|T<<32-18)^(T>>>41-32|x<<32-(41-32)),X+=A&65535,G+=A>>>16,Y+=S&65535,se+=S>>>16,S=T&U^~T&E,A=x&z^~x&K,X+=A&65535,G+=A>>>16,Y+=S&65535,se+=S>>>16,S=a[ve*2],A=a[ve*2+1],X+=A&65535,G+=A>>>16,Y+=S&65535,se+=S>>>16,S=f[ve%16],A=g[ve%16],X+=A&65535,G+=A>>>16,Y+=S&65535,se+=S>>>16,G+=X>>>16,Y+=G>>>16,se+=Y>>>16,ie=Y&65535|se<<16,ee=X&65535|G<<16,S=ie,A=ee,X=A&65535,G=A>>>16,Y=S&65535,se=S>>>16,S=(L>>>28|b<<32-28)^(b>>>34-32|L<<32-(34-32))^(b>>>39-32|L<<32-(39-32)),A=(b>>>28|L<<32-28)^(L>>>34-32|b<<32-(34-32))^(L>>>39-32|b<<32-(39-32)),X+=A&65535,G+=A>>>16,Y+=S&65535,se+=S>>>16,S=L&k^L&W^k&W,A=b&c^b&y^c&y,X+=A&65535,G+=A>>>16,Y+=S&65535,se+=S>>>16,G+=X>>>16,Y+=G>>>16,se+=Y>>>16,O=Y&65535|se<<16,vt=X&65535|G<<16,S=H,A=Be,X=A&65535,G=A>>>16,Y=S&65535,se=S>>>16,S=ie,A=ee,X+=A&65535,G+=A>>>16,Y+=S&65535,se+=S>>>16,G+=X>>>16,Y+=G>>>16,se+=Y>>>16,H=Y&65535|se<<16,Be=X&65535|G<<16,k=_e,W=he,ae=be,T=H,U=q,E=N,C=h,L=O,c=ue,y=de,J=Ie,x=Be,z=ke,K=$e,Z=gt,b=vt,ve%16===15)for(var ce=0;ce<16;ce++)S=f[ce],A=g[ce],X=A&65535,G=A>>>16,Y=S&65535,se=S>>>16,S=f[(ce+9)%16],A=g[(ce+9)%16],X+=A&65535,G+=A>>>16,Y+=S&65535,se+=S>>>16,ie=f[(ce+1)%16],ee=g[(ce+1)%16],S=(ie>>>1|ee<<32-1)^(ie>>>8|ee<<32-8)^ie>>>7,A=(ee>>>1|ie<<32-1)^(ee>>>8|ie<<32-8)^(ee>>>7|ie<<32-7),X+=A&65535,G+=A>>>16,Y+=S&65535,se+=S>>>16,ie=f[(ce+14)%16],ee=g[(ce+14)%16],S=(ie>>>19|ee<<32-19)^(ee>>>61-32|ie<<32-(61-32))^ie>>>6,A=(ee>>>19|ie<<32-19)^(ie>>>61-32|ee<<32-(61-32))^(ee>>>6|ie<<32-6),X+=A&65535,G+=A>>>16,Y+=S&65535,se+=S>>>16,G+=X>>>16,Y+=G>>>16,se+=Y>>>16,f[ce]=Y&65535|se<<16,g[ce]=X&65535|G<<16}S=L,A=b,X=A&65535,G=A>>>16,Y=S&65535,se=S>>>16,S=w[0],A=I[0],X+=A&65535,G+=A>>>16,Y+=S&65535,se+=S>>>16,G+=X>>>16,Y+=G>>>16,se+=Y>>>16,w[0]=L=Y&65535|se<<16,I[0]=b=X&65535|G<<16,S=k,A=c,X=A&65535,G=A>>>16,Y=S&65535,se=S>>>16,S=w[1],A=I[1],X+=A&65535,G+=A>>>16,Y+=S&65535,se+=S>>>16,G+=X>>>16,Y+=G>>>16,se+=Y>>>16,w[1]=k=Y&65535|se<<16,I[1]=c=X&65535|G<<16,S=W,A=y,X=A&65535,G=A>>>16,Y=S&65535,se=S>>>16,S=w[2],A=I[2],X+=A&65535,G+=A>>>16,Y+=S&65535,se+=S>>>16,G+=X>>>16,Y+=G>>>16,se+=Y>>>16,w[2]=W=Y&65535|se<<16,I[2]=y=X&65535|G<<16,S=ae,A=J,X=A&65535,G=A>>>16,Y=S&65535,se=S>>>16,S=w[3],A=I[3],X+=A&65535,G+=A>>>16,Y+=S&65535,se+=S>>>16,G+=X>>>16,Y+=G>>>16,se+=Y>>>16,w[3]=ae=Y&65535|se<<16,I[3]=J=X&65535|G<<16,S=T,A=x,X=A&65535,G=A>>>16,Y=S&65535,se=S>>>16,S=w[4],A=I[4],X+=A&65535,G+=A>>>16,Y+=S&65535,se+=S>>>16,G+=X>>>16,Y+=G>>>16,se+=Y>>>16,w[4]=T=Y&65535|se<<16,I[4]=x=X&65535|G<<16,S=U,A=z,X=A&65535,G=A>>>16,Y=S&65535,se=S>>>16,S=w[5],A=I[5],X+=A&65535,G+=A>>>16,Y+=S&65535,se+=S>>>16,G+=X>>>16,Y+=G>>>16,se+=Y>>>16,w[5]=U=Y&65535|se<<16,I[5]=z=X&65535|G<<16,S=E,A=K,X=A&65535,G=A>>>16,Y=S&65535,se=S>>>16,S=w[6],A=I[6],X+=A&65535,G+=A>>>16,Y+=S&65535,se+=S>>>16,G+=X>>>16,Y+=G>>>16,se+=Y>>>16,w[6]=E=Y&65535|se<<16,I[6]=K=X&65535|G<<16,S=C,A=Z,X=A&65535,G=A>>>16,Y=S&65535,se=S>>>16,S=w[7],A=I[7],X+=A&65535,G+=A>>>16,Y+=S&65535,se+=S>>>16,G+=X>>>16,Y+=G>>>16,se+=Y>>>16,w[7]=C=Y&65535|se<<16,I[7]=Z=X&65535|G<<16,B+=128,F-=128}return B}function p(f){var g=new s;g.update(f);var w=g.digest();return g.clean(),w}n.hash=p})(cp);(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.convertSecretKeyToX25519=n.convertPublicKeyToX25519=n.verify=n.sign=n.extractPublicKeyFromSecretKey=n.generateKeyPair=n.generateKeyPairFromSeed=n.SEED_LENGTH=n.SECRET_KEY_LENGTH=n.PUBLIC_KEY_LENGTH=n.SIGNATURE_LENGTH=void 0;const e=Rn,r=cp,s=Or;n.SIGNATURE_LENGTH=64,n.PUBLIC_KEY_LENGTH=32,n.SECRET_KEY_LENGTH=64,n.SEED_LENGTH=32;function a(H){const q=new Float64Array(16);if(H)for(let N=0;N<H.length;N++)q[N]=H[N];return q}const l=new Uint8Array(32);l[0]=9;const p=a(),f=a([1]),g=a([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),w=a([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),I=a([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),R=a([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),B=a([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function F(H,q){for(let N=0;N<16;N++)H[N]=q[N]|0}function L(H){let q=1;for(let N=0;N<16;N++){let h=H[N]+q+65535;q=Math.floor(h/65536),H[N]=h-q*65536}H[0]+=q-1+37*(q-1)}function k(H,q,N){const h=~(N-1);for(let O=0;O<16;O++){const ue=h&(H[O]^q[O]);H[O]^=ue,q[O]^=ue}}function W(H,q){const N=a(),h=a();for(let O=0;O<16;O++)h[O]=q[O];L(h),L(h),L(h);for(let O=0;O<2;O++){N[0]=h[0]-65517;for(let de=1;de<15;de++)N[de]=h[de]-65535-(N[de-1]>>16&1),N[de-1]&=65535;N[15]=h[15]-32767-(N[14]>>16&1);const ue=N[15]>>16&1;N[14]&=65535,k(h,N,1-ue)}for(let O=0;O<16;O++)H[2*O]=h[O]&255,H[2*O+1]=h[O]>>8}function ae(H,q){let N=0;for(let h=0;h<32;h++)N|=H[h]^q[h];return(1&N-1>>>8)-1}function T(H,q){const N=new Uint8Array(32),h=new Uint8Array(32);return W(N,H),W(h,q),ae(N,h)}function U(H){const q=new Uint8Array(32);return W(q,H),q[0]&1}function E(H,q){for(let N=0;N<16;N++)H[N]=q[2*N]+(q[2*N+1]<<8);H[15]&=32767}function C(H,q,N){for(let h=0;h<16;h++)H[h]=q[h]+N[h]}function b(H,q,N){for(let h=0;h<16;h++)H[h]=q[h]-N[h]}function c(H,q,N){let h,O,ue=0,de=0,Ie=0,Be=0,ke=0,$e=0,gt=0,vt=0,je=0,xe=0,Re=0,Fe=0,ze=0,Ce=0,Le=0,Se=0,Ae=0,He=0,Oe=0,Ve=0,Ge=0,et=0,tt=0,Je=0,tr=0,fr=0,Gr=0,rr=0,ni=0,mi=0,Ui=0,Et=N[0],yt=N[1],Dt=N[2],St=N[3],mt=N[4],_t=N[5],Ut=N[6],$t=N[7],It=N[8],Mt=N[9],xt=N[10],Pt=N[11],Ot=N[12],lt=N[13],jt=N[14],zt=N[15];h=q[0],ue+=h*Et,de+=h*yt,Ie+=h*Dt,Be+=h*St,ke+=h*mt,$e+=h*_t,gt+=h*Ut,vt+=h*$t,je+=h*It,xe+=h*Mt,Re+=h*xt,Fe+=h*Pt,ze+=h*Ot,Ce+=h*lt,Le+=h*jt,Se+=h*zt,h=q[1],de+=h*Et,Ie+=h*yt,Be+=h*Dt,ke+=h*St,$e+=h*mt,gt+=h*_t,vt+=h*Ut,je+=h*$t,xe+=h*It,Re+=h*Mt,Fe+=h*xt,ze+=h*Pt,Ce+=h*Ot,Le+=h*lt,Se+=h*jt,Ae+=h*zt,h=q[2],Ie+=h*Et,Be+=h*yt,ke+=h*Dt,$e+=h*St,gt+=h*mt,vt+=h*_t,je+=h*Ut,xe+=h*$t,Re+=h*It,Fe+=h*Mt,ze+=h*xt,Ce+=h*Pt,Le+=h*Ot,Se+=h*lt,Ae+=h*jt,He+=h*zt,h=q[3],Be+=h*Et,ke+=h*yt,$e+=h*Dt,gt+=h*St,vt+=h*mt,je+=h*_t,xe+=h*Ut,Re+=h*$t,Fe+=h*It,ze+=h*Mt,Ce+=h*xt,Le+=h*Pt,Se+=h*Ot,Ae+=h*lt,He+=h*jt,Oe+=h*zt,h=q[4],ke+=h*Et,$e+=h*yt,gt+=h*Dt,vt+=h*St,je+=h*mt,xe+=h*_t,Re+=h*Ut,Fe+=h*$t,ze+=h*It,Ce+=h*Mt,Le+=h*xt,Se+=h*Pt,Ae+=h*Ot,He+=h*lt,Oe+=h*jt,Ve+=h*zt,h=q[5],$e+=h*Et,gt+=h*yt,vt+=h*Dt,je+=h*St,xe+=h*mt,Re+=h*_t,Fe+=h*Ut,ze+=h*$t,Ce+=h*It,Le+=h*Mt,Se+=h*xt,Ae+=h*Pt,He+=h*Ot,Oe+=h*lt,Ve+=h*jt,Ge+=h*zt,h=q[6],gt+=h*Et,vt+=h*yt,je+=h*Dt,xe+=h*St,Re+=h*mt,Fe+=h*_t,ze+=h*Ut,Ce+=h*$t,Le+=h*It,Se+=h*Mt,Ae+=h*xt,He+=h*Pt,Oe+=h*Ot,Ve+=h*lt,Ge+=h*jt,et+=h*zt,h=q[7],vt+=h*Et,je+=h*yt,xe+=h*Dt,Re+=h*St,Fe+=h*mt,ze+=h*_t,Ce+=h*Ut,Le+=h*$t,Se+=h*It,Ae+=h*Mt,He+=h*xt,Oe+=h*Pt,Ve+=h*Ot,Ge+=h*lt,et+=h*jt,tt+=h*zt,h=q[8],je+=h*Et,xe+=h*yt,Re+=h*Dt,Fe+=h*St,ze+=h*mt,Ce+=h*_t,Le+=h*Ut,Se+=h*$t,Ae+=h*It,He+=h*Mt,Oe+=h*xt,Ve+=h*Pt,Ge+=h*Ot,et+=h*lt,tt+=h*jt,Je+=h*zt,h=q[9],xe+=h*Et,Re+=h*yt,Fe+=h*Dt,ze+=h*St,Ce+=h*mt,Le+=h*_t,Se+=h*Ut,Ae+=h*$t,He+=h*It,Oe+=h*Mt,Ve+=h*xt,Ge+=h*Pt,et+=h*Ot,tt+=h*lt,Je+=h*jt,tr+=h*zt,h=q[10],Re+=h*Et,Fe+=h*yt,ze+=h*Dt,Ce+=h*St,Le+=h*mt,Se+=h*_t,Ae+=h*Ut,He+=h*$t,Oe+=h*It,Ve+=h*Mt,Ge+=h*xt,et+=h*Pt,tt+=h*Ot,Je+=h*lt,tr+=h*jt,fr+=h*zt,h=q[11],Fe+=h*Et,ze+=h*yt,Ce+=h*Dt,Le+=h*St,Se+=h*mt,Ae+=h*_t,He+=h*Ut,Oe+=h*$t,Ve+=h*It,Ge+=h*Mt,et+=h*xt,tt+=h*Pt,Je+=h*Ot,tr+=h*lt,fr+=h*jt,Gr+=h*zt,h=q[12],ze+=h*Et,Ce+=h*yt,Le+=h*Dt,Se+=h*St,Ae+=h*mt,He+=h*_t,Oe+=h*Ut,Ve+=h*$t,Ge+=h*It,et+=h*Mt,tt+=h*xt,Je+=h*Pt,tr+=h*Ot,fr+=h*lt,Gr+=h*jt,rr+=h*zt,h=q[13],Ce+=h*Et,Le+=h*yt,Se+=h*Dt,Ae+=h*St,He+=h*mt,Oe+=h*_t,Ve+=h*Ut,Ge+=h*$t,et+=h*It,tt+=h*Mt,Je+=h*xt,tr+=h*Pt,fr+=h*Ot,Gr+=h*lt,rr+=h*jt,ni+=h*zt,h=q[14],Le+=h*Et,Se+=h*yt,Ae+=h*Dt,He+=h*St,Oe+=h*mt,Ve+=h*_t,Ge+=h*Ut,et+=h*$t,tt+=h*It,Je+=h*Mt,tr+=h*xt,fr+=h*Pt,Gr+=h*Ot,rr+=h*lt,ni+=h*jt,mi+=h*zt,h=q[15],Se+=h*Et,Ae+=h*yt,He+=h*Dt,Oe+=h*St,Ve+=h*mt,Ge+=h*_t,et+=h*Ut,tt+=h*$t,Je+=h*It,tr+=h*Mt,fr+=h*xt,Gr+=h*Pt,rr+=h*Ot,ni+=h*lt,mi+=h*jt,Ui+=h*zt,ue+=38*Ae,de+=38*He,Ie+=38*Oe,Be+=38*Ve,ke+=38*Ge,$e+=38*et,gt+=38*tt,vt+=38*Je,je+=38*tr,xe+=38*fr,Re+=38*Gr,Fe+=38*rr,ze+=38*ni,Ce+=38*mi,Le+=38*Ui,O=1,h=ue+O+65535,O=Math.floor(h/65536),ue=h-O*65536,h=de+O+65535,O=Math.floor(h/65536),de=h-O*65536,h=Ie+O+65535,O=Math.floor(h/65536),Ie=h-O*65536,h=Be+O+65535,O=Math.floor(h/65536),Be=h-O*65536,h=ke+O+65535,O=Math.floor(h/65536),ke=h-O*65536,h=$e+O+65535,O=Math.floor(h/65536),$e=h-O*65536,h=gt+O+65535,O=Math.floor(h/65536),gt=h-O*65536,h=vt+O+65535,O=Math.floor(h/65536),vt=h-O*65536,h=je+O+65535,O=Math.floor(h/65536),je=h-O*65536,h=xe+O+65535,O=Math.floor(h/65536),xe=h-O*65536,h=Re+O+65535,O=Math.floor(h/65536),Re=h-O*65536,h=Fe+O+65535,O=Math.floor(h/65536),Fe=h-O*65536,h=ze+O+65535,O=Math.floor(h/65536),ze=h-O*65536,h=Ce+O+65535,O=Math.floor(h/65536),Ce=h-O*65536,h=Le+O+65535,O=Math.floor(h/65536),Le=h-O*65536,h=Se+O+65535,O=Math.floor(h/65536),Se=h-O*65536,ue+=O-1+37*(O-1),O=1,h=ue+O+65535,O=Math.floor(h/65536),ue=h-O*65536,h=de+O+65535,O=Math.floor(h/65536),de=h-O*65536,h=Ie+O+65535,O=Math.floor(h/65536),Ie=h-O*65536,h=Be+O+65535,O=Math.floor(h/65536),Be=h-O*65536,h=ke+O+65535,O=Math.floor(h/65536),ke=h-O*65536,h=$e+O+65535,O=Math.floor(h/65536),$e=h-O*65536,h=gt+O+65535,O=Math.floor(h/65536),gt=h-O*65536,h=vt+O+65535,O=Math.floor(h/65536),vt=h-O*65536,h=je+O+65535,O=Math.floor(h/65536),je=h-O*65536,h=xe+O+65535,O=Math.floor(h/65536),xe=h-O*65536,h=Re+O+65535,O=Math.floor(h/65536),Re=h-O*65536,h=Fe+O+65535,O=Math.floor(h/65536),Fe=h-O*65536,h=ze+O+65535,O=Math.floor(h/65536),ze=h-O*65536,h=Ce+O+65535,O=Math.floor(h/65536),Ce=h-O*65536,h=Le+O+65535,O=Math.floor(h/65536),Le=h-O*65536,h=Se+O+65535,O=Math.floor(h/65536),Se=h-O*65536,ue+=O-1+37*(O-1),H[0]=ue,H[1]=de,H[2]=Ie,H[3]=Be,H[4]=ke,H[5]=$e,H[6]=gt,H[7]=vt,H[8]=je,H[9]=xe,H[10]=Re,H[11]=Fe,H[12]=ze,H[13]=Ce,H[14]=Le,H[15]=Se}function y(H,q){c(H,q,q)}function J(H,q){const N=a();let h;for(h=0;h<16;h++)N[h]=q[h];for(h=253;h>=0;h--)y(N,N),h!==2&&h!==4&&c(N,N,q);for(h=0;h<16;h++)H[h]=N[h]}function x(H,q){const N=a();let h;for(h=0;h<16;h++)N[h]=q[h];for(h=250;h>=0;h--)y(N,N),h!==1&&c(N,N,q);for(h=0;h<16;h++)H[h]=N[h]}function z(H,q){const N=a(),h=a(),O=a(),ue=a(),de=a(),Ie=a(),Be=a(),ke=a(),$e=a();b(N,H[1],H[0]),b($e,q[1],q[0]),c(N,N,$e),C(h,H[0],H[1]),C($e,q[0],q[1]),c(h,h,$e),c(O,H[3],q[3]),c(O,O,w),c(ue,H[2],q[2]),C(ue,ue,ue),b(de,h,N),b(Ie,ue,O),C(Be,ue,O),C(ke,h,N),c(H[0],de,Ie),c(H[1],ke,Be),c(H[2],Be,Ie),c(H[3],de,ke)}function K(H,q,N){for(let h=0;h<4;h++)k(H[h],q[h],N)}function Z(H,q){const N=a(),h=a(),O=a();J(O,q[2]),c(N,q[0],O),c(h,q[1],O),W(H,h),H[31]^=U(N)<<7}function S(H,q,N){F(H[0],p),F(H[1],f),F(H[2],f),F(H[3],p);for(let h=255;h>=0;--h){const O=N[h/8|0]>>(h&7)&1;K(H,q,O),z(q,H),z(H,H),K(H,q,O)}}function A(H,q){const N=[a(),a(),a(),a()];F(N[0],I),F(N[1],R),F(N[2],f),c(N[3],I,R),S(H,N,q)}function ie(H){if(H.length!==n.SEED_LENGTH)throw new Error(`ed25519: seed must be ${n.SEED_LENGTH} bytes`);const q=(0,r.hash)(H);q[0]&=248,q[31]&=127,q[31]|=64;const N=new Uint8Array(32),h=[a(),a(),a(),a()];A(h,q),Z(N,h);const O=new Uint8Array(64);return O.set(H),O.set(N,32),{publicKey:N,secretKey:O}}n.generateKeyPairFromSeed=ie;function ee(H){const q=(0,e.randomBytes)(32,H),N=ie(q);return(0,s.wipe)(q),N}n.generateKeyPair=ee;function X(H){if(H.length!==n.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${n.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(H.subarray(32))}n.extractPublicKeyFromSecretKey=X;const G=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function Y(H,q){let N,h,O,ue;for(h=63;h>=32;--h){for(N=0,O=h-32,ue=h-12;O<ue;++O)q[O]+=N-16*q[h]*G[O-(h-32)],N=Math.floor((q[O]+128)/256),q[O]-=N*256;q[O]+=N,q[h]=0}for(N=0,O=0;O<32;O++)q[O]+=N-(q[31]>>4)*G[O],N=q[O]>>8,q[O]&=255;for(O=0;O<32;O++)q[O]-=N*G[O];for(h=0;h<32;h++)q[h+1]+=q[h]>>8,H[h]=q[h]&255}function se(H){const q=new Float64Array(64);for(let N=0;N<64;N++)q[N]=H[N];for(let N=0;N<64;N++)H[N]=0;Y(H,q)}function ve(H,q){const N=new Float64Array(64),h=[a(),a(),a(),a()],O=(0,r.hash)(H.subarray(0,32));O[0]&=248,O[31]&=127,O[31]|=64;const ue=new Uint8Array(64);ue.set(O.subarray(32),32);const de=new r.SHA512;de.update(ue.subarray(32)),de.update(q);const Ie=de.digest();de.clean(),se(Ie),A(h,Ie),Z(ue,h),de.reset(),de.update(ue.subarray(0,32)),de.update(H.subarray(32)),de.update(q);const Be=de.digest();se(Be);for(let ke=0;ke<32;ke++)N[ke]=Ie[ke];for(let ke=0;ke<32;ke++)for(let $e=0;$e<32;$e++)N[ke+$e]+=Be[ke]*O[$e];return Y(ue.subarray(32),N),ue}n.sign=ve;function ce(H,q){const N=a(),h=a(),O=a(),ue=a(),de=a(),Ie=a(),Be=a();return F(H[2],f),E(H[1],q),y(O,H[1]),c(ue,O,g),b(O,O,H[2]),C(ue,H[2],ue),y(de,ue),y(Ie,de),c(Be,Ie,de),c(N,Be,O),c(N,N,ue),x(N,N),c(N,N,O),c(N,N,ue),c(N,N,ue),c(H[0],N,ue),y(h,H[0]),c(h,h,ue),T(h,O)&&c(H[0],H[0],B),y(h,H[0]),c(h,h,ue),T(h,O)?-1:(U(H[0])===q[31]>>7&&b(H[0],p,H[0]),c(H[3],H[0],H[1]),0)}function _e(H,q,N){const h=new Uint8Array(32),O=[a(),a(),a(),a()],ue=[a(),a(),a(),a()];if(N.length!==n.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${n.SIGNATURE_LENGTH} bytes`);if(ce(ue,H))return!1;const de=new r.SHA512;de.update(N.subarray(0,32)),de.update(H),de.update(q);const Ie=de.digest();return se(Ie),S(O,ue,Ie),A(ue,N.subarray(32)),z(O,ue),Z(h,O),!ae(N,h)}n.verify=_e;function he(H){let q=[a(),a(),a(),a()];if(ce(q,H))throw new Error("Ed25519: invalid public key");let N=a(),h=a(),O=q[1];C(N,f,O),b(h,f,O),J(h,h),c(N,N,h);let ue=new Uint8Array(32);return W(ue,N),ue}n.convertPublicKeyToX25519=he;function be(H){const q=(0,r.hash)(H.subarray(0,32));q[0]&=248,q[31]&=127,q[31]|=64;const N=new Uint8Array(q.subarray(0,32));return(0,s.wipe)(q),N}n.convertSecretKeyToX25519=be})(Su);const L3="EdDSA",U3="JWT",up=".",hp="base64url",$3="utf8",M3="utf8",j3=":",z3="did",q3="key",Of="base58btc",B3="z",H3="K36",K3=32;function Mo(n){return lr(br(gs(n),$3),hp)}function lp(n){const e=br(H3,Of),r=B3+lr(Yc([e,n]),Of);return[z3,q3,r].join(j3)}function k3(n){return lr(n,hp)}function V3(n){return br([Mo(n.header),Mo(n.payload)].join(up),M3)}function W3(n){return[Mo(n.header),Mo(n.payload),k3(n.signature)].join(up)}function Cf(n=Rn.randomBytes(K3)){return Su.generateKeyPairFromSeed(n)}async function G3(n,e,r,s,a=me.fromMiliseconds(Date.now())){const l={alg:L3,typ:U3},p=lp(s.publicKey),f=a+r,g={iss:p,sub:n,aud:e,iat:a,exp:f},w=V3({header:l,payload:g}),I=Su.sign(s.secretKey,w);return W3({header:l,payload:g,signature:I})}const Y3="PARSE_ERROR",J3="INVALID_REQUEST",X3="METHOD_NOT_FOUND",Q3="INVALID_PARAMS",fp="INTERNAL_ERROR",Iu="SERVER_ERROR",Z3=[-32700,-32600,-32601,-32602,-32603],ds={[Y3]:{code:-32700,message:"Parse error"},[J3]:{code:-32600,message:"Invalid Request"},[X3]:{code:-32601,message:"Method not found"},[Q3]:{code:-32602,message:"Invalid params"},[fp]:{code:-32603,message:"Internal error"},[Iu]:{code:-32e3,message:"Server error"}},dp=Iu;function e6(n){return Z3.includes(n)}function Af(n){return Object.keys(ds).includes(n)?ds[n]:ds[dp]}function t6(n){const e=Object.values(ds).find(r=>r.code===n);return e||ds[dp]}function pp(n,e,r){return n.message.includes("getaddrinfo ENOTFOUND")||n.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${e}`):n}var gp={},vi={},Pf;function r6(){if(Pf)return vi;Pf=1,Object.defineProperty(vi,"__esModule",{value:!0}),vi.isBrowserCryptoAvailable=vi.getSubtleCrypto=vi.getBrowerCrypto=void 0;function n(){return(cr===null||cr===void 0?void 0:cr.crypto)||(cr===null||cr===void 0?void 0:cr.msCrypto)||{}}vi.getBrowerCrypto=n;function e(){const s=n();return s.subtle||s.webkitSubtle}vi.getSubtleCrypto=e;function r(){return!!n()&&!!e()}return vi.isBrowserCryptoAvailable=r,vi}var yi={},Tf;function i6(){if(Tf)return yi;Tf=1,Object.defineProperty(yi,"__esModule",{value:!0}),yi.isBrowser=yi.isNode=yi.isReactNative=void 0;function n(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}yi.isReactNative=n;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}yi.isNode=e;function r(){return!n()&&!e()}return yi.isBrowser=r,yi}(function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=zr;e.__exportStar(r6(),n),e.__exportStar(i6(),n)})(gp);function vp(n=3){const e=Date.now()*Math.pow(10,n),r=Math.floor(Math.random()*Math.pow(10,n));return e+r}function xu(n=6){return BigInt(vp(n))}function Go(n,e,r){return{id:r||vp(),jsonrpc:"2.0",method:n,params:e}}function Ou(n,e){return{id:n,jsonrpc:"2.0",result:e}}function Yo(n,e,r){return{id:n,jsonrpc:"2.0",error:n6(e,r)}}function n6(n,e){return typeof n>"u"?Af(fp):(typeof n=="string"&&(n=Object.assign(Object.assign({},Af(Iu)),{message:n})),typeof e<"u"&&(n.data=e),e6(n.code)&&(n=t6(n.code)),n)}class s6{}class o6 extends s6{constructor(){super()}}class a6 extends o6{constructor(e){super()}}const c6="^https?:",u6="^wss?:";function h6(n){const e=n.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function yp(n,e){const r=h6(n);return typeof r>"u"?!1:new RegExp(e).test(r)}function Nf(n){return yp(n,c6)}function Rf(n){return yp(n,u6)}function l6(n){return new RegExp("wss?://localhost(:d{2,5})?").test(n)}function _p(n){return typeof n=="object"&&"id"in n&&"jsonrpc"in n&&n.jsonrpc==="2.0"}function Cu(n){return _p(n)&&"method"in n}function Jo(n){return _p(n)&&(_i(n)||Wr(n))}function _i(n){return"result"in n}function Wr(n){return"error"in n}class Fi extends a6{constructor(e){super(e),this.events=new xr.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async request(e,r){return this.requestStrict(Go(e.method,e.params||[],e.id||xu().toString()),r)}async requestStrict(e,r){return new Promise(async(s,a)=>{if(!this.connection.connected)try{await this.open()}catch(l){a(l)}this.events.on(`${e.id}`,l=>{Wr(l)?a(l.error):s(l.result)});try{await this.connection.send(e,r)}catch(l){a(l)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),Jo(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}}const Ff=10,f6=()=>typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:require("ws"),d6=()=>typeof window<"u",p6=f6();class g6{constructor(e){if(this.url=e,this.events=new xr.EventEmitter,this.registering=!1,!Rf(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=s=>{this.onClose(s),e()},this.socket.close()})}async send(e,r){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(gs(e))}catch(s){this.onError(e.id,s)}}register(e=this.url){if(!Rf(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((s,a)=>{this.events.once("register_error",l=>{this.resetMaxListeners(),a(l)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return a(new Error("WebSocket connection is missing or invalid"));s(this.socket)})})}return this.url=e,this.registering=!0,new Promise((r,s)=>{const a=gp.isReactNative()?void 0:{rejectUnauthorized:!l6(e)},l=new p6(e,[],a);d6()?l.onerror=p=>{const f=p;s(this.emitError(f.error))}:l.on("error",p=>{s(this.emitError(p))}),l.onopen=()=>{this.onOpen(l),r(l)}})}onOpen(e){e.onmessage=r=>this.onPayload(r),e.onclose=r=>this.onClose(r),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?Du(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const s=this.parseError(r),a=s.message||s.toString(),l=Yo(e,a);this.events.emit("payload",l)}parseError(e,r=this.url){return pp(e,r,"WS")}resetMaxListeners(){this.events.getMaxListeners()>Ff&&this.events.setMaxListeners(Ff)}emitError(e){const r=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for URL: ${this.url}`));return this.events.emit("register_error",r),r}}var jo={exports:{}};jo.exports;(function(n,e){var r=200,s="__lodash_hash_undefined__",a=1,l=2,p=9007199254740991,f="[object Arguments]",g="[object Array]",w="[object AsyncFunction]",I="[object Boolean]",R="[object Date]",B="[object Error]",F="[object Function]",L="[object GeneratorFunction]",k="[object Map]",W="[object Number]",ae="[object Null]",T="[object Object]",U="[object Promise]",E="[object Proxy]",C="[object RegExp]",b="[object Set]",c="[object String]",y="[object Symbol]",J="[object Undefined]",x="[object WeakMap]",z="[object ArrayBuffer]",K="[object DataView]",Z="[object Float32Array]",S="[object Float64Array]",A="[object Int8Array]",ie="[object Int16Array]",ee="[object Int32Array]",X="[object Uint8Array]",G="[object Uint8ClampedArray]",Y="[object Uint16Array]",se="[object Uint32Array]",ve=/[\\^$.*+?()[\]{}|]/g,ce=/^\[object .+?Constructor\]$/,_e=/^(?:0|[1-9]\d*)$/,he={};he[Z]=he[S]=he[A]=he[ie]=he[ee]=he[X]=he[G]=he[Y]=he[se]=!0,he[f]=he[g]=he[z]=he[I]=he[K]=he[R]=he[B]=he[F]=he[k]=he[W]=he[T]=he[C]=he[b]=he[c]=he[x]=!1;var be=typeof cr=="object"&&cr&&cr.Object===Object&&cr,H=typeof self=="object"&&self&&self.Object===Object&&self,q=be||H||Function("return this")(),N=e&&!e.nodeType&&e,h=N&&!0&&n&&!n.nodeType&&n,O=h&&h.exports===N,ue=O&&be.process,de=function(){try{return ue&&ue.binding&&ue.binding("util")}catch{}}(),Ie=de&&de.isTypedArray;function Be(m,$){for(var ne=-1,pe=m==null?0:m.length,ct=0,Te=[];++ne<pe;){var dt=m[ne];$(dt,ne,m)&&(Te[ct++]=dt)}return Te}function ke(m,$){for(var ne=-1,pe=$.length,ct=m.length;++ne<pe;)m[ct+ne]=$[ne];return m}function $e(m,$){for(var ne=-1,pe=m==null?0:m.length;++ne<pe;)if($(m[ne],ne,m))return!0;return!1}function gt(m,$){for(var ne=-1,pe=Array(m);++ne<m;)pe[ne]=$(ne);return pe}function vt(m){return function($){return m($)}}function je(m,$){return m.has($)}function xe(m,$){return m==null?void 0:m[$]}function Re(m){var $=-1,ne=Array(m.size);return m.forEach(function(pe,ct){ne[++$]=[ct,pe]}),ne}function Fe(m,$){return function(ne){return m($(ne))}}function ze(m){var $=-1,ne=Array(m.size);return m.forEach(function(pe){ne[++$]=pe}),ne}var Ce=Array.prototype,Le=Function.prototype,Se=Object.prototype,Ae=q["__core-js_shared__"],He=Le.toString,Oe=Se.hasOwnProperty,Ve=function(){var m=/[^.]+$/.exec(Ae&&Ae.keys&&Ae.keys.IE_PROTO||"");return m?"Symbol(src)_1."+m:""}(),Ge=Se.toString,et=RegExp("^"+He.call(Oe).replace(ve,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tt=O?q.Buffer:void 0,Je=q.Symbol,tr=q.Uint8Array,fr=Se.propertyIsEnumerable,Gr=Ce.splice,rr=Je?Je.toStringTag:void 0,ni=Object.getOwnPropertySymbols,mi=tt?tt.isBuffer:void 0,Ui=Fe(Object.keys,Object),Et=mr(q,"DataView"),yt=mr(q,"Map"),Dt=mr(q,"Promise"),St=mr(q,"Set"),mt=mr(q,"WeakMap"),_t=mr(Object,"create"),Ut=oi(Et),$t=oi(yt),It=oi(Dt),Mt=oi(St),xt=oi(mt),Pt=Je?Je.prototype:void 0,Ot=Pt?Pt.valueOf:void 0;function lt(m){var $=-1,ne=m==null?0:m.length;for(this.clear();++$<ne;){var pe=m[$];this.set(pe[0],pe[1])}}function jt(){this.__data__=_t?_t(null):{},this.size=0}function zt(m){var $=this.has(m)&&delete this.__data__[m];return this.size-=$?1:0,$}function Zo(m){var $=this.__data__;if(_t){var ne=$[m];return ne===s?void 0:ne}return Oe.call($,m)?$[m]:void 0}function ea(m){var $=this.__data__;return _t?$[m]!==void 0:Oe.call($,m)}function ta(m,$){var ne=this.__data__;return this.size+=this.has(m)?0:1,ne[m]=_t&&$===void 0?s:$,this}lt.prototype.clear=jt,lt.prototype.delete=zt,lt.prototype.get=Zo,lt.prototype.has=ea,lt.prototype.set=ta;function Cr(m){var $=-1,ne=m==null?0:m.length;for(this.clear();++$<ne;){var pe=m[$];this.set(pe[0],pe[1])}}function ra(){this.__data__=[],this.size=0}function ia(m){var $=this.__data__,ne=$i($,m);if(ne<0)return!1;var pe=$.length-1;return ne==pe?$.pop():Gr.call($,ne,1),--this.size,!0}function na(m){var $=this.__data__,ne=$i($,m);return ne<0?void 0:$[ne][1]}function sa(m){return $i(this.__data__,m)>-1}function oa(m,$){var ne=this.__data__,pe=$i(ne,m);return pe<0?(++this.size,ne.push([m,$])):ne[pe][1]=$,this}Cr.prototype.clear=ra,Cr.prototype.delete=ia,Cr.prototype.get=na,Cr.prototype.has=sa,Cr.prototype.set=oa;function si(m){var $=-1,ne=m==null?0:m.length;for(this.clear();++$<ne;){var pe=m[$];this.set(pe[0],pe[1])}}function an(){this.size=0,this.__data__={hash:new lt,map:new(yt||Cr),string:new lt}}function aa(m){var $=wi(this,m).delete(m);return this.size-=$?1:0,$}function cn(m){return wi(this,m).get(m)}function ca(m){return wi(this,m).has(m)}function ua(m,$){var ne=wi(this,m),pe=ne.size;return ne.set(m,$),this.size+=ne.size==pe?0:1,this}si.prototype.clear=an,si.prototype.delete=aa,si.prototype.get=cn,si.prototype.has=ca,si.prototype.set=ua;function un(m){var $=-1,ne=m==null?0:m.length;for(this.__data__=new si;++$<ne;)this.add(m[$])}function Es(m){return this.__data__.set(m,s),this}function Ds(m){return this.__data__.has(m)}un.prototype.add=un.prototype.push=Es,un.prototype.has=Ds;function qr(m){var $=this.__data__=new Cr(m);this.size=$.size}function ha(){this.__data__=new Cr,this.size=0}function la(m){var $=this.__data__,ne=$.delete(m);return this.size=$.size,ne}function fa(m){return this.__data__.get(m)}function da(m){return this.__data__.has(m)}function Ss(m,$){var ne=this.__data__;if(ne instanceof Cr){var pe=ne.__data__;if(!yt||pe.length<r-1)return pe.push([m,$]),this.size=++ne.size,this;ne=this.__data__=new si(pe)}return ne.set(m,$),this.size=ne.size,this}qr.prototype.clear=ha,qr.prototype.delete=la,qr.prototype.get=fa,qr.prototype.has=da,qr.prototype.set=Ss;function Is(m,$){var ne=fn(m),pe=!ne&&$s(m),ct=!ne&&!pe&&Mn(m),Te=!ne&&!pe&&!ct&&zs(m),dt=ne||pe||ct||Te,qt=dt?gt(m.length,String):[],Xe=qt.length;for(var ut in m)($||Oe.call(m,ut))&&!(dt&&(ut=="length"||ct&&(ut=="offset"||ut=="parent")||Te&&(ut=="buffer"||ut=="byteLength"||ut=="byteOffset")||Ns(ut,Xe)))&&qt.push(ut);return qt}function $i(m,$){for(var ne=m.length;ne--;)if(Us(m[ne][0],$))return ne;return-1}function Un(m,$,ne){var pe=$(m);return fn(m)?pe:ke(pe,ne(m))}function Mi(m){return m==null?m===void 0?J:ae:rr&&rr in Object(m)?Ps(m):va(m)}function $n(m){return zi(m)&&Mi(m)==f}function ji(m,$,ne,pe,ct){return m===$?!0:m==null||$==null||!zi(m)&&!zi($)?m!==m&&$!==$:xs(m,$,ne,pe,ji,ct)}function xs(m,$,ne,pe,ct,Te){var dt=fn(m),qt=fn($),Xe=dt?g:Yr(m),ut=qt?g:Yr($);Xe=Xe==f?T:Xe,ut=ut==f?T:ut;var Tt=Xe==T,dr=ut==T,Bt=Xe==ut;if(Bt&&Mn(m)){if(!Mn($))return!1;dt=!0,Tt=!1}if(Bt&&!Tt)return Te||(Te=new qr),dt||zs(m)?hn(m,$,ne,pe,ct,Te):ga(m,$,Xe,ne,pe,ct,Te);if(!(ne&a)){var pt=Tt&&Oe.call(m,"__wrapped__"),ir=dr&&Oe.call($,"__wrapped__");if(pt||ir){var Br=pt?m.value():m,Ar=ir?$.value():$;return Te||(Te=new qr),ct(Br,Ar,ne,pe,Te)}}return Bt?(Te||(Te=new qr),As(m,$,ne,pe,ct,Te)):!1}function pa(m){if(!js(m)||Fs(m))return!1;var $=dn(m)?et:ce;return $.test(oi(m))}function Os(m){return zi(m)&&Ms(m.length)&&!!he[Mi(m)]}function Cs(m){if(!Ls(m))return Ui(m);var $=[];for(var ne in Object(m))Oe.call(m,ne)&&ne!="constructor"&&$.push(ne);return $}function hn(m,$,ne,pe,ct,Te){var dt=ne&a,qt=m.length,Xe=$.length;if(qt!=Xe&&!(dt&&Xe>qt))return!1;var ut=Te.get(m);if(ut&&Te.get($))return ut==$;var Tt=-1,dr=!0,Bt=ne&l?new un:void 0;for(Te.set(m,$),Te.set($,m);++Tt<qt;){var pt=m[Tt],ir=$[Tt];if(pe)var Br=dt?pe(ir,pt,Tt,$,m,Te):pe(pt,ir,Tt,m,$,Te);if(Br!==void 0){if(Br)continue;dr=!1;break}if(Bt){if(!$e($,function(Ar,Jr){if(!je(Bt,Jr)&&(pt===Ar||ct(pt,Ar,ne,pe,Te)))return Bt.push(Jr)})){dr=!1;break}}else if(!(pt===ir||ct(pt,ir,ne,pe,Te))){dr=!1;break}}return Te.delete(m),Te.delete($),dr}function ga(m,$,ne,pe,ct,Te,dt){switch(ne){case K:if(m.byteLength!=$.byteLength||m.byteOffset!=$.byteOffset)return!1;m=m.buffer,$=$.buffer;case z:return!(m.byteLength!=$.byteLength||!Te(new tr(m),new tr($)));case I:case R:case W:return Us(+m,+$);case B:return m.name==$.name&&m.message==$.message;case C:case c:return m==$+"";case k:var qt=Re;case b:var Xe=pe&a;if(qt||(qt=ze),m.size!=$.size&&!Xe)return!1;var ut=dt.get(m);if(ut)return ut==$;pe|=l,dt.set(m,$);var Tt=hn(qt(m),qt($),pe,ct,Te,dt);return dt.delete(m),Tt;case y:if(Ot)return Ot.call(m)==Ot.call($)}return!1}function As(m,$,ne,pe,ct,Te){var dt=ne&a,qt=ln(m),Xe=qt.length,ut=ln($),Tt=ut.length;if(Xe!=Tt&&!dt)return!1;for(var dr=Xe;dr--;){var Bt=qt[dr];if(!(dt?Bt in $:Oe.call($,Bt)))return!1}var pt=Te.get(m);if(pt&&Te.get($))return pt==$;var ir=!0;Te.set(m,$),Te.set($,m);for(var Br=dt;++dr<Xe;){Bt=qt[dr];var Ar=m[Bt],Jr=$[Bt];if(pe)var jn=dt?pe(Jr,Ar,Bt,$,m,Te):pe(Ar,Jr,Bt,m,$,Te);if(!(jn===void 0?Ar===Jr||ct(Ar,Jr,ne,pe,Te):jn)){ir=!1;break}Br||(Br=Bt=="constructor")}if(ir&&!Br){var qi=m.constructor,Vt=$.constructor;qi!=Vt&&"constructor"in m&&"constructor"in $&&!(typeof qi=="function"&&qi instanceof qi&&typeof Vt=="function"&&Vt instanceof Vt)&&(ir=!1)}return Te.delete(m),Te.delete($),ir}function ln(m){return Un(m,ba,Ts)}function wi(m,$){var ne=m.__data__;return Rs($)?ne[typeof $=="string"?"string":"hash"]:ne.map}function mr(m,$){var ne=xe(m,$);return pa(ne)?ne:void 0}function Ps(m){var $=Oe.call(m,rr),ne=m[rr];try{m[rr]=void 0;var pe=!0}catch{}var ct=Ge.call(m);return pe&&($?m[rr]=ne:delete m[rr]),ct}var Ts=ni?function(m){return m==null?[]:(m=Object(m),Be(ni(m),function($){return fr.call(m,$)}))}:at,Yr=Mi;(Et&&Yr(new Et(new ArrayBuffer(1)))!=K||yt&&Yr(new yt)!=k||Dt&&Yr(Dt.resolve())!=U||St&&Yr(new St)!=b||mt&&Yr(new mt)!=x)&&(Yr=function(m){var $=Mi(m),ne=$==T?m.constructor:void 0,pe=ne?oi(ne):"";if(pe)switch(pe){case Ut:return K;case $t:return k;case It:return U;case Mt:return b;case xt:return x}return $});function Ns(m,$){return $=$??p,!!$&&(typeof m=="number"||_e.test(m))&&m>-1&&m%1==0&&m<$}function Rs(m){var $=typeof m;return $=="string"||$=="number"||$=="symbol"||$=="boolean"?m!=="__proto__":m===null}function Fs(m){return!!Ve&&Ve in m}function Ls(m){var $=m&&m.constructor,ne=typeof $=="function"&&$.prototype||Se;return m===ne}function va(m){return Ge.call(m)}function oi(m){if(m!=null){try{return He.call(m)}catch{}try{return m+""}catch{}}return""}function Us(m,$){return m===$||m!==m&&$!==$}var $s=$n(function(){return arguments}())?$n:function(m){return zi(m)&&Oe.call(m,"callee")&&!fr.call(m,"callee")},fn=Array.isArray;function ya(m){return m!=null&&Ms(m.length)&&!dn(m)}var Mn=mi||st;function _a(m,$){return ji(m,$)}function dn(m){if(!js(m))return!1;var $=Mi(m);return $==F||$==L||$==w||$==E}function Ms(m){return typeof m=="number"&&m>-1&&m%1==0&&m<=p}function js(m){var $=typeof m;return m!=null&&($=="object"||$=="function")}function zi(m){return m!=null&&typeof m=="object"}var zs=Ie?vt(Ie):Os;function ba(m){return ya(m)?Is(m):Cs(m)}function at(){return[]}function st(){return!1}n.exports=_a})(jo,jo.exports);var v6=jo.exports;const y6=cu(v6);function _6(n,e){if(n.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),s=0;s<r.length;s++)r[s]=255;for(var a=0;a<n.length;a++){var l=n.charAt(a),p=l.charCodeAt(0);if(r[p]!==255)throw new TypeError(l+" is ambiguous");r[p]=a}var f=n.length,g=n.charAt(0),w=Math.log(f)/Math.log(256),I=Math.log(256)/Math.log(f);function R(L){if(L instanceof Uint8Array||(ArrayBuffer.isView(L)?L=new Uint8Array(L.buffer,L.byteOffset,L.byteLength):Array.isArray(L)&&(L=Uint8Array.from(L))),!(L instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(L.length===0)return"";for(var k=0,W=0,ae=0,T=L.length;ae!==T&&L[ae]===0;)ae++,k++;for(var U=(T-ae)*I+1>>>0,E=new Uint8Array(U);ae!==T;){for(var C=L[ae],b=0,c=U-1;(C!==0||b<W)&&c!==-1;c--,b++)C+=256*E[c]>>>0,E[c]=C%f>>>0,C=C/f>>>0;if(C!==0)throw new Error("Non-zero carry");W=b,ae++}for(var y=U-W;y!==U&&E[y]===0;)y++;for(var J=g.repeat(k);y<U;++y)J+=n.charAt(E[y]);return J}function B(L){if(typeof L!="string")throw new TypeError("Expected String");if(L.length===0)return new Uint8Array;var k=0;if(L[k]!==" "){for(var W=0,ae=0;L[k]===g;)W++,k++;for(var T=(L.length-k)*w+1>>>0,U=new Uint8Array(T);L[k];){var E=r[L.charCodeAt(k)];if(E===255)return;for(var C=0,b=T-1;(E!==0||C<ae)&&b!==-1;b--,C++)E+=f*U[b]>>>0,U[b]=E%256>>>0,E=E/256>>>0;if(E!==0)throw new Error("Non-zero carry");ae=C,k++}if(L[k]!==" "){for(var c=T-ae;c!==T&&U[c]===0;)c++;for(var y=new Uint8Array(W+(T-c)),J=W;c!==T;)y[J++]=U[c++];return y}}}function F(L){var k=B(L);if(k)return k;throw new Error(`Non-${e} character`)}return{encode:R,decodeUnsafe:B,decode:F}}var b6=_6,m6=b6;const bp=n=>{if(n instanceof Uint8Array&&n.constructor.name==="Uint8Array")return n;if(n instanceof ArrayBuffer)return new Uint8Array(n);if(ArrayBuffer.isView(n))return new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("Unknown type, must be binary type")},w6=n=>new TextEncoder().encode(n),E6=n=>new TextDecoder().decode(n);class D6{constructor(e,r,s){this.name=e,this.prefix=r,this.baseEncode=s}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class S6{constructor(e,r,s){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=s}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return mp(this,e)}}class I6{constructor(e){this.decoders=e}or(e){return mp(this,e)}decode(e){const r=e[0],s=this.decoders[r];if(s)return s.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const mp=(n,e)=>new I6({...n.decoders||{[n.prefix]:n},...e.decoders||{[e.prefix]:e}});class x6{constructor(e,r,s,a){this.name=e,this.prefix=r,this.baseEncode=s,this.baseDecode=a,this.encoder=new D6(e,r,s),this.decoder=new S6(e,r,a)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Xo=({name:n,prefix:e,encode:r,decode:s})=>new x6(n,e,r,s),ws=({prefix:n,name:e,alphabet:r})=>{const{encode:s,decode:a}=m6(r,e);return Xo({prefix:n,name:e,encode:s,decode:l=>bp(a(l))})},O6=(n,e,r,s)=>{const a={};for(let I=0;I<e.length;++I)a[e[I]]=I;let l=n.length;for(;n[l-1]==="=";)--l;const p=new Uint8Array(l*r/8|0);let f=0,g=0,w=0;for(let I=0;I<l;++I){const R=a[n[I]];if(R===void 0)throw new SyntaxError(`Non-${s} character`);g=g<<r|R,f+=r,f>=8&&(f-=8,p[w++]=255&g>>f)}if(f>=r||255&g<<8-f)throw new SyntaxError("Unexpected end of data");return p},C6=(n,e,r)=>{const s=e[e.length-1]==="=",a=(1<<r)-1;let l="",p=0,f=0;for(let g=0;g<n.length;++g)for(f=f<<8|n[g],p+=8;p>r;)p-=r,l+=e[a&f>>p];if(p&&(l+=e[a&f<<r-p]),s)for(;l.length*r&7;)l+="=";return l},Xt=({name:n,prefix:e,bitsPerChar:r,alphabet:s})=>Xo({prefix:e,name:n,encode(a){return C6(a,s,r)},decode(a){return O6(a,s,r,n)}}),A6=Xo({prefix:"\0",name:"identity",encode:n=>E6(n),decode:n=>w6(n)});var P6=Object.freeze({__proto__:null,identity:A6});const T6=Xt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var N6=Object.freeze({__proto__:null,base2:T6});const R6=Xt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var F6=Object.freeze({__proto__:null,base8:R6});const L6=ws({prefix:"9",name:"base10",alphabet:"0123456789"});var U6=Object.freeze({__proto__:null,base10:L6});const $6=Xt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),M6=Xt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var j6=Object.freeze({__proto__:null,base16:$6,base16upper:M6});const z6=Xt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),q6=Xt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),B6=Xt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),H6=Xt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),K6=Xt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),k6=Xt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),V6=Xt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),W6=Xt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),G6=Xt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Y6=Object.freeze({__proto__:null,base32:z6,base32upper:q6,base32pad:B6,base32padupper:H6,base32hex:K6,base32hexupper:k6,base32hexpad:V6,base32hexpadupper:W6,base32z:G6});const J6=ws({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),X6=ws({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Q6=Object.freeze({__proto__:null,base36:J6,base36upper:X6});const Z6=ws({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),eD=ws({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var tD=Object.freeze({__proto__:null,base58btc:Z6,base58flickr:eD});const rD=Xt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),iD=Xt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),nD=Xt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),sD=Xt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var oD=Object.freeze({__proto__:null,base64:rD,base64pad:iD,base64url:nD,base64urlpad:sD});const wp=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),aD=wp.reduce((n,e,r)=>(n[r]=e,n),[]),cD=wp.reduce((n,e,r)=>(n[e.codePointAt(0)]=r,n),[]);function uD(n){return n.reduce((e,r)=>(e+=aD[r],e),"")}function hD(n){const e=[];for(const r of n){const s=cD[r.codePointAt(0)];if(s===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(s)}return new Uint8Array(e)}const lD=Xo({prefix:"🚀",name:"base256emoji",encode:uD,decode:hD});var fD=Object.freeze({__proto__:null,base256emoji:lD}),dD=Ep,Lf=128,pD=127,gD=~pD,vD=Math.pow(2,31);function Ep(n,e,r){e=e||[],r=r||0;for(var s=r;n>=vD;)e[r++]=n&255|Lf,n/=128;for(;n&gD;)e[r++]=n&255|Lf,n>>>=7;return e[r]=n|0,Ep.bytes=r-s+1,e}var yD=tu,_D=128,Uf=127;function tu(n,s){var r=0,s=s||0,a=0,l=s,p,f=n.length;do{if(l>=f)throw tu.bytes=0,new RangeError("Could not decode varint");p=n[l++],r+=a<28?(p&Uf)<<a:(p&Uf)*Math.pow(2,a),a+=7}while(p>=_D);return tu.bytes=l-s,r}var bD=Math.pow(2,7),mD=Math.pow(2,14),wD=Math.pow(2,21),ED=Math.pow(2,28),DD=Math.pow(2,35),SD=Math.pow(2,42),ID=Math.pow(2,49),xD=Math.pow(2,56),OD=Math.pow(2,63),CD=function(n){return n<bD?1:n<mD?2:n<wD?3:n<ED?4:n<DD?5:n<SD?6:n<ID?7:n<xD?8:n<OD?9:10},AD={encode:dD,decode:yD,encodingLength:CD},Dp=AD;const $f=(n,e,r=0)=>(Dp.encode(n,e,r),e),Mf=n=>Dp.encodingLength(n),ru=(n,e)=>{const r=e.byteLength,s=Mf(n),a=s+Mf(r),l=new Uint8Array(a+r);return $f(n,l,0),$f(r,l,s),l.set(e,a),new PD(n,r,e,l)};class PD{constructor(e,r,s,a){this.code=e,this.size=r,this.digest=s,this.bytes=a}}const Sp=({name:n,code:e,encode:r})=>new TD(n,e,r);class TD{constructor(e,r,s){this.name=e,this.code=r,this.encode=s}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?ru(this.code,r):r.then(s=>ru(this.code,s))}else throw Error("Unknown type, must be binary type")}}const Ip=n=>async e=>new Uint8Array(await crypto.subtle.digest(n,e)),ND=Sp({name:"sha2-256",code:18,encode:Ip("SHA-256")}),RD=Sp({name:"sha2-512",code:19,encode:Ip("SHA-512")});var FD=Object.freeze({__proto__:null,sha256:ND,sha512:RD});const xp=0,LD="identity",Op=bp,UD=n=>ru(xp,Op(n)),$D={code:xp,name:LD,encode:Op,digest:UD};var MD=Object.freeze({__proto__:null,identity:$D});new TextEncoder,new TextDecoder;const jf={...P6,...N6,...F6,...U6,...j6,...Y6,...Q6,...tD,...oD,...fD};({...FD,...MD});function Cp(n){return globalThis.Buffer!=null?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):n}function jD(n=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Cp(globalThis.Buffer.allocUnsafe(n)):new Uint8Array(n)}function Ap(n,e,r,s){return{name:n,prefix:e,encoder:{name:n,prefix:e,encode:r},decoder:{decode:s}}}const zf=Ap("utf8","u",n=>"u"+new TextDecoder("utf8").decode(n),n=>new TextEncoder().encode(n.substring(1))),Fc=Ap("ascii","a",n=>{let e="a";for(let r=0;r<n.length;r++)e+=String.fromCharCode(n[r]);return e},n=>{n=n.substring(1);const e=jD(n.length);for(let r=0;r<n.length;r++)e[r]=n.charCodeAt(r);return e}),zD={utf8:zf,"utf-8":zf,hex:jf.base16,latin1:Fc,ascii:Fc,binary:Fc,...jf};function qD(n,e="utf8"){const r=zD[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Cp(globalThis.Buffer.from(n,"utf-8")):r.decoder.decode(`${r.prefix}${n}`)}const Pp="wc",BD=2,Au="core",Ni=`${Pp}@2:${Au}:`,HD={name:Au,logger:"error"},KD={database:":memory:"},kD="crypto",qf="client_ed25519_seed",VD=me.ONE_DAY,WD="keychain",GD="0.3",YD="messages",JD="0.3",XD=me.SIX_HOURS,QD="publisher",Tp="irn",ZD="error",Np="wss://relay.walletconnect.com",e2="relayer",At={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},t2="_subscription",cs={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},r2=me.ONE_SECOND/2,i2="2.8.1",n2=1e4,s2="0.3",o2="WALLETCONNECT_CLIENT_ID",ri={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},a2="subscription",c2="0.3",u2=me.FIVE_SECONDS*1e3,h2="pairing",l2="0.3",us={wc_pairingDelete:{req:{ttl:me.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:me.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:me.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:me.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:me.ONE_DAY,prompt:!1,tag:0},res:{ttl:me.ONE_DAY,prompt:!1,tag:0}}},ti={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},f2="history",d2="0.3",p2="expirer",Mr={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},g2="0.3",Lc="verify-api",Bf="https://verify.walletconnect.com";class v2{constructor(e,r){this.core=e,this.logger=r,this.keychain=new Map,this.name=WD,this.version=GD,this.initialized=!1,this.storagePrefix=Ni,this.init=async()=>{if(!this.initialized){const s=await this.getKeyChain();typeof s<"u"&&(this.keychain=s),this.initialized=!0}},this.has=s=>(this.isInitialized(),this.keychain.has(s)),this.set=async(s,a)=>{this.isInitialized(),this.keychain.set(s,a),await this.persist()},this.get=s=>{this.isInitialized();const a=this.keychain.get(s);if(typeof a>"u"){const{message:l}=fe("NO_MATCHING_KEY",`${this.name}: ${s}`);throw new Error(l)}return a},this.del=async s=>{this.isInitialized(),this.keychain.delete(s),await this.persist()},this.core=e,this.logger=Ze.generateChildLogger(r,this.name)}get context(){return Ze.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,Xd(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Qd(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=fe("NOT_INITIALIZED",this.name);throw new Error(e)}}}class y2{constructor(e,r,s){this.core=e,this.logger=r,this.name=kD,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=a=>(this.isInitialized(),this.keychain.has(a)),this.getClientId=async()=>{this.isInitialized();const a=await this.getClientSeed(),l=Cf(a);return lp(l.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const a=Qw();return this.setPrivateKey(a.publicKey,a.privateKey)},this.signJWT=async a=>{this.isInitialized();const l=await this.getClientSeed(),p=Cf(l),f=Zc();return await G3(f,a,VD,p)},this.generateSharedKey=(a,l,p)=>{this.isInitialized();const f=this.getPrivateKey(a),g=Zw(f,l);return this.setSymKey(g,p)},this.setSymKey=async(a,l)=>{this.isInitialized();const p=l||eE(a);return await this.keychain.set(p,a),p},this.deleteKeyPair=async a=>{this.isInitialized(),await this.keychain.del(a)},this.deleteSymKey=async a=>{this.isInitialized(),await this.keychain.del(a)},this.encode=async(a,l,p)=>{this.isInitialized();const f=Gd(p),g=gs(l);if(rf(f)){const B=f.senderPublicKey,F=f.receiverPublicKey;a=await this.generateSharedKey(B,F)}const w=this.getSymKey(a),{type:I,senderPublicKey:R}=f;return rE({type:I,symKey:w,message:g,senderPublicKey:R})},this.decode=async(a,l,p)=>{this.isInitialized();const f=sE(l,p);if(rf(f)){const I=f.receiverPublicKey,R=f.senderPublicKey;a=await this.generateSharedKey(I,R)}const g=this.getSymKey(a),w=iE({symKey:g,encoded:l});return Du(w)},this.getPayloadType=a=>{const l=Uo(a);return _s(l.type)},this.getPayloadSenderPublicKey=a=>{const l=Uo(a);return l.senderPublicKey?lr(l.senderPublicKey,hr):void 0},this.core=e,this.logger=Ze.generateChildLogger(r,this.name),this.keychain=s||new v2(this.core,this.logger)}get context(){return Ze.getLoggerContext(this.logger)}async setPrivateKey(e,r){return await this.keychain.set(e,r),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(qf)}catch{e=Zc(),await this.keychain.set(qf,e)}return qD(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=fe("NOT_INITIALIZED",this.name);throw new Error(e)}}}class _2 extends S3{constructor(e,r){super(e,r),this.logger=e,this.core=r,this.messages=new Map,this.name=YD,this.version=JD,this.initialized=!1,this.storagePrefix=Ni,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const s=await this.getRelayerMessages();typeof s<"u"&&(this.messages=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(s){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(s)}finally{this.initialized=!0}}},this.set=async(s,a)=>{this.isInitialized();const l=Tn(a);let p=this.messages.get(s);return typeof p>"u"&&(p={}),typeof p[l]<"u"||(p[l]=a,this.messages.set(s,p),await this.persist()),l},this.get=s=>{this.isInitialized();let a=this.messages.get(s);return typeof a>"u"&&(a={}),a},this.has=(s,a)=>{this.isInitialized();const l=this.get(s),p=Tn(a);return typeof l[p]<"u"},this.del=async s=>{this.isInitialized(),this.messages.delete(s),await this.persist()},this.logger=Ze.generateChildLogger(e,this.name),this.core=r}get context(){return Ze.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,Xd(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Qd(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=fe("NOT_INITIALIZED",this.name);throw new Error(e)}}}let b2=class extends I3{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.events=new xr.EventEmitter,this.name=QD,this.queue=new Map,this.publishTimeout=1e4,this.publish=async(s,a,l)=>{this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:s,message:a,opts:l}});try{const p=(l==null?void 0:l.ttl)||XD,f=eu(l),g=(l==null?void 0:l.prompt)||!1,w=(l==null?void 0:l.tag)||0,I=(l==null?void 0:l.id)||xu().toString(),R={topic:s,message:a,opts:{ttl:p,relay:f,prompt:g,tag:w,id:I}};this.queue.set(I,R);try{await await $o(this.rpcPublish(s,a,p,f,g,w,I),this.publishTimeout),this.relayer.events.emit(At.publish,R)}catch{this.logger.debug("Publishing Payload stalled"),this.relayer.events.emit(At.connection_stalled);return}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:s,message:a,opts:l}})}catch(p){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(p),p}},this.on=(s,a)=>{this.events.on(s,a)},this.once=(s,a)=>{this.events.once(s,a)},this.off=(s,a)=>{this.events.off(s,a)},this.removeListener=(s,a)=>{this.events.removeListener(s,a)},this.relayer=e,this.logger=Ze.generateChildLogger(r,this.name),this.registerEventListeners()}get context(){return Ze.getLoggerContext(this.logger)}rpcPublish(e,r,s,a,l,p,f){var g,w,I,R;const B={method:To(a.protocol).publish,params:{topic:e,message:r,ttl:s,prompt:l,tag:p},id:f};return ur((g=B.params)==null?void 0:g.prompt)&&((w=B.params)==null||delete w.prompt),ur((I=B.params)==null?void 0:I.tag)&&((R=B.params)==null||delete R.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:B}),this.relayer.request(B)}onPublish(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async e=>{const{topic:r,message:s,opts:a}=e;await this.publish(r,s,a)})}registerEventListeners(){this.relayer.core.heartbeat.on(ms.HEARTBEAT_EVENTS.pulse,()=>{this.checkQueue()}),this.relayer.on(At.message_ack,e=>{this.onPublish(e.id.toString())})}};class m2{constructor(){this.map=new Map,this.set=(e,r)=>{const s=this.get(e);this.exists(e,r)||this.map.set(e,[...s,r])},this.get=e=>this.map.get(e)||[],this.exists=(e,r)=>this.get(e).includes(r),this.delete=(e,r)=>{if(typeof r>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const s=this.get(e);if(!this.exists(e,r))return;const a=s.filter(l=>l!==r);if(!a.length){this.map.delete(e);return}this.map.set(e,a)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var w2=Object.defineProperty,E2=Object.defineProperties,D2=Object.getOwnPropertyDescriptors,Hf=Object.getOwnPropertySymbols,S2=Object.prototype.hasOwnProperty,I2=Object.prototype.propertyIsEnumerable,Kf=(n,e,r)=>e in n?w2(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,hs=(n,e)=>{for(var r in e||(e={}))S2.call(e,r)&&Kf(n,r,e[r]);if(Hf)for(var r of Hf(e))I2.call(e,r)&&Kf(n,r,e[r]);return n},Uc=(n,e)=>E2(n,D2(e));class x2 extends C3{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.subscriptions=new Map,this.topicMap=new m2,this.events=new xr.EventEmitter,this.name=a2,this.version=c2,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=Ni,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restart(),this.registerEventListeners(),this.onEnable(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(s,a)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:s,opts:a}});try{const l=eu(a),p={topic:s,relay:l};this.pending.set(s,p);const f=await this.rpcSubscribe(s,l);return this.onSubscribe(f,p),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:s,opts:a}}),f}catch(l){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(l),l}},this.unsubscribe=async(s,a)=>{await this.restartToComplete(),this.isInitialized(),typeof(a==null?void 0:a.id)<"u"?await this.unsubscribeById(s,a.id,a):await this.unsubscribeByTopic(s,a)},this.isSubscribed=async s=>this.topics.includes(s)?!0:await new Promise((a,l)=>{const p=new me.Watch;p.start(this.pendingSubscriptionWatchLabel);const f=setInterval(()=>{!this.pending.has(s)&&this.topics.includes(s)&&(clearInterval(f),p.stop(this.pendingSubscriptionWatchLabel),a(!0)),p.elapsed(this.pendingSubscriptionWatchLabel)>=u2&&(clearInterval(f),p.stop(this.pendingSubscriptionWatchLabel),l(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1),this.on=(s,a)=>{this.events.on(s,a)},this.once=(s,a)=>{this.events.once(s,a)},this.off=(s,a)=>{this.events.off(s,a)},this.removeListener=(s,a)=>{this.events.removeListener(s,a)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=Ze.generateChildLogger(r,this.name),this.clientId=""}get context(){return Ze.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,r){let s=!1;try{s=this.getSubscription(e).topic===r}catch{}return s}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,r){const s=this.topicMap.get(e);await Promise.all(s.map(async a=>await this.unsubscribeById(e,a,r)))}async unsubscribeById(e,r,s){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:s}});try{const a=eu(s);await this.rpcUnsubscribe(e,r,a);const l=Ft("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,r,l),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:s}})}catch(a){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(a),a}}async rpcSubscribe(e,r){const s={method:To(r.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});try{await await $o(this.relayer.request(s),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(At.connection_stalled)}return Tn(e+this.clientId)}async rpcBatchSubscribe(e){if(!e.length)return;const r=e[0].relay,s={method:To(r.protocol).batchSubscribe,params:{topics:e.map(a=>a.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});try{return await await $o(this.relayer.request(s),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(At.connection_stalled)}}rpcUnsubscribe(e,r,s){const a={method:To(s.protocol).unsubscribe,params:{topic:e,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:a}),this.relayer.request(a)}onSubscribe(e,r){this.setSubscription(e,Uc(hs({},r),{id:e})),this.pending.delete(r.topic)}onBatchSubscribe(e){e.length&&e.forEach(r=>{this.setSubscription(r.id,hs({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(e,r,s){this.events.removeAllListeners(r),this.hasSubscription(r,e)&&this.deleteSubscription(r,s),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,r){this.subscriptions.has(e)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:r}),this.addSubscription(e,r))}addSubscription(e,r){this.subscriptions.set(e,hs({},r)),this.topicMap.set(r.topic,e),this.events.emit(ri.created,r)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const r=this.subscriptions.get(e);if(!r){const{message:s}=fe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(s)}return r}deleteSubscription(e,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:r});const s=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(s.topic,e),this.events.emit(ri.deleted,Uc(hs({},s),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(ri.sync)}async reset(){if(this.cached.length){const e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<e;r++){const s=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(ri.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:r}=fe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){if(!e.length)return;const r=await this.rpcBatchSubscribe(e);bi(r)&&this.onBatchSubscribe(r.map((s,a)=>Uc(hs({},e[a]),{id:s})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(this.relayer.transportExplicitlyClosed)return;const e=[];this.pending.forEach(r=>{e.push(r)}),await this.batchSubscribe(e)}registerEventListeners(){this.relayer.core.heartbeat.on(ms.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(At.connect,async()=>{await this.onConnect()}),this.relayer.on(At.disconnect,()=>{this.onDisconnect()}),this.events.on(ri.created,async e=>{const r=ri.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),await this.persist()}),this.events.on(ri.deleted,async e=>{const r=ri.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=fe("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){this.restartInProgress&&await new Promise(e=>{const r=setInterval(()=>{this.restartInProgress||(clearInterval(r),e())},this.pollingInterval)})}}var O2=Object.defineProperty,kf=Object.getOwnPropertySymbols,C2=Object.prototype.hasOwnProperty,A2=Object.prototype.propertyIsEnumerable,Vf=(n,e,r)=>e in n?O2(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,P2=(n,e)=>{for(var r in e||(e={}))C2.call(e,r)&&Vf(n,r,e[r]);if(kf)for(var r of kf(e))A2.call(e,r)&&Vf(n,r,e[r]);return n};class T2 extends x3{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new xr.EventEmitter,this.name=e2,this.transportExplicitlyClosed=!1,this.initialized=!1,this.reconnecting=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.request=async r=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(r)}catch(s){throw this.logger.debug("Failed to Publish Request"),this.logger.error(s),s}},this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Ze.generateChildLogger(e.logger,this.name):Ze.pino(Ze.getDefaultLoggerOptions({level:e.logger||ZD})),this.messages=new _2(this.logger,e.core),this.subscriber=new x2(this,this.logger),this.publisher=new b2(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||Np,this.projectId=e.projectId,this.provider={}}async init(){this.logger.trace("Initialized"),await this.createProvider(),await Promise.all([this.messages.init(),this.transportOpen(),this.subscriber.init()]),this.registerEventListeners(),this.initialized=!0,setTimeout(async()=>{this.subscriber.topics.length===0&&(this.logger.info("No topics subscribted to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},n2)}get context(){return Ze.getLoggerContext(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(e,r,s){this.isInitialized(),await this.publisher.publish(e,r,s),await this.recordMessageEvent({topic:e,message:r,publishedAt:Date.now()})}async subscribe(e,r){var s;this.isInitialized();let a=((s=this.subscriber.topicMap.get(e))==null?void 0:s[0])||"";return a||(await Promise.all([new Promise(l=>{this.subscriber.once(ri.created,p=>{p.topic===e&&l()})}),new Promise(async l=>{a=await this.subscriber.subscribe(e,r),l()})]),a)}async unsubscribe(e,r){this.isInitialized(),await this.subscriber.unsubscribe(e,r)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async transportClose(){this.transportExplicitlyClosed=!0,this.connected&&(await this.provider.disconnect(),this.events.emit(At.transport_closed))}async transportOpen(e){if(this.transportExplicitlyClosed=!1,!this.reconnecting){this.relayUrl=e||this.relayUrl,this.reconnecting=!0;try{await Promise.all([new Promise(r=>{this.initialized||r(),this.subscriber.once(ri.resubscribed,()=>{r()})}),await Promise.race([new Promise(async(r,s)=>{await $o(this.provider.connect(),5e3,"socket stalled").catch(a=>s(a)).then(()=>r()).finally(()=>this.removeListener(At.transport_closed,this.rejectTransportOpen))}),new Promise(r=>this.once(At.transport_closed,this.rejectTransportOpen))])])}catch(r){this.logger.error(r);const s=r;if(!this.isConnectionStalled(s.message))throw r;this.events.emit(At.transport_closed)}finally{this.reconnecting=!1}}}async restartTransport(e){this.transportExplicitlyClosed||this.reconnecting||(this.relayUrl=e||this.relayUrl,this.connected&&await Promise.all([new Promise(r=>{this.provider.once(cs.disconnect,()=>{r()})}),this.transportClose()]),await this.createProvider(),await this.transportOpen())}isConnectionStalled(e){return this.staleConnectionErrors.some(r=>e.includes(r))}rejectTransportOpen(){throw new Error("closeTransport called before connection was established")}async createProvider(){const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Fi(new g6(vE({sdkVersion:i2,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0}))),this.registerProviderListeners()}async recordMessageEvent(e){const{topic:r,message:s}=e;await this.messages.set(r,s)}async shouldIgnoreMessageEvent(e){const{topic:r,message:s}=e;return await this.subscriber.isSubscribed(r)?this.messages.has(r,s):!0}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),Cu(e)){if(!e.method.endsWith(t2))return;const r=e.params,{topic:s,message:a,publishedAt:l}=r.data,p={topic:s,message:a,publishedAt:l};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(P2({type:"event",event:r.id},p)),this.events.emit(r.id,p),await this.acknowledgePayload(e),await this.onMessageEvent(p)}else Jo(e)&&this.events.emit(At.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(At.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const r=Ou(e.id,!0);await this.provider.connection.send(r)}registerProviderListeners(){this.provider.on(cs.payload,e=>this.onProviderPayload(e)),this.provider.on(cs.connect,()=>{this.events.emit(At.connect)}),this.provider.on(cs.disconnect,()=>{this.onProviderDisconnect()}),this.provider.on(cs.error,e=>{this.logger.error(e),this.events.emit(At.error,e)})}registerEventListeners(){this.events.on(At.connection_stalled,async()=>{await this.restartTransport()})}onProviderDisconnect(){this.events.emit(At.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||setTimeout(async()=>{await this.restartTransport()},me.toMiliseconds(r2))}isInitialized(){if(!this.initialized){const{message:e}=fe("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(!this.connected){if(this.connecting)return await new Promise(e=>{const r=setInterval(()=>{this.connected&&(clearInterval(r),e())},this.connectionStatusPollingInterval)});await this.restartTransport()}}}var N2=Object.defineProperty,Wf=Object.getOwnPropertySymbols,R2=Object.prototype.hasOwnProperty,F2=Object.prototype.propertyIsEnumerable,Gf=(n,e,r)=>e in n?N2(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,Yf=(n,e)=>{for(var r in e||(e={}))R2.call(e,r)&&Gf(n,r,e[r]);if(Wf)for(var r of Wf(e))F2.call(e,r)&&Gf(n,r,e[r]);return n};class Qo extends O3{constructor(e,r,s,a=Ni,l=void 0){super(e,r,s,a),this.core=e,this.logger=r,this.name=s,this.map=new Map,this.version=s2,this.cached=[],this.initialized=!1,this.storagePrefix=Ni,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(p=>{this.getKey&&p!==null&&!ur(p)?this.map.set(this.getKey(p),p):jE(p)?this.map.set(p.id,p):zE(p)&&this.map.set(p.topic,p)}),this.cached=[],this.initialized=!0)},this.set=async(p,f)=>{this.isInitialized(),this.map.has(p)?await this.update(p,f):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:p,value:f}),this.map.set(p,f),await this.persist())},this.get=p=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:p}),this.getData(p)),this.getAll=p=>(this.isInitialized(),p?this.values.filter(f=>Object.keys(p).every(g=>y6(f[g],p[g]))):this.values),this.update=async(p,f)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:p,update:f});const g=Yf(Yf({},this.getData(p)),f);this.map.set(p,g),await this.persist()},this.delete=async(p,f)=>{this.isInitialized(),this.map.has(p)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:p,reason:f}),this.map.delete(p),await this.persist())},this.logger=Ze.generateChildLogger(r,this.name),this.storagePrefix=a,this.getKey=l}get context(){return Ze.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const r=this.map.get(e);if(!r){const{message:s}=fe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:r}=fe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=fe("NOT_INITIALIZED",this.name);throw new Error(e)}}}class L2{constructor(e,r){this.core=e,this.logger=r,this.name=h2,this.version=l2,this.events=new hu,this.initialized=!1,this.storagePrefix=Ni,this.ignoredPayloadTypes=[nn],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:s})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...s])]},this.create=async()=>{this.isInitialized();const s=Zc(),a=await this.core.crypto.setSymKey(s),l=ii(me.FIVE_MINUTES),p={protocol:Tp},f={topic:a,expiry:l,relay:p,active:!1},g=AE({protocol:this.core.protocol,version:this.core.version,topic:a,symKey:s,relay:p});return await this.pairings.set(a,f),await this.core.relayer.subscribe(a),this.core.expirer.set(a,l),{topic:a,uri:g}},this.pair=async s=>{this.isInitialized(),this.isValidPair(s);const{topic:a,symKey:l,relay:p}=xE(s.uri);if(this.pairings.keys.includes(a))throw new Error(`Pairing already exists: ${a}`);if(this.core.crypto.hasKeys(a))throw new Error(`Keychain already exists: ${a}`);const f=ii(me.FIVE_MINUTES),g={topic:a,relay:p,expiry:f,active:!1};return await this.pairings.set(a,g),await this.core.crypto.setSymKey(l,a),await this.core.relayer.subscribe(a,{relay:p}),this.core.expirer.set(a,f),s.activatePairing&&await this.activate({topic:a}),g},this.activate=async({topic:s})=>{this.isInitialized();const a=ii(me.THIRTY_DAYS);await this.pairings.update(s,{active:!0,expiry:a}),this.core.expirer.set(s,a)},this.ping=async s=>{this.isInitialized(),await this.isValidPing(s);const{topic:a}=s;if(this.pairings.keys.includes(a)){const l=await this.sendRequest(a,"wc_pairingPing",{}),{done:p,resolve:f,reject:g}=Cn();this.events.once(Ht("pairing_ping",l),({error:w})=>{w?g(w):f()}),await p()}},this.updateExpiry=async({topic:s,expiry:a})=>{this.isInitialized(),await this.pairings.update(s,{expiry:a})},this.updateMetadata=async({topic:s,metadata:a})=>{this.isInitialized(),await this.pairings.update(s,{peerMetadata:a})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async s=>{this.isInitialized(),await this.isValidDisconnect(s);const{topic:a}=s;this.pairings.keys.includes(a)&&(await this.sendRequest(a,"wc_pairingDelete",Ft("USER_DISCONNECTED")),await this.deletePairing(a))},this.sendRequest=async(s,a,l)=>{const p=Go(a,l),f=await this.core.crypto.encode(s,p),g=us[a].req;return this.core.history.set(s,p),this.core.relayer.publish(s,f,g),p.id},this.sendResult=async(s,a,l)=>{const p=Ou(s,l),f=await this.core.crypto.encode(a,p),g=await this.core.history.get(a,s),w=us[g.request.method].res;await this.core.relayer.publish(a,f,w),await this.core.history.resolve(p)},this.sendError=async(s,a,l)=>{const p=Yo(s,l),f=await this.core.crypto.encode(a,p),g=await this.core.history.get(a,s),w=us[g.request.method]?us[g.request.method].res:us.unregistered_method.res;await this.core.relayer.publish(a,f,w),await this.core.history.resolve(p)},this.deletePairing=async(s,a)=>{await this.core.relayer.unsubscribe(s),await Promise.all([this.pairings.delete(s,Ft("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(s),a?Promise.resolve():this.core.expirer.del(s)])},this.cleanup=async()=>{const s=this.pairings.getAll().filter(a=>Ti(a.expiry));await Promise.all(s.map(a=>this.deletePairing(a.topic)))},this.onRelayEventRequest=s=>{const{topic:a,payload:l}=s,p=l.method;if(this.pairings.keys.includes(a))switch(p){case"wc_pairingPing":return this.onPairingPingRequest(a,l);case"wc_pairingDelete":return this.onPairingDeleteRequest(a,l);default:return this.onUnknownRpcMethodRequest(a,l)}},this.onRelayEventResponse=async s=>{const{topic:a,payload:l}=s,p=(await this.core.history.get(a,l.id)).request.method;if(this.pairings.keys.includes(a))switch(p){case"wc_pairingPing":return this.onPairingPingResponse(a,l);default:return this.onUnknownRpcMethodResponse(p)}},this.onPairingPingRequest=async(s,a)=>{const{id:l}=a;try{this.isValidPing({topic:s}),await this.sendResult(l,s,!0),this.events.emit("pairing_ping",{id:l,topic:s})}catch(p){await this.sendError(l,s,p),this.logger.error(p)}},this.onPairingPingResponse=(s,a)=>{const{id:l}=a;setTimeout(()=>{_i(a)?this.events.emit(Ht("pairing_ping",l),{}):Wr(a)&&this.events.emit(Ht("pairing_ping",l),{error:a.error})},500)},this.onPairingDeleteRequest=async(s,a)=>{const{id:l}=a;try{this.isValidDisconnect({topic:s}),await this.deletePairing(s),this.events.emit("pairing_delete",{id:l,topic:s})}catch(p){await this.sendError(l,s,p),this.logger.error(p)}},this.onUnknownRpcMethodRequest=async(s,a)=>{const{id:l,method:p}=a;try{if(this.registeredMethods.includes(p))return;const f=Ft("WC_METHOD_UNSUPPORTED",p);await this.sendError(l,s,f),this.logger.error(f)}catch(f){await this.sendError(l,s,f),this.logger.error(f)}},this.onUnknownRpcMethodResponse=s=>{this.registeredMethods.includes(s)||this.logger.error(Ft("WC_METHOD_UNSUPPORTED",s))},this.isValidPair=s=>{if(!_r(s)){const{message:a}=fe("MISSING_OR_INVALID",`pair() params: ${s}`);throw new Error(a)}if(!ME(s.uri)){const{message:a}=fe("MISSING_OR_INVALID",`pair() uri: ${s.uri}`);throw new Error(a)}},this.isValidPing=async s=>{if(!_r(s)){const{message:l}=fe("MISSING_OR_INVALID",`ping() params: ${s}`);throw new Error(l)}const{topic:a}=s;await this.isValidPairingTopic(a)},this.isValidDisconnect=async s=>{if(!_r(s)){const{message:l}=fe("MISSING_OR_INVALID",`disconnect() params: ${s}`);throw new Error(l)}const{topic:a}=s;await this.isValidPairingTopic(a)},this.isValidPairingTopic=async s=>{if(!Gt(s,!1)){const{message:a}=fe("MISSING_OR_INVALID",`pairing topic should be a string: ${s}`);throw new Error(a)}if(!this.pairings.keys.includes(s)){const{message:a}=fe("NO_MATCHING_KEY",`pairing topic doesn't exist: ${s}`);throw new Error(a)}if(Ti(this.pairings.get(s).expiry)){await this.deletePairing(s);const{message:a}=fe("EXPIRED",`pairing topic: ${s}`);throw new Error(a)}},this.core=e,this.logger=Ze.generateChildLogger(r,this.name),this.pairings=new Qo(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Ze.getLoggerContext(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=fe("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(At.message,async e=>{const{topic:r,message:s}=e;if(this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(s)))return;const a=await this.core.crypto.decode(r,s);Cu(a)?(this.core.history.set(r,a),this.onRelayEventRequest({topic:r,payload:a})):Jo(a)&&(await this.core.history.resolve(a),this.onRelayEventResponse({topic:r,payload:a}))})}registerExpirerEvents(){this.core.expirer.on(Mr.expired,async e=>{const{topic:r}=ep(e.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit("pairing_expire",{topic:r}))})}}class U2 extends D3{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.records=new Map,this.events=new xr.EventEmitter,this.name=f2,this.version=d2,this.cached=[],this.initialized=!1,this.storagePrefix=Ni,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(s=>this.records.set(s.id,s)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(s,a,l)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:s,request:a,chainId:l}),this.records.has(a.id))return;const p={id:a.id,topic:s,request:{method:a.method,params:a.params||null},chainId:l};this.records.set(p.id,p),this.events.emit(ti.created,p)},this.resolve=async s=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:s}),!this.records.has(s.id))return;const a=await this.getRecord(s.id);typeof a.response>"u"&&(a.response=Wr(s)?{error:s.error}:{result:s.result},this.records.set(a.id,a),this.events.emit(ti.updated,a))},this.get=async(s,a)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:s,id:a}),await this.getRecord(a)),this.delete=(s,a)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:a}),this.values.forEach(l=>{if(l.topic===s){if(typeof a<"u"&&l.id!==a)return;this.records.delete(l.id),this.events.emit(ti.deleted,l)}})},this.exists=async(s,a)=>(this.isInitialized(),this.records.has(a)?(await this.getRecord(a)).topic===s:!1),this.on=(s,a)=>{this.events.on(s,a)},this.once=(s,a)=>{this.events.once(s,a)},this.off=(s,a)=>{this.events.off(s,a)},this.removeListener=(s,a)=>{this.events.removeListener(s,a)},this.logger=Ze.generateChildLogger(r,this.name)}get context(){return Ze.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const s={topic:r.topic,request:Go(r.request.method,r.request.params,r.id),chainId:r.chainId};return e.push(s)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const r=this.records.get(e);if(!r){const{message:s}=fe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(s)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(ti.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:r}=fe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(ti.created,e=>{const r=ti.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.events.on(ti.updated,e=>{const r=ti.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.events.on(ti.deleted,e=>{const r=ti.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=fe("NOT_INITIALIZED",this.name);throw new Error(e)}}}class $2 extends A3{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.expirations=new Map,this.events=new xr.EventEmitter,this.name=p2,this.version=g2,this.cached=[],this.initialized=!1,this.storagePrefix=Ni,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(s=>this.expirations.set(s.target,s)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=s=>{try{const a=this.formatTarget(s);return typeof this.getExpiration(a)<"u"}catch{return!1}},this.set=(s,a)=>{this.isInitialized();const l=this.formatTarget(s),p={target:l,expiry:a};this.expirations.set(l,p),this.checkExpiry(l,p),this.events.emit(Mr.created,{target:l,expiration:p})},this.get=s=>{this.isInitialized();const a=this.formatTarget(s);return this.getExpiration(a)},this.del=s=>{if(this.isInitialized(),this.has(s)){const a=this.formatTarget(s),l=this.getExpiration(a);this.expirations.delete(a),this.events.emit(Mr.deleted,{target:a,expiration:l})}},this.on=(s,a)=>{this.events.on(s,a)},this.once=(s,a)=>{this.events.once(s,a)},this.off=(s,a)=>{this.events.off(s,a)},this.removeListener=(s,a)=>{this.events.removeListener(s,a)},this.logger=Ze.generateChildLogger(r,this.name)}get context(){return Ze.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return yE(e);if(typeof e=="number")return _E(e);const{message:r}=fe("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(r)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Mr.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:r}=fe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const r=this.expirations.get(e);if(!r){const{message:s}=fe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}return r}checkExpiry(e,r){const{expiry:s}=r;me.toMiliseconds(s)-Date.now()<=0&&this.expire(e,r)}expire(e,r){this.expirations.delete(e),this.events.emit(Mr.expired,{target:e,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,r)=>this.checkExpiry(r,e))}registerEventListeners(){this.core.heartbeat.on(ms.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(Mr.created,e=>{const r=Mr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(Mr.expired,e=>{const r=Mr.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(Mr.deleted,e=>{const r=Mr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=fe("NOT_INITIALIZED",this.name);throw new Error(e)}}}class M2 extends P3{constructor(e,r){super(e,r),this.projectId=e,this.logger=r,this.name=Lc,this.initialized=!1,this.init=async s=>{Yd()||!mu()||(this.verifyUrl=(s==null?void 0:s.verifyUrl)||Bf,await this.createIframe())},this.register=async s=>{var a;this.initialized||await this.init(),this.iframe&&((a=this.iframe.contentWindow)==null||a.postMessage(s.attestationId,this.verifyUrl),this.logger.info(`postMessage sent: ${s.attestationId} ${this.verifyUrl}`))},this.resolve=async s=>{var a;if(this.isDevEnv)return"";this.logger.info(`resolving attestation: ${s.attestationId}`);const l=this.startAbortTimer(me.FIVE_SECONDS),p=await fetch(`${this.verifyUrl}/attestation/${s.attestationId}`,{signal:this.abortController.signal});return clearTimeout(l),p.status===200?(a=await p.json())==null?void 0:a.origin:""},this.createIframe=async()=>{try{await Promise.race([new Promise((s,a)=>{if(document.getElementById(Lc))return s();const l=document.createElement("iframe");l.setAttribute("id",Lc),l.setAttribute("src",`${this.verifyUrl}/${this.projectId}`),l.style.display="none",l.addEventListener("load",()=>{this.initialized=!0,s()}),l.addEventListener("error",p=>{a(p)}),document.body.append(l),this.iframe=l}),new Promise(s=>{setTimeout(()=>s("iframe load timeout"),me.toMiliseconds(me.ONE_SECOND/2))})])}catch(s){this.logger.error(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.error(s)}},this.logger=Ze.generateChildLogger(r,this.name),this.verifyUrl=Bf,this.abortController=new AbortController,this.isDevEnv=bu()&&{}.IS_VITEST}get context(){return Ze.getLoggerContext(this.logger)}startAbortTimer(e){return setTimeout(()=>this.abortController.abort(),me.toMiliseconds(e))}}var j2=Object.defineProperty,Jf=Object.getOwnPropertySymbols,z2=Object.prototype.hasOwnProperty,q2=Object.prototype.propertyIsEnumerable,Xf=(n,e,r)=>e in n?j2(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,Qf=(n,e)=>{for(var r in e||(e={}))z2.call(e,r)&&Xf(n,r,e[r]);if(Jf)for(var r of Jf(e))q2.call(e,r)&&Xf(n,r,e[r]);return n};let B2=class Rp extends E3{constructor(e){super(e),this.protocol=Pp,this.version=BD,this.name=Au,this.events=new xr.EventEmitter,this.initialized=!1,this.on=(s,a)=>this.events.on(s,a),this.once=(s,a)=>this.events.once(s,a),this.off=(s,a)=>this.events.off(s,a),this.removeListener=(s,a)=>this.events.removeListener(s,a),this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||Np;const r=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Ze.pino(Ze.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||HD.logger}));this.logger=Ze.generateChildLogger(r,this.name),this.heartbeat=new ms.HeartBeat,this.crypto=new y2(this,this.logger,e==null?void 0:e.keychain),this.history=new U2(this,this.logger),this.expirer=new $2(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new d3(Qf(Qf({},KD),e==null?void 0:e.storageOptions)),this.relayer=new T2({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new L2(this,this.logger),this.verify=new M2(this.projectId||"",this.logger)}static async init(e){const r=new Rp(e);await r.initialize();const s=await r.crypto.getClientId();return await r.storage.setItem(o2,s),r}get context(){return Ze.getLoggerContext(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}};const H2=B2,Fp="wc",Lp=2,Up="client",Pu=`${Fp}@${Lp}:${Up}:`,$c={name:Up,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},K2="WALLETCONNECT_DEEPLINK_CHOICE",k2="proposal",$p="Proposal expired",V2="session",Oo=me.SEVEN_DAYS,W2="engine",ls={wc_sessionPropose:{req:{ttl:me.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:me.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:me.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:me.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:me.ONE_DAY,prompt:!1,tag:1104},res:{ttl:me.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:me.ONE_DAY,prompt:!1,tag:1106},res:{ttl:me.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:me.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:me.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:me.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:me.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:me.ONE_DAY,prompt:!1,tag:1112},res:{ttl:me.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:me.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:me.THIRTY_SECONDS,prompt:!1,tag:1115}}},Mc={min:me.FIVE_MINUTES,max:me.SEVEN_DAYS},G2="request",Y2=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var J2=Object.defineProperty,X2=Object.defineProperties,Q2=Object.getOwnPropertyDescriptors,Zf=Object.getOwnPropertySymbols,Z2=Object.prototype.hasOwnProperty,e5=Object.prototype.propertyIsEnumerable,ed=(n,e,r)=>e in n?J2(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,$r=(n,e)=>{for(var r in e||(e={}))Z2.call(e,r)&&ed(n,r,e[r]);if(Zf)for(var r of Zf(e))e5.call(e,r)&&ed(n,r,e[r]);return n},jc=(n,e)=>X2(n,Q2(e));class t5 extends N3{constructor(e){super(e),this.name=W2,this.events=new hu,this.initialized=!1,this.ignoredPayloadTypes=[nn],this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.client.core.pairing.register({methods:Object.keys(ls)}),this.initialized=!0)},this.connect=async r=>{this.isInitialized();const s=jc($r({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(s);const{pairingTopic:a,requiredNamespaces:l,optionalNamespaces:p,sessionProperties:f,relays:g}=s;let w=a,I,R=!1;if(w&&(R=this.client.core.pairing.pairings.get(w).active),!w||!R){const{topic:U,uri:E}=await this.client.core.pairing.create();w=U,I=E}const B=await this.client.core.crypto.generateKeyPair(),F=$r({requiredNamespaces:l,optionalNamespaces:p,relays:g??[{protocol:Tp}],proposer:{publicKey:B,metadata:this.client.metadata}},f&&{sessionProperties:f}),{reject:L,resolve:k,done:W}=Cn(me.FIVE_MINUTES,$p);if(this.events.once(Ht("session_connect"),async({error:U,session:E})=>{if(U)L(U);else if(E){E.self.publicKey=B;const C=jc($r({},E),{requiredNamespaces:E.requiredNamespaces,optionalNamespaces:E.optionalNamespaces});await this.client.session.set(E.topic,C),await this.setExpiry(E.topic,E.expiry),w&&await this.client.core.pairing.updateMetadata({topic:w,metadata:E.peer.metadata}),k(C)}}),!w){const{message:U}=fe("NO_MATCHING_KEY",`connect() pairing topic: ${w}`);throw new Error(U)}const ae=await this.sendRequest(w,"wc_sessionPropose",F),T=ii(me.FIVE_MINUTES);return await this.setProposal(ae,$r({id:ae,expiry:T},F)),{uri:I,approval:W}},this.pair=async r=>(this.isInitialized(),await this.client.core.pairing.pair(r)),this.approve=async r=>{this.isInitialized(),await this.isValidApprove(r);const{id:s,relayProtocol:a,namespaces:l,sessionProperties:p}=r,f=this.client.proposal.get(s);let{pairingTopic:g,proposer:w,requiredNamespaces:I,optionalNamespaces:R}=f;g=g||"",Nn(I)||(I=RE(l,"approve()"));const B=await this.client.core.crypto.generateKeyPair(),F=w.publicKey,L=await this.client.core.crypto.generateSharedKey(B,F);g&&s&&(await this.client.core.pairing.updateMetadata({topic:g,metadata:w.metadata}),await this.sendResult(s,g,{relay:{protocol:a??"irn"},responderPublicKey:B}),await this.client.proposal.delete(s,Ft("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:g}));const k=$r({relay:{protocol:a??"irn"},namespaces:l,requiredNamespaces:I,optionalNamespaces:R,pairingTopic:g,controller:{publicKey:B,metadata:this.client.metadata},expiry:ii(Oo)},p&&{sessionProperties:p});await this.client.core.relayer.subscribe(L),await this.sendRequest(L,"wc_sessionSettle",k);const W=jc($r({},k),{topic:L,pairingTopic:g,acknowledged:!1,self:k.controller,peer:{publicKey:w.publicKey,metadata:w.metadata},controller:B});return await this.client.session.set(L,W),await this.setExpiry(L,ii(Oo)),{topic:L,acknowledged:()=>new Promise(ae=>setTimeout(()=>ae(this.client.session.get(L)),500))}},this.reject=async r=>{this.isInitialized(),await this.isValidReject(r);const{id:s,reason:a}=r,{pairingTopic:l}=this.client.proposal.get(s);l&&(await this.sendError(s,l,a),await this.client.proposal.delete(s,Ft("USER_DISCONNECTED")))},this.update=async r=>{this.isInitialized(),await this.isValidUpdate(r);const{topic:s,namespaces:a}=r,l=await this.sendRequest(s,"wc_sessionUpdate",{namespaces:a}),{done:p,resolve:f,reject:g}=Cn();return this.events.once(Ht("session_update",l),({error:w})=>{w?g(w):f()}),await this.client.session.update(s,{namespaces:a}),{acknowledged:p}},this.extend=async r=>{this.isInitialized(),await this.isValidExtend(r);const{topic:s}=r,a=await this.sendRequest(s,"wc_sessionExtend",{}),{done:l,resolve:p,reject:f}=Cn();return this.events.once(Ht("session_extend",a),({error:g})=>{g?f(g):p()}),await this.setExpiry(s,ii(Oo)),{acknowledged:l}},this.request=async r=>{this.isInitialized(),await this.isValidRequest(r);const{chainId:s,request:a,topic:l,expiry:p}=r,f=await this.sendRequest(l,"wc_sessionRequest",{request:a,chainId:s},p),{done:g,resolve:w,reject:I}=Cn(p);this.events.once(Ht("session_request",f),({error:B,result:F})=>{B?I(B):w(F)}),this.client.events.emit("session_request_sent",{topic:l,request:a,chainId:s,id:f});const R=await this.client.core.storage.getItem(K2);return bE({id:f,topic:l,wcDeepLink:R}),await g()},this.respond=async r=>{this.isInitialized(),await this.isValidRespond(r);const{topic:s,response:a}=r,{id:l}=a;_i(a)?await this.sendResult(l,s,a.result):Wr(a)&&await this.sendError(l,s,a.error),this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0})},this.ping=async r=>{this.isInitialized(),await this.isValidPing(r);const{topic:s}=r;if(this.client.session.keys.includes(s)){const a=await this.sendRequest(s,"wc_sessionPing",{}),{done:l,resolve:p,reject:f}=Cn();this.events.once(Ht("session_ping",a),({error:g})=>{g?f(g):p()}),await l()}else this.client.core.pairing.pairings.keys.includes(s)&&await this.client.core.pairing.ping({topic:s})},this.emit=async r=>{this.isInitialized(),await this.isValidEmit(r);const{topic:s,event:a,chainId:l}=r;await this.sendRequest(s,"wc_sessionEvent",{event:a,chainId:l})},this.disconnect=async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:s}=r;if(this.client.session.keys.includes(s)){const a=xu().toString();let l;const p=f=>{(f==null?void 0:f.id.toString())===a&&(this.client.core.relayer.events.removeListener(At.message_ack,p),l())};await Promise.all([new Promise(f=>{l=f,this.client.core.relayer.on(At.message_ack,p)}),this.sendRequest(s,"wc_sessionDelete",Ft("USER_DISCONNECTED"),void 0,a)]),await this.deleteSession(s)}else await this.client.core.pairing.disconnect({topic:s})},this.find=r=>(this.isInitialized(),this.client.session.getAll().filter(s=>UE(s,r))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.cleanupDuplicatePairings=async r=>{try{const s=this.client.core.pairing.pairings.get(r.pairingTopic),a=this.client.core.pairing.pairings.getAll().filter(l=>{var p,f;return((p=l.peerMetadata)==null?void 0:p.url)&&((f=l.peerMetadata)==null?void 0:f.url)===r.peer.metadata.url&&l.topic&&l.topic!==s.topic});if(a.length===0)return;this.client.logger.info(`Cleaning up ${a.length} duplicate pairing(s)`),await Promise.all(a.map(l=>this.client.core.pairing.disconnect({topic:l.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(s){this.client.logger.error(s)}},this.deleteSession=async(r,s)=>{const{self:a}=this.client.session.get(r);await this.client.core.relayer.unsubscribe(r),this.client.session.delete(r,Ft("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(a.publicKey)&&await this.client.core.crypto.deleteKeyPair(a.publicKey),this.client.core.crypto.keychain.has(r)&&await this.client.core.crypto.deleteSymKey(r),s||this.client.core.expirer.del(r)},this.deleteProposal=async(r,s)=>{await Promise.all([this.client.proposal.delete(r,Ft("USER_DISCONNECTED")),s?Promise.resolve():this.client.core.expirer.del(r)])},this.deletePendingSessionRequest=async(r,s,a=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,s),a?Promise.resolve():this.client.core.expirer.del(r)])},this.setExpiry=async(r,s)=>{this.client.session.keys.includes(r)&&await this.client.session.update(r,{expiry:s}),this.client.core.expirer.set(r,s)},this.setProposal=async(r,s)=>{await this.client.proposal.set(r,s),this.client.core.expirer.set(r,s.expiry)},this.setPendingSessionRequest=async r=>{const s=ls.wc_sessionRequest.req.ttl,{id:a,topic:l,params:p}=r;await this.client.pendingRequest.set(a,{id:a,topic:l,params:p}),s&&this.client.core.expirer.set(a,ii(s))},this.sendRequest=async(r,s,a,l,p)=>{const f=Go(s,a);if(mu()&&Y2.includes(s)){const I=Tn(JSON.stringify(f));await this.client.core.verify.register({attestationId:I})}const g=await this.client.core.crypto.encode(r,f),w=ls[s].req;return l&&(w.ttl=l),p&&(w.id=p),this.client.core.history.set(r,f),this.client.core.relayer.publish(r,g,w),f.id},this.sendResult=async(r,s,a)=>{const l=Ou(r,a),p=await this.client.core.crypto.encode(s,l),f=await this.client.core.history.get(s,r),g=ls[f.request.method].res;this.client.core.relayer.publish(s,p,g),await this.client.core.history.resolve(l)},this.sendError=async(r,s,a)=>{const l=Yo(r,a),p=await this.client.core.crypto.encode(s,l),f=await this.client.core.history.get(s,r),g=ls[f.request.method].res;this.client.core.relayer.publish(s,p,g),await this.client.core.history.resolve(l)},this.cleanup=async()=>{const r=[],s=[];this.client.session.getAll().forEach(a=>{Ti(a.expiry)&&r.push(a.topic)}),this.client.proposal.getAll().forEach(a=>{Ti(a.expiry)&&s.push(a.id)}),await Promise.all([...r.map(a=>this.deleteSession(a)),...s.map(a=>this.deleteProposal(a))])},this.onRelayEventRequest=r=>{const{topic:s,payload:a}=r,l=a.method;switch(l){case"wc_sessionPropose":return this.onSessionProposeRequest(s,a);case"wc_sessionSettle":return this.onSessionSettleRequest(s,a);case"wc_sessionUpdate":return this.onSessionUpdateRequest(s,a);case"wc_sessionExtend":return this.onSessionExtendRequest(s,a);case"wc_sessionPing":return this.onSessionPingRequest(s,a);case"wc_sessionDelete":return this.onSessionDeleteRequest(s,a);case"wc_sessionRequest":return this.onSessionRequest(s,a);case"wc_sessionEvent":return this.onSessionEventRequest(s,a);default:return this.client.logger.info(`Unsupported request method ${l}`)}},this.onRelayEventResponse=async r=>{const{topic:s,payload:a}=r,l=(await this.client.core.history.get(s,a.id)).request.method;switch(l){case"wc_sessionPropose":return this.onSessionProposeResponse(s,a);case"wc_sessionSettle":return this.onSessionSettleResponse(s,a);case"wc_sessionUpdate":return this.onSessionUpdateResponse(s,a);case"wc_sessionExtend":return this.onSessionExtendResponse(s,a);case"wc_sessionPing":return this.onSessionPingResponse(s,a);case"wc_sessionRequest":return this.onSessionRequestResponse(s,a);default:return this.client.logger.info(`Unsupported response method ${l}`)}},this.onRelayEventUnknownPayload=r=>{const{topic:s}=r,{message:a}=fe("MISSING_OR_INVALID",`Decoded payload on topic ${s} is not identifiable as a JSON-RPC request or a response.`);throw new Error(a)},this.onSessionProposeRequest=async(r,s)=>{const{params:a,id:l}=s;try{this.isValidConnect($r({},s.params));const p=ii(me.FIVE_MINUTES),f=$r({id:l,pairingTopic:r,expiry:p},a);await this.setProposal(l,f);const g=Tn(JSON.stringify(s)),w=await this.getVerifyContext(g,f.proposer.metadata);this.client.events.emit("session_proposal",{id:l,params:f,verifyContext:w})}catch(p){await this.sendError(l,r,p),this.client.logger.error(p)}},this.onSessionProposeResponse=async(r,s)=>{const{id:a}=s;if(_i(s)){const{result:l}=s;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:l});const p=this.client.proposal.get(a);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:p});const f=p.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:f});const g=l.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:g});const w=await this.client.core.crypto.generateSharedKey(f,g);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:w});const I=await this.client.core.relayer.subscribe(w);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:I}),await this.client.core.pairing.activate({topic:r})}else Wr(s)&&(await this.client.proposal.delete(a,Ft("USER_DISCONNECTED")),this.events.emit(Ht("session_connect"),{error:s.error}))},this.onSessionSettleRequest=async(r,s)=>{const{id:a,params:l}=s;try{this.isValidSessionSettleRequest(l);const{relay:p,controller:f,expiry:g,namespaces:w,requiredNamespaces:I,optionalNamespaces:R,sessionProperties:B,pairingTopic:F}=s.params,L=$r({topic:r,relay:p,expiry:g,namespaces:w,acknowledged:!0,pairingTopic:F,requiredNamespaces:I,optionalNamespaces:R,controller:f.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:f.publicKey,metadata:f.metadata}},B&&{sessionProperties:B});await this.sendResult(s.id,r,!0),this.events.emit(Ht("session_connect"),{session:L}),this.cleanupDuplicatePairings(L)}catch(p){await this.sendError(a,r,p),this.client.logger.error(p)}},this.onSessionSettleResponse=async(r,s)=>{const{id:a}=s;_i(s)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(Ht("session_approve",a),{})):Wr(s)&&(await this.client.session.delete(r,Ft("USER_DISCONNECTED")),this.events.emit(Ht("session_approve",a),{error:s.error}))},this.onSessionUpdateRequest=async(r,s)=>{const{params:a,id:l}=s;try{this.isValidUpdate($r({topic:r},a)),await this.client.session.update(r,{namespaces:a.namespaces}),await this.sendResult(l,r,!0),this.client.events.emit("session_update",{id:l,topic:r,params:a})}catch(p){await this.sendError(l,r,p),this.client.logger.error(p)}},this.onSessionUpdateResponse=(r,s)=>{const{id:a}=s;_i(s)?this.events.emit(Ht("session_update",a),{}):Wr(s)&&this.events.emit(Ht("session_update",a),{error:s.error})},this.onSessionExtendRequest=async(r,s)=>{const{id:a}=s;try{this.isValidExtend({topic:r}),await this.setExpiry(r,ii(Oo)),await this.sendResult(a,r,!0),this.client.events.emit("session_extend",{id:a,topic:r})}catch(l){await this.sendError(a,r,l),this.client.logger.error(l)}},this.onSessionExtendResponse=(r,s)=>{const{id:a}=s;_i(s)?this.events.emit(Ht("session_extend",a),{}):Wr(s)&&this.events.emit(Ht("session_extend",a),{error:s.error})},this.onSessionPingRequest=async(r,s)=>{const{id:a}=s;try{this.isValidPing({topic:r}),await this.sendResult(a,r,!0),this.client.events.emit("session_ping",{id:a,topic:r})}catch(l){await this.sendError(a,r,l),this.client.logger.error(l)}},this.onSessionPingResponse=(r,s)=>{const{id:a}=s;setTimeout(()=>{_i(s)?this.events.emit(Ht("session_ping",a),{}):Wr(s)&&this.events.emit(Ht("session_ping",a),{error:s.error})},500)},this.onSessionDeleteRequest=async(r,s)=>{const{id:a}=s;try{this.isValidDisconnect({topic:r,reason:s.params}),await Promise.all([new Promise(l=>{this.client.core.relayer.once(At.publish,async()=>{l(await this.deleteSession(r))})}),this.sendResult(a,r,!0)]),this.client.events.emit("session_delete",{id:a,topic:r})}catch(l){this.client.logger.error(l)}},this.onSessionRequest=async(r,s)=>{const{id:a,params:l}=s;try{this.isValidRequest($r({topic:r},l)),await this.setPendingSessionRequest({id:a,topic:r,params:l});const p=Tn(JSON.stringify(s)),f=this.client.session.get(r),g=await this.getVerifyContext(p,f.peer.metadata);this.client.events.emit("session_request",{id:a,topic:r,params:l,verifyContext:g})}catch(p){await this.sendError(a,r,p),this.client.logger.error(p)}},this.onSessionRequestResponse=(r,s)=>{const{id:a}=s;_i(s)?this.events.emit(Ht("session_request",a),{result:s.result}):Wr(s)&&this.events.emit(Ht("session_request",a),{error:s.error})},this.onSessionEventRequest=async(r,s)=>{const{id:a,params:l}=s;try{this.isValidEmit($r({topic:r},l)),this.client.events.emit("session_event",{id:a,topic:r,params:l})}catch(p){await this.sendError(a,r,p),this.client.logger.error(p)}},this.isValidConnect=async r=>{if(!_r(r)){const{message:g}=fe("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(g)}const{pairingTopic:s,requiredNamespaces:a,optionalNamespaces:l,sessionProperties:p,relays:f}=r;if(ur(s)||await this.isValidPairingTopic(s),!GE(f,!0)){const{message:g}=fe("MISSING_OR_INVALID",`connect() relays: ${f}`);throw new Error(g)}!ur(a)&&Nn(a)!==0&&this.validateNamespaces(a,"requiredNamespaces"),!ur(l)&&Nn(l)!==0&&this.validateNamespaces(l,"optionalNamespaces"),ur(p)||this.validateSessionProps(p,"sessionProperties")},this.validateNamespaces=(r,s)=>{const a=WE(r,"connect()",s);if(a)throw new Error(a.message)},this.isValidApprove=async r=>{if(!_r(r))throw new Error(fe("MISSING_OR_INVALID",`approve() params: ${r}`).message);const{id:s,namespaces:a,relayProtocol:l,sessionProperties:p}=r;await this.isValidProposalId(s);const f=this.client.proposal.get(s),g=Ro(a,"approve()");if(g)throw new Error(g.message);const w=lf(f.requiredNamespaces,a,"approve()");if(w)throw new Error(w.message);if(!Gt(l,!0)){const{message:I}=fe("MISSING_OR_INVALID",`approve() relayProtocol: ${l}`);throw new Error(I)}ur(p)||this.validateSessionProps(p,"sessionProperties")},this.isValidReject=async r=>{if(!_r(r)){const{message:l}=fe("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(l)}const{id:s,reason:a}=r;if(await this.isValidProposalId(s),!JE(a)){const{message:l}=fe("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(a)}`);throw new Error(l)}},this.isValidSessionSettleRequest=r=>{if(!_r(r)){const{message:w}=fe("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(w)}const{relay:s,controller:a,namespaces:l,expiry:p}=r;if(!ip(s)){const{message:w}=fe("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(w)}const f=qE(a,"onSessionSettleRequest()");if(f)throw new Error(f.message);const g=Ro(l,"onSessionSettleRequest()");if(g)throw new Error(g.message);if(Ti(p)){const{message:w}=fe("EXPIRED","onSessionSettleRequest()");throw new Error(w)}},this.isValidUpdate=async r=>{if(!_r(r)){const{message:g}=fe("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(g)}const{topic:s,namespaces:a}=r;await this.isValidSessionTopic(s);const l=this.client.session.get(s),p=Ro(a,"update()");if(p)throw new Error(p.message);const f=lf(l.requiredNamespaces,a,"update()");if(f)throw new Error(f.message)},this.isValidExtend=async r=>{if(!_r(r)){const{message:a}=fe("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(a)}const{topic:s}=r;await this.isValidSessionTopic(s)},this.isValidRequest=async r=>{if(!_r(r)){const{message:g}=fe("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(g)}const{topic:s,request:a,chainId:l,expiry:p}=r;await this.isValidSessionTopic(s);const{namespaces:f}=this.client.session.get(s);if(!hf(f,l)){const{message:g}=fe("MISSING_OR_INVALID",`request() chainId: ${l}`);throw new Error(g)}if(!XE(a)){const{message:g}=fe("MISSING_OR_INVALID",`request() ${JSON.stringify(a)}`);throw new Error(g)}if(!e3(f,l,a.method)){const{message:g}=fe("MISSING_OR_INVALID",`request() method: ${a.method}`);throw new Error(g)}if(p&&!n3(p,Mc)){const{message:g}=fe("MISSING_OR_INVALID",`request() expiry: ${p}. Expiry must be a number (in seconds) between ${Mc.min} and ${Mc.max}`);throw new Error(g)}},this.isValidRespond=async r=>{if(!_r(r)){const{message:l}=fe("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(l)}const{topic:s,response:a}=r;if(await this.isValidSessionTopic(s),!QE(a)){const{message:l}=fe("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(a)}`);throw new Error(l)}},this.isValidPing=async r=>{if(!_r(r)){const{message:a}=fe("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(a)}const{topic:s}=r;await this.isValidSessionOrPairingTopic(s)},this.isValidEmit=async r=>{if(!_r(r)){const{message:f}=fe("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(f)}const{topic:s,event:a,chainId:l}=r;await this.isValidSessionTopic(s);const{namespaces:p}=this.client.session.get(s);if(!hf(p,l)){const{message:f}=fe("MISSING_OR_INVALID",`emit() chainId: ${l}`);throw new Error(f)}if(!ZE(a)){const{message:f}=fe("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(a)}`);throw new Error(f)}if(!t3(p,l,a.name)){const{message:f}=fe("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(a)}`);throw new Error(f)}},this.isValidDisconnect=async r=>{if(!_r(r)){const{message:a}=fe("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(a)}const{topic:s}=r;await this.isValidSessionOrPairingTopic(s)},this.getVerifyContext=async(r,s)=>{const a={verified:{verifyUrl:s.verifyUrl||"",validation:"UNKNOWN",origin:s.url||""}};try{const l=await this.client.core.verify.resolve({attestationId:r,verifyUrl:s.verifyUrl});l&&(a.verified.origin=l,a.verified.validation=l===s.url?"VALID":"INVALID")}catch(l){this.client.logger.error(l)}return this.client.logger.info(`Verify context: ${JSON.stringify(a)}`),a},this.validateSessionProps=(r,s)=>{Object.values(r).forEach(a=>{if(!Gt(a,!1)){const{message:l}=fe("MISSING_OR_INVALID",`${s} must be in Record<string, string> format. Received: ${JSON.stringify(a)}`);throw new Error(l)}})}}isInitialized(){if(!this.initialized){const{message:e}=fe("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.client.core.relayer.on(At.message,async e=>{const{topic:r,message:s}=e;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(s)))return;const a=await this.client.core.crypto.decode(r,s);Cu(a)?(this.client.core.history.set(r,a),this.onRelayEventRequest({topic:r,payload:a})):Jo(a)?(await this.client.core.history.resolve(a),this.onRelayEventResponse({topic:r,payload:a})):this.onRelayEventUnknownPayload({topic:r,payload:a})})}registerExpirerEvents(){this.client.core.expirer.on(Mr.expired,async e=>{const{topic:r,id:s}=ep(e.target);if(s&&this.client.pendingRequest.keys.includes(s))return await this.deletePendingSessionRequest(s,fe("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession(r,!0),this.client.events.emit("session_expire",{topic:r})):s&&(await this.deleteProposal(s,!0),this.client.events.emit("proposal_expire",{id:s}))})}isValidPairingTopic(e){if(!Gt(e,!1)){const{message:r}=fe("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:r}=fe("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(r)}if(Ti(this.client.core.pairing.pairings.get(e).expiry)){const{message:r}=fe("EXPIRED",`pairing topic: ${e}`);throw new Error(r)}}async isValidSessionTopic(e){if(!Gt(e,!1)){const{message:r}=fe("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(r)}if(!this.client.session.keys.includes(e)){const{message:r}=fe("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(r)}if(Ti(this.client.session.get(e).expiry)){await this.deleteSession(e);const{message:r}=fe("EXPIRED",`session topic: ${e}`);throw new Error(r)}}async isValidSessionOrPairingTopic(e){if(this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(Gt(e,!1)){const{message:r}=fe("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(r)}else{const{message:r}=fe("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(r)}}async isValidProposalId(e){if(!YE(e)){const{message:r}=fe("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(r)}if(!this.client.proposal.keys.includes(e)){const{message:r}=fe("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(r)}if(Ti(this.client.proposal.get(e).expiry)){await this.deleteProposal(e);const{message:r}=fe("EXPIRED",`proposal id: ${e}`);throw new Error(r)}}}class r5 extends Qo{constructor(e,r){super(e,r,k2,Pu),this.core=e,this.logger=r}}class i5 extends Qo{constructor(e,r){super(e,r,V2,Pu),this.core=e,this.logger=r}}class n5 extends Qo{constructor(e,r){super(e,r,G2,Pu,s=>s.id),this.core=e,this.logger=r}}let s5=class Mp extends T3{constructor(e){super(e),this.protocol=Fp,this.version=Lp,this.name=$c.name,this.events=new xr.EventEmitter,this.on=(s,a)=>this.events.on(s,a),this.once=(s,a)=>this.events.once(s,a),this.off=(s,a)=>this.events.off(s,a),this.removeListener=(s,a)=>this.events.removeListener(s,a),this.removeAllListeners=s=>this.events.removeAllListeners(s),this.connect=async s=>{try{return await this.engine.connect(s)}catch(a){throw this.logger.error(a.message),a}},this.pair=async s=>{try{return await this.engine.pair(s)}catch(a){throw this.logger.error(a.message),a}},this.approve=async s=>{try{return await this.engine.approve(s)}catch(a){throw this.logger.error(a.message),a}},this.reject=async s=>{try{return await this.engine.reject(s)}catch(a){throw this.logger.error(a.message),a}},this.update=async s=>{try{return await this.engine.update(s)}catch(a){throw this.logger.error(a.message),a}},this.extend=async s=>{try{return await this.engine.extend(s)}catch(a){throw this.logger.error(a.message),a}},this.request=async s=>{try{return await this.engine.request(s)}catch(a){throw this.logger.error(a.message),a}},this.respond=async s=>{try{return await this.engine.respond(s)}catch(a){throw this.logger.error(a.message),a}},this.ping=async s=>{try{return await this.engine.ping(s)}catch(a){throw this.logger.error(a.message),a}},this.emit=async s=>{try{return await this.engine.emit(s)}catch(a){throw this.logger.error(a.message),a}},this.disconnect=async s=>{try{return await this.engine.disconnect(s)}catch(a){throw this.logger.error(a.message),a}},this.find=s=>{try{return this.engine.find(s)}catch(a){throw this.logger.error(a.message),a}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(s){throw this.logger.error(s.message),s}},this.name=(e==null?void 0:e.name)||$c.name,this.metadata=(e==null?void 0:e.metadata)||fE();const r=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Ze.pino(Ze.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||$c.logger}));this.core=(e==null?void 0:e.core)||new H2(e),this.logger=Ze.generateChildLogger(r,this.name),this.session=new i5(this.core,this.logger),this.proposal=new r5(this.core,this.logger),this.pendingRequest=new n5(this.core,this.logger),this.engine=new t5(this)}static async init(e){const r=new Mp(e);return await r.initialize(),r}get context(){return Ze.getLoggerContext(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};var o5=_b();const td=cu(o5),a5={Accept:"application/json","Content-Type":"application/json"},c5="POST",rd={headers:a5,method:c5},id=10;class on{constructor(e,r=!1){if(this.url=e,this.disableProviderPing=r,this.events=new xr.EventEmitter,this.isAvailable=!1,this.registering=!1,!Nf(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=r}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e,r){this.isAvailable||await this.register();try{const s=gs(e),l=await(await td(this.url,Object.assign(Object.assign({},rd),{body:s}))).json();this.onPayload({data:l})}catch(s){this.onError(e.id,s)}}async register(e=this.url){if(!Nf(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((s,a)=>{this.events.once("register_error",l=>{this.resetMaxListeners(),a(l)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return a(new Error("HTTP connection is missing or invalid"));s()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const r=gs({id:1,jsonrpc:"2.0",method:"test",params:[]});await td(e,Object.assign(Object.assign({},rd),{body:r}))}this.onOpen()}catch(r){const s=this.parseError(r);throw this.events.emit("register_error",s),this.onClose(),s}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?Du(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const s=this.parseError(r),a=s.message||s.toString(),l=Yo(e,a);this.events.emit("payload",l)}parseError(e,r=this.url){return pp(e,r,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>id&&this.events.setMaxListeners(id)}}const nd="error",u5="wss://relay.walletconnect.com",h5="wc",l5="universal_provider",sd=`${h5}@2:${l5}:`,f5="https://rpc.walletconnect.com/v1",Li={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var fs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},iu={exports:{}};/**
* @license
* Lodash <https://lodash.com/>
* Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
* Released under MIT license <https://lodash.com/license>
* Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
* Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
*/(function(n,e){(function(){var r,s="4.17.21",a=200,l="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",p="Expected a function",f="Invalid `variable` option passed into `_.template`",g="__lodash_hash_undefined__",w=500,I="__lodash_placeholder__",R=1,B=2,F=4,L=1,k=2,W=1,ae=2,T=4,U=8,E=16,C=32,b=64,c=128,y=256,J=512,x=30,z="...",K=800,Z=16,S=1,A=2,ie=3,ee=1/0,X=9007199254740991,G=17976931348623157e292,Y=0/0,se=4294967295,ve=se-1,ce=se>>>1,_e=[["ary",c],["bind",W],["bindKey",ae],["curry",U],["curryRight",E],["flip",J],["partial",C],["partialRight",b],["rearg",y]],he="[object Arguments]",be="[object Array]",H="[object AsyncFunction]",q="[object Boolean]",N="[object Date]",h="[object DOMException]",O="[object Error]",ue="[object Function]",de="[object GeneratorFunction]",Ie="[object Map]",Be="[object Number]",ke="[object Null]",$e="[object Object]",gt="[object Promise]",vt="[object Proxy]",je="[object RegExp]",xe="[object Set]",Re="[object String]",Fe="[object Symbol]",ze="[object Undefined]",Ce="[object WeakMap]",Le="[object WeakSet]",Se="[object ArrayBuffer]",Ae="[object DataView]",He="[object Float32Array]",Oe="[object Float64Array]",Ve="[object Int8Array]",Ge="[object Int16Array]",et="[object Int32Array]",tt="[object Uint8Array]",Je="[object Uint8ClampedArray]",tr="[object Uint16Array]",fr="[object Uint32Array]",Gr=/\b__p \+= '';/g,rr=/\b(__p \+=) '' \+/g,ni=/(__e\(.*?\)|\b__t\)) \+\n'';/g,mi=/&(?:amp|lt|gt|quot|#39);/g,Ui=/[&<>"']/g,Et=RegExp(mi.source),yt=RegExp(Ui.source),Dt=/<%-([\s\S]+?)%>/g,St=/<%([\s\S]+?)%>/g,mt=/<%=([\s\S]+?)%>/g,_t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ut=/^\w*$/,$t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,It=/[\\^$.*+?()[\]{}|]/g,Mt=RegExp(It.source),xt=/^\s+/,Pt=/\s/,Ot=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,lt=/\{\n\/\* \[wrapped with (.+)\] \*/,jt=/,? & /,zt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Zo=/[()=,{}\[\]\/\s]/,ea=/\\(\\)?/g,ta=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Cr=/\w*$/,ra=/^[-+]0x[0-9a-f]+$/i,ia=/^0b[01]+$/i,na=/^\[object .+?Constructor\]$/,sa=/^0o[0-7]+$/i,oa=/^(?:0|[1-9]\d*)$/,si=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,an=/($^)/,aa=/['\n\r\u2028\u2029\\]/g,cn="\\ud800-\\udfff",ca="\\u0300-\\u036f",ua="\\ufe20-\\ufe2f",un="\\u20d0-\\u20ff",Es=ca+ua+un,Ds="\\u2700-\\u27bf",qr="a-z\\xdf-\\xf6\\xf8-\\xff",ha="\\xac\\xb1\\xd7\\xf7",la="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",fa="\\u2000-\\u206f",da=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ss="A-Z\\xc0-\\xd6\\xd8-\\xde",Is="\\ufe0e\\ufe0f",$i=ha+la+fa+da,Un="['’]",Mi="["+cn+"]",$n="["+$i+"]",ji="["+Es+"]",xs="\\d+",pa="["+Ds+"]",Os="["+qr+"]",Cs="[^"+cn+$i+xs+Ds+qr+Ss+"]",hn="\\ud83c[\\udffb-\\udfff]",ga="(?:"+ji+"|"+hn+")",As="[^"+cn+"]",ln="(?:\\ud83c[\\udde6-\\uddff]){2}",wi="[\\ud800-\\udbff][\\udc00-\\udfff]",mr="["+Ss+"]",Ps="\\u200d",Ts="(?:"+Os+"|"+Cs+")",Yr="(?:"+mr+"|"+Cs+")",Ns="(?:"+Un+"(?:d|ll|m|re|s|t|ve))?",Rs="(?:"+Un+"(?:D|LL|M|RE|S|T|VE))?",Fs=ga+"?",Ls="["+Is+"]?",va="(?:"+Ps+"(?:"+[As,ln,wi].join("|")+")"+Ls+Fs+")*",oi="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Us="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",$s=Ls+Fs+va,fn="(?:"+[pa,ln,wi].join("|")+")"+$s,ya="(?:"+[As+ji+"?",ji,ln,wi,Mi].join("|")+")",Mn=RegExp(Un,"g"),_a=RegExp(ji,"g"),dn=RegExp(hn+"(?="+hn+")|"+ya+$s,"g"),Ms=RegExp([mr+"?"+Os+"+"+Ns+"(?="+[$n,mr,"$"].join("|")+")",Yr+"+"+Rs+"(?="+[$n,mr+Ts,"$"].join("|")+")",mr+"?"+Ts+"+"+Ns,mr+"+"+Rs,Us,oi,xs,fn].join("|"),"g"),js=RegExp("["+Ps+cn+Es+Is+"]"),zi=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,zs=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ba=-1,at={};at[He]=at[Oe]=at[Ve]=at[Ge]=at[et]=at[tt]=at[Je]=at[tr]=at[fr]=!0,at[he]=at[be]=at[Se]=at[q]=at[Ae]=at[N]=at[O]=at[ue]=at[Ie]=at[Be]=at[$e]=at[je]=at[xe]=at[Re]=at[Ce]=!1;var st={};st[he]=st[be]=st[Se]=st[Ae]=st[q]=st[N]=st[He]=st[Oe]=st[Ve]=st[Ge]=st[et]=st[Ie]=st[Be]=st[$e]=st[je]=st[xe]=st[Re]=st[Fe]=st[tt]=st[Je]=st[tr]=st[fr]=!0,st[O]=st[ue]=st[Ce]=!1;var m={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},$={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ne={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},pe={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ct=parseFloat,Te=parseInt,dt=typeof fs=="object"&&fs&&fs.Object===Object&&fs,qt=typeof self=="object"&&self&&self.Object===Object&&self,Xe=dt||qt||Function("return this")(),ut=e&&!e.nodeType&&e,Tt=ut&&!0&&n&&!n.nodeType&&n,dr=Tt&&Tt.exports===ut,Bt=dr&&dt.process,pt=function(){try{var M=Tt&&Tt.require&&Tt.require("util").types;return M||Bt&&Bt.binding&&Bt.binding("util")}catch{}}(),ir=pt&&pt.isArrayBuffer,Br=pt&&pt.isDate,Ar=pt&&pt.isMap,Jr=pt&&pt.isRegExp,jn=pt&&pt.isSet,qi=pt&&pt.isTypedArray;function Vt(M,Q,V){switch(V.length){case 0:return M.call(Q);case 1:return M.call(Q,V[0]);case 2:return M.call(Q,V[0],V[1]);case 3:return M.call(Q,V[0],V[1],V[2])}return M.apply(Q,V)}function zp(M,Q,V,ge){for(var Pe=-1,rt=M==null?0:M.length;++Pe<rt;){var Kt=M[Pe];Q(ge,Kt,V(Kt),M)}return ge}function Pr(M,Q){for(var V=-1,ge=M==null?0:M.length;++V<ge&&Q(M[V],V,M)!==!1;);return M}function qp(M,Q){for(var V=M==null?0:M.length;V--&&Q(M[V],V,M)!==!1;);return M}function Ru(M,Q){for(var V=-1,ge=M==null?0:M.length;++V<ge;)if(!Q(M[V],V,M))return!1;return!0}function Ei(M,Q){for(var V=-1,ge=M==null?0:M.length,Pe=0,rt=[];++V<ge;){var Kt=M[V];Q(Kt,V,M)&&(rt[Pe++]=Kt)}return rt}function qs(M,Q){var V=M==null?0:M.length;return!!V&&pn(M,Q,0)>-1}function ma(M,Q,V){for(var ge=-1,Pe=M==null?0:M.length;++ge<Pe;)if(V(Q,M[ge]))return!0;return!1}function bt(M,Q){for(var V=-1,ge=M==null?0:M.length,Pe=Array(ge);++V<ge;)Pe[V]=Q(M[V],V,M);return Pe}function Di(M,Q){for(var V=-1,ge=Q.length,Pe=M.length;++V<ge;)M[Pe+V]=Q[V];return M}function wa(M,Q,V,ge){var Pe=-1,rt=M==null?0:M.length;for(ge&&rt&&(V=M[++Pe]);++Pe<rt;)V=Q(V,M[Pe],Pe,M);return V}function Bp(M,Q,V,ge){var Pe=M==null?0:M.length;for(ge&&Pe&&(V=M[--Pe]);Pe--;)V=Q(V,M[Pe],Pe,M);return V}function Ea(M,Q){for(var V=-1,ge=M==null?0:M.length;++V<ge;)if(Q(M[V],V,M))return!0;return!1}var Hp=Da("length");function Kp(M){return M.split("")}function kp(M){return M.match(zt)||[]}function Fu(M,Q,V){var ge;return V(M,function(Pe,rt,Kt){if(Q(Pe,rt,Kt))return ge=rt,!1}),ge}function Bs(M,Q,V,ge){for(var Pe=M.length,rt=V+(ge?1:-1);ge?rt--:++rt<Pe;)if(Q(M[rt],rt,M))return rt;return-1}function pn(M,Q,V){return Q===Q?ig(M,Q,V):Bs(M,Lu,V)}function Vp(M,Q,V,ge){for(var Pe=V-1,rt=M.length;++Pe<rt;)if(ge(M[Pe],Q))return Pe;return-1}function Lu(M){return M!==M}function Uu(M,Q){var V=M==null?0:M.length;return V?Ia(M,Q)/V:Y}function Da(M){return function(Q){return Q==null?r:Q[M]}}function Sa(M){return function(Q){return M==null?r:M[Q]}}function $u(M,Q,V,ge,Pe){return Pe(M,function(rt,Kt,ht){V=ge?(ge=!1,rt):Q(V,rt,Kt,ht)}),V}function Wp(M,Q){var V=M.length;for(M.sort(Q);V--;)M[V]=M[V].value;return M}function Ia(M,Q){for(var V,ge=-1,Pe=M.length;++ge<Pe;){var rt=Q(M[ge]);rt!==r&&(V=V===r?rt:V+rt)}return V}function xa(M,Q){for(var V=-1,ge=Array(M);++V<M;)ge[V]=Q(V);return ge}function Gp(M,Q){return bt(Q,function(V){return[V,M[V]]})}function Mu(M){return M&&M.slice(0,Bu(M)+1).replace(xt,"")}function wr(M){return function(Q){return M(Q)}}function Oa(M,Q){return bt(Q,function(V){return M[V]})}function zn(M,Q){return M.has(Q)}function ju(M,Q){for(var V=-1,ge=M.length;++V<ge&&pn(Q,M[V],0)>-1;);return V}function zu(M,Q){for(var V=M.length;V--&&pn(Q,M[V],0)>-1;);return V}function Yp(M,Q){for(var V=M.length,ge=0;V--;)M[V]===Q&&++ge;return ge}var Jp=Sa(m),Xp=Sa($);function Qp(M){return"\\"+pe[M]}function Zp(M,Q){return M==null?r:M[Q]}function gn(M){return js.test(M)}function eg(M){return zi.test(M)}function tg(M){for(var Q,V=[];!(Q=M.next()).done;)V.push(Q.value);return V}function Ca(M){var Q=-1,V=Array(M.size);return M.forEach(function(ge,Pe){V[++Q]=[Pe,ge]}),V}function qu(M,Q){return function(V){return M(Q(V))}}function Si(M,Q){for(var V=-1,ge=M.length,Pe=0,rt=[];++V<ge;){var Kt=M[V];(Kt===Q||Kt===I)&&(M[V]=I,rt[Pe++]=V)}return rt}function Hs(M){var Q=-1,V=Array(M.size);return M.forEach(function(ge){V[++Q]=ge}),V}function rg(M){var Q=-1,V=Array(M.size);return M.forEach(function(ge){V[++Q]=[ge,ge]}),V}function ig(M,Q,V){for(var ge=V-1,Pe=M.length;++ge<Pe;)if(M[ge]===Q)return ge;return-1}function ng(M,Q,V){for(var ge=V+1;ge--;)if(M[ge]===Q)return ge;return ge}function vn(M){return gn(M)?og(M):Hp(M)}function Hr(M){return gn(M)?ag(M):Kp(M)}function Bu(M){for(var Q=M.length;Q--&&Pt.test(M.charAt(Q)););return Q}var sg=Sa(ne);function og(M){for(var Q=dn.lastIndex=0;dn.test(M);)++Q;return Q}function ag(M){return M.match(dn)||[]}function cg(M){return M.match(Ms)||[]}var ug=function M(Q){Q=Q==null?Xe:yn.defaults(Xe.Object(),Q,yn.pick(Xe,zs));var V=Q.Array,ge=Q.Date,Pe=Q.Error,rt=Q.Function,Kt=Q.Math,ht=Q.Object,Aa=Q.RegExp,hg=Q.String,Tr=Q.TypeError,Ks=V.prototype,lg=rt.prototype,_n=ht.prototype,ks=Q["__core-js_shared__"],Vs=lg.toString,nt=_n.hasOwnProperty,fg=0,Hu=function(){var t=/[^.]+$/.exec(ks&&ks.keys&&ks.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Ws=_n.toString,dg=Vs.call(ht),pg=Xe._,gg=Aa("^"+Vs.call(nt).replace(It,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Gs=dr?Q.Buffer:r,Ii=Q.Symbol,Ys=Q.Uint8Array,Ku=Gs?Gs.allocUnsafe:r,Js=qu(ht.getPrototypeOf,ht),ku=ht.create,Vu=_n.propertyIsEnumerable,Xs=Ks.splice,Wu=Ii?Ii.isConcatSpreadable:r,qn=Ii?Ii.iterator:r,Bi=Ii?Ii.toStringTag:r,Qs=function(){try{var t=Wi(ht,"defineProperty");return t({},"",{}),t}catch{}}(),vg=Q.clearTimeout!==Xe.clearTimeout&&Q.clearTimeout,yg=ge&&ge.now!==Xe.Date.now&&ge.now,_g=Q.setTimeout!==Xe.setTimeout&&Q.setTimeout,Zs=Kt.ceil,eo=Kt.floor,Pa=ht.getOwnPropertySymbols,bg=Gs?Gs.isBuffer:r,Gu=Q.isFinite,mg=Ks.join,wg=qu(ht.keys,ht),kt=Kt.max,Qt=Kt.min,Eg=ge.now,Dg=Q.parseInt,Yu=Kt.random,Sg=Ks.reverse,Ta=Wi(Q,"DataView"),Bn=Wi(Q,"Map"),Na=Wi(Q,"Promise"),bn=Wi(Q,"Set"),Hn=Wi(Q,"WeakMap"),Kn=Wi(ht,"create"),to=Hn&&new Hn,mn={},Ig=Gi(Ta),xg=Gi(Bn),Og=Gi(Na),Cg=Gi(bn),Ag=Gi(Hn),ro=Ii?Ii.prototype:r,kn=ro?ro.valueOf:r,Ju=ro?ro.toString:r;function v(t){if(Ct(t)&&!Ne(t)&&!(t instanceof Ye)){if(t instanceof Nr)return t;if(nt.call(t,"__wrapped__"))return Xh(t)}return new Nr(t)}var wn=function(){function t(){}return function(i){if(!wt(i))return{};if(ku)return ku(i);t.prototype=i;var o=new t;return t.prototype=r,o}}();function io(){}function Nr(t,i){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!i,this.__index__=0,this.__values__=r}v.templateSettings={escape:Dt,evaluate:St,interpolate:mt,variable:"",imports:{_:v}},v.prototype=io.prototype,v.prototype.constructor=v,Nr.prototype=wn(io.prototype),Nr.prototype.constructor=Nr;function Ye(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=se,this.__views__=[]}function Pg(){var t=new Ye(this.__wrapped__);return t.__actions__=pr(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=pr(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=pr(this.__views__),t}function Tg(){if(this.__filtered__){var t=new Ye(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function Ng(){var t=this.__wrapped__.value(),i=this.__dir__,o=Ne(t),u=i<0,d=o?t.length:0,_=K0(0,d,this.__views__),D=_.start,P=_.end,j=P-D,te=u?P:D-1,re=this.__iteratees__,oe=re.length,le=0,ye=Qt(j,this.__takeCount__);if(!o||!u&&d==j&&ye==j)return mh(t,this.__actions__);var Ee=[];e:for(;j--&&le<ye;){te+=i;for(var qe=-1,De=t[te];++qe<oe;){var We=re[qe],Qe=We.iteratee,Sr=We.type,or=Qe(De);if(Sr==A)De=or;else if(!or){if(Sr==S)continue e;break e}}Ee[le++]=De}return Ee}Ye.prototype=wn(io.prototype),Ye.prototype.constructor=Ye;function Hi(t){var i=-1,o=t==null?0:t.length;for(this.clear();++i<o;){var u=t[i];this.set(u[0],u[1])}}function Rg(){this.__data__=Kn?Kn(null):{},this.size=0}function Fg(t){var i=this.has(t)&&delete this.__data__[t];return this.size-=i?1:0,i}function Lg(t){var i=this.__data__;if(Kn){var o=i[t];return o===g?r:o}return nt.call(i,t)?i[t]:r}function Ug(t){var i=this.__data__;return Kn?i[t]!==r:nt.call(i,t)}function $g(t,i){var o=this.__data__;return this.size+=this.has(t)?0:1,o[t]=Kn&&i===r?g:i,this}Hi.prototype.clear=Rg,Hi.prototype.delete=Fg,Hi.prototype.get=Lg,Hi.prototype.has=Ug,Hi.prototype.set=$g;function ai(t){var i=-1,o=t==null?0:t.length;for(this.clear();++i<o;){var u=t[i];this.set(u[0],u[1])}}function Mg(){this.__data__=[],this.size=0}function jg(t){var i=this.__data__,o=no(i,t);if(o<0)return!1;var u=i.length-1;return o==u?i.pop():Xs.call(i,o,1),--this.size,!0}function zg(t){var i=this.__data__,o=no(i,t);return o<0?r:i[o][1]}function qg(t){return no(this.__data__,t)>-1}function Bg(t,i){var o=this.__data__,u=no(o,t);return u<0?(++this.size,o.push([t,i])):o[u][1]=i,this}ai.prototype.clear=Mg,ai.prototype.delete=jg,ai.prototype.get=zg,ai.prototype.has=qg,ai.prototype.set=Bg;function ci(t){var i=-1,o=t==null?0:t.length;for(this.clear();++i<o;){var u=t[i];this.set(u[0],u[1])}}function Hg(){this.size=0,this.__data__={hash:new Hi,map:new(Bn||ai),string:new Hi}}function Kg(t){var i=yo(this,t).delete(t);return this.size-=i?1:0,i}function kg(t){return yo(this,t).get(t)}function Vg(t){return yo(this,t).has(t)}function Wg(t,i){var o=yo(this,t),u=o.size;return o.set(t,i),this.size+=o.size==u?0:1,this}ci.prototype.clear=Hg,ci.prototype.delete=Kg,ci.prototype.get=kg,ci.prototype.has=Vg,ci.prototype.set=Wg;function Ki(t){var i=-1,o=t==null?0:t.length;for(this.__data__=new ci;++i<o;)this.add(t[i])}function Gg(t){return this.__data__.set(t,g),this}function Yg(t){return this.__data__.has(t)}Ki.prototype.add=Ki.prototype.push=Gg,Ki.prototype.has=Yg;function Kr(t){var i=this.__data__=new ai(t);this.size=i.size}function Jg(){this.__data__=new ai,this.size=0}function Xg(t){var i=this.__data__,o=i.delete(t);return this.size=i.size,o}function Qg(t){return this.__data__.get(t)}function Zg(t){return this.__data__.has(t)}function e0(t,i){var o=this.__data__;if(o instanceof ai){var u=o.__data__;if(!Bn||u.length<a-1)return u.push([t,i]),this.size=++o.size,this;o=this.__data__=new ci(u)}return o.set(t,i),this.size=o.size,this}Kr.prototype.clear=Jg,Kr.prototype.delete=Xg,Kr.prototype.get=Qg,Kr.prototype.has=Zg,Kr.prototype.set=e0;function Xu(t,i){var o=Ne(t),u=!o&&Yi(t),d=!o&&!u&&Pi(t),_=!o&&!u&&!d&&In(t),D=o||u||d||_,P=D?xa(t.length,hg):[],j=P.length;for(var te in t)(i||nt.call(t,te))&&!(D&&(te=="length"||d&&(te=="offset"||te=="parent")||_&&(te=="buffer"||te=="byteLength"||te=="byteOffset")||fi(te,j)))&&P.push(te);return P}function Qu(t){var i=t.length;return i?t[Ha(0,i-1)]:r}function t0(t,i){return _o(pr(t),ki(i,0,t.length))}function r0(t){return _o(pr(t))}function Ra(t,i,o){(o!==r&&!kr(t[i],o)||o===r&&!(i in t))&&ui(t,i,o)}function Vn(t,i,o){var u=t[i];(!(nt.call(t,i)&&kr(u,o))||o===r&&!(i in t))&&ui(t,i,o)}function no(t,i){for(var o=t.length;o--;)if(kr(t[o][0],i))return o;return-1}function i0(t,i,o,u){return xi(t,function(d,_,D){i(u,d,o(d),D)}),u}function Zu(t,i){return t&&Qr(i,Wt(i),t)}function n0(t,i){return t&&Qr(i,vr(i),t)}function ui(t,i,o){i=="__proto__"&&Qs?Qs(t,i,{configurable:!0,enumerable:!0,value:o,writable:!0}):t[i]=o}function Fa(t,i){for(var o=-1,u=i.length,d=V(u),_=t==null;++o<u;)d[o]=_?r:pc(t,i[o]);return d}function ki(t,i,o){return t===t&&(o!==r&&(t=t<=o?t:o),i!==r&&(t=t>=i?t:i)),t}function Rr(t,i,o,u,d,_){var D,P=i&R,j=i&B,te=i&F;if(o&&(D=d?o(t,u,d,_):o(t)),D!==r)return D;if(!wt(t))return t;var re=Ne(t);if(re){if(D=V0(t),!P)return pr(t,D)}else{var oe=Zt(t),le=oe==ue||oe==de;if(Pi(t))return Dh(t,P);if(oe==$e||oe==he||le&&!d){if(D=j||le?{}:Bh(t),!P)return j?L0(t,n0(D,t)):F0(t,Zu(D,t))}else{if(!st[oe])return d?t:{};D=W0(t,oe,P)}}_||(_=new Kr);var ye=_.get(t);if(ye)return ye;_.set(t,D),yl(t)?t.forEach(function(De){D.add(Rr(De,i,o,De,t,_))}):gl(t)&&t.forEach(function(De,We){D.set(We,Rr(De,i,o,We,t,_))});var Ee=te?j?ec:Za:j?vr:Wt,qe=re?r:Ee(t);return Pr(qe||t,function(De,We){qe&&(We=De,De=t[We]),Vn(D,We,Rr(De,i,o,We,t,_))}),D}function s0(t){var i=Wt(t);return function(o){return eh(o,t,i)}}function eh(t,i,o){var u=o.length;if(t==null)return!u;for(t=ht(t);u--;){var d=o[u],_=i[d],D=t[d];if(D===r&&!(d in t)||!_(D))return!1}return!0}function th(t,i,o){if(typeof t!="function")throw new Tr(p);return Zn(function(){t.apply(r,o)},i)}function Wn(t,i,o,u){var d=-1,_=qs,D=!0,P=t.length,j=[],te=i.length;if(!P)return j;o&&(i=bt(i,wr(o))),u?(_=ma,D=!1):i.length>=a&&(_=zn,D=!1,i=new Ki(i));e:for(;++d<P;){var re=t[d],oe=o==null?re:o(re);if(re=u||re!==0?re:0,D&&oe===oe){for(var le=te;le--;)if(i[le]===oe)continue e;j.push(re)}else _(i,oe,u)||j.push(re)}return j}var xi=Ch(Xr),rh=Ch(Ua,!0);function o0(t,i){var o=!0;return xi(t,function(u,d,_){return o=!!i(u,d,_),o}),o}function so(t,i,o){for(var u=-1,d=t.length;++u<d;){var _=t[u],D=i(_);if(D!=null&&(P===r?D===D&&!Dr(D):o(D,P)))var P=D,j=_}return j}function a0(t,i,o,u){var d=t.length;for(o=Me(o),o<0&&(o=-o>d?0:d+o),u=u===r||u>d?d:Me(u),u<0&&(u+=d),u=o>u?0:bl(u);o<u;)t[o++]=i;return t}function ih(t,i){var o=[];return xi(t,function(u,d,_){i(u,d,_)&&o.push(u)}),o}function Yt(t,i,o,u,d){var _=-1,D=t.length;for(o||(o=Y0),d||(d=[]);++_<D;){var P=t[_];i>0&&o(P)?i>1?Yt(P,i-1,o,u,d):Di(d,P):u||(d[d.length]=P)}return d}var La=Ah(),nh=Ah(!0);function Xr(t,i){return t&&La(t,i,Wt)}function Ua(t,i){return t&&nh(t,i,Wt)}function oo(t,i){return Ei(i,function(o){return di(t[o])})}function Vi(t,i){i=Ci(i,t);for(var o=0,u=i.length;t!=null&&o<u;)t=t[Zr(i[o++])];return o&&o==u?t:r}function sh(t,i,o){var u=i(t);return Ne(t)?u:Di(u,o(t))}function nr(t){return t==null?t===r?ze:ke:Bi&&Bi in ht(t)?H0(t):r1(t)}function $a(t,i){return t>i}function c0(t,i){return t!=null&&nt.call(t,i)}function u0(t,i){return t!=null&&i in ht(t)}function h0(t,i,o){return t>=Qt(i,o)&&t<kt(i,o)}function Ma(t,i,o){for(var u=o?ma:qs,d=t[0].length,_=t.length,D=_,P=V(_),j=1/0,te=[];D--;){var re=t[D];D&&i&&(re=bt(re,wr(i))),j=Qt(re.length,j),P[D]=!o&&(i||d>=120&&re.length>=120)?new Ki(D&&re):r}re=t[0];var oe=-1,le=P[0];e:for(;++oe<d&&te.length<j;){var ye=re[oe],Ee=i?i(ye):ye;if(ye=o||ye!==0?ye:0,!(le?zn(le,Ee):u(te,Ee,o))){for(D=_;--D;){var qe=P[D];if(!(qe?zn(qe,Ee):u(t[D],Ee,o)))continue e}le&&le.push(Ee),te.push(ye)}}return te}function l0(t,i,o,u){return Xr(t,function(d,_,D){i(u,o(d),_,D)}),u}function Gn(t,i,o){i=Ci(i,t),t=Vh(t,i);var u=t==null?t:t[Zr(Lr(i))];return u==null?r:Vt(u,t,o)}function oh(t){return Ct(t)&&nr(t)==he}function f0(t){return Ct(t)&&nr(t)==Se}function d0(t){return Ct(t)&&nr(t)==N}function Yn(t,i,o,u,d){return t===i?!0:t==null||i==null||!Ct(t)&&!Ct(i)?t!==t&&i!==i:p0(t,i,o,u,Yn,d)}function p0(t,i,o,u,d,_){var D=Ne(t),P=Ne(i),j=D?be:Zt(t),te=P?be:Zt(i);j=j==he?$e:j,te=te==he?$e:te;var re=j==$e,oe=te==$e,le=j==te;if(le&&Pi(t)){if(!Pi(i))return!1;D=!0,re=!1}if(le&&!re)return _||(_=new Kr),D||In(t)?jh(t,i,o,u,d,_):q0(t,i,j,o,u,d,_);if(!(o&L)){var ye=re&&nt.call(t,"__wrapped__"),Ee=oe&&nt.call(i,"__wrapped__");if(ye||Ee){var qe=ye?t.value():t,De=Ee?i.value():i;return _||(_=new Kr),d(qe,De,o,u,_)}}return le?(_||(_=new Kr),B0(t,i,o,u,d,_)):!1}function g0(t){return Ct(t)&&Zt(t)==Ie}function ja(t,i,o,u){var d=o.length,_=d,D=!u;if(t==null)return!_;for(t=ht(t);d--;){var P=o[d];if(D&&P[2]?P[1]!==t[P[0]]:!(P[0]in t))return!1}for(;++d<_;){P=o[d];var j=P[0],te=t[j],re=P[1];if(D&&P[2]){if(te===r&&!(j in t))return!1}else{var oe=new Kr;if(u)var le=u(te,re,j,t,i,oe);if(!(le===r?Yn(re,te,L|k,u,oe):le))return!1}}return!0}function ah(t){if(!wt(t)||X0(t))return!1;var i=di(t)?gg:na;return i.test(Gi(t))}function v0(t){return Ct(t)&&nr(t)==je}function y0(t){return Ct(t)&&Zt(t)==xe}function _0(t){return Ct(t)&&So(t.length)&&!!at[nr(t)]}function ch(t){return typeof t=="function"?t:t==null?yr:typeof t=="object"?Ne(t)?lh(t[0],t[1]):hh(t):Pl(t)}function za(t){if(!Qn(t))return wg(t);var i=[];for(var o in ht(t))nt.call(t,o)&&o!="constructor"&&i.push(o);return i}function b0(t){if(!wt(t))return t1(t);var i=Qn(t),o=[];for(var u in t)u=="constructor"&&(i||!nt.call(t,u))||o.push(u);return o}function qa(t,i){return t<i}function uh(t,i){var o=-1,u=gr(t)?V(t.length):[];return xi(t,function(d,_,D){u[++o]=i(d,_,D)}),u}function hh(t){var i=rc(t);return i.length==1&&i[0][2]?Kh(i[0][0],i[0][1]):function(o){return o===t||ja(o,t,i)}}function lh(t,i){return nc(t)&&Hh(i)?Kh(Zr(t),i):function(o){var u=pc(o,t);return u===r&&u===i?gc(o,t):Yn(i,u,L|k)}}function ao(t,i,o,u,d){t!==i&&La(i,function(_,D){if(d||(d=new Kr),wt(_))m0(t,i,D,o,ao,u,d);else{var P=u?u(oc(t,D),_,D+"",t,i,d):r;P===r&&(P=_),Ra(t,D,P)}},vr)}function m0(t,i,o,u,d,_,D){var P=oc(t,o),j=oc(i,o),te=D.get(j);if(te){Ra(t,o,te);return}var re=_?_(P,j,o+"",t,i,D):r,oe=re===r;if(oe){var le=Ne(j),ye=!le&&Pi(j),Ee=!le&&!ye&&In(j);re=j,le||ye||Ee?Ne(P)?re=P:Nt(P)?re=pr(P):ye?(oe=!1,re=Dh(j,!0)):Ee?(oe=!1,re=Sh(j,!0)):re=[]:es(j)||Yi(j)?(re=P,Yi(P)?re=ml(P):(!wt(P)||di(P))&&(re=Bh(j))):oe=!1}oe&&(D.set(j,re),d(re,j,u,_,D),D.delete(j)),Ra(t,o,re)}function fh(t,i){var o=t.length;if(o)return i+=i<0?o:0,fi(i,o)?t[i]:r}function dh(t,i,o){i.length?i=bt(i,function(_){return Ne(_)?function(D){return Vi(D,_.length===1?_[0]:_)}:_}):i=[yr];var u=-1;i=bt(i,wr(we()));var d=uh(t,function(_,D,P){var j=bt(i,function(te){return te(_)});return{criteria:j,index:++u,value:_}});return Wp(d,function(_,D){return R0(_,D,o)})}function w0(t,i){return ph(t,i,function(o,u){return gc(t,u)})}function ph(t,i,o){for(var u=-1,d=i.length,_={};++u<d;){var D=i[u],P=Vi(t,D);o(P,D)&&Jn(_,Ci(D,t),P)}return _}function E0(t){return function(i){return Vi(i,t)}}function Ba(t,i,o,u){var d=u?Vp:pn,_=-1,D=i.length,P=t;for(t===i&&(i=pr(i)),o&&(P=bt(t,wr(o)));++_<D;)for(var j=0,te=i[_],re=o?o(te):te;(j=d(P,re,j,u))>-1;)P!==t&&Xs.call(P,j,1),Xs.call(t,j,1);return t}function gh(t,i){for(var o=t?i.length:0,u=o-1;o--;){var d=i[o];if(o==u||d!==_){var _=d;fi(d)?Xs.call(t,d,1):Va(t,d)}}return t}function Ha(t,i){return t+eo(Yu()*(i-t+1))}function D0(t,i,o,u){for(var d=-1,_=kt(Zs((i-t)/(o||1)),0),D=V(_);_--;)D[u?_:++d]=t,t+=o;return D}function Ka(t,i){var o="";if(!t||i<1||i>X)return o;do i%2&&(o+=t),i=eo(i/2),i&&(t+=t);while(i);return o}function Ke(t,i){return ac(kh(t,i,yr),t+"")}function S0(t){return Qu(xn(t))}function I0(t,i){var o=xn(t);return _o(o,ki(i,0,o.length))}function Jn(t,i,o,u){if(!wt(t))return t;i=Ci(i,t);for(var d=-1,_=i.length,D=_-1,P=t;P!=null&&++d<_;){var j=Zr(i[d]),te=o;if(j==="__proto__"||j==="constructor"||j==="prototype")return t;if(d!=D){var re=P[j];te=u?u(re,j,P):r,te===r&&(te=wt(re)?re:fi(i[d+1])?[]:{})}Vn(P,j,te),P=P[j]}return t}var vh=to?function(t,i){return to.set(t,i),t}:yr,x0=Qs?function(t,i){return Qs(t,"toString",{configurable:!0,enumerable:!1,value:yc(i),writable:!0})}:yr;function O0(t){return _o(xn(t))}function Fr(t,i,o){var u=-1,d=t.length;i<0&&(i=-i>d?0:d+i),o=o>d?d:o,o<0&&(o+=d),d=i>o?0:o-i>>>0,i>>>=0;for(var _=V(d);++u<d;)_[u]=t[u+i];return _}function C0(t,i){var o;return xi(t,function(u,d,_){return o=i(u,d,_),!o}),!!o}function co(t,i,o){var u=0,d=t==null?u:t.length;if(typeof i=="number"&&i===i&&d<=ce){for(;u<d;){var _=u+d>>>1,D=t[_];D!==null&&!Dr(D)&&(o?D<=i:D<i)?u=_+1:d=_}return d}return ka(t,i,yr,o)}function ka(t,i,o,u){var d=0,_=t==null?0:t.length;if(_===0)return 0;i=o(i);for(var D=i!==i,P=i===null,j=Dr(i),te=i===r;d<_;){var re=eo((d+_)/2),oe=o(t[re]),le=oe!==r,ye=oe===null,Ee=oe===oe,qe=Dr(oe);if(D)var De=u||Ee;else te?De=Ee&&(u||le):P?De=Ee&&le&&(u||!ye):j?De=Ee&&le&&!ye&&(u||!qe):ye||qe?De=!1:De=u?oe<=i:oe<i;De?d=re+1:_=re}return Qt(_,ve)}function yh(t,i){for(var o=-1,u=t.length,d=0,_=[];++o<u;){var D=t[o],P=i?i(D):D;if(!o||!kr(P,j)){var j=P;_[d++]=D===0?0:D}}return _}function _h(t){return typeof t=="number"?t:Dr(t)?Y:+t}function Er(t){if(typeof t=="string")return t;if(Ne(t))return bt(t,Er)+"";if(Dr(t))return Ju?Ju.call(t):"";var i=t+"";return i=="0"&&1/t==-ee?"-0":i}function Oi(t,i,o){var u=-1,d=qs,_=t.length,D=!0,P=[],j=P;if(o)D=!1,d=ma;else if(_>=a){var te=i?null:j0(t);if(te)return Hs(te);D=!1,d=zn,j=new Ki}else j=i?[]:P;e:for(;++u<_;){var re=t[u],oe=i?i(re):re;if(re=o||re!==0?re:0,D&&oe===oe){for(var le=j.length;le--;)if(j[le]===oe)continue e;i&&j.push(oe),P.push(re)}else d(j,oe,o)||(j!==P&&j.push(oe),P.push(re))}return P}function Va(t,i){return i=Ci(i,t),t=Vh(t,i),t==null||delete t[Zr(Lr(i))]}function bh(t,i,o,u){return Jn(t,i,o(Vi(t,i)),u)}function uo(t,i,o,u){for(var d=t.length,_=u?d:-1;(u?_--:++_<d)&&i(t[_],_,t););return o?Fr(t,u?0:_,u?_+1:d):Fr(t,u?_+1:0,u?d:_)}function mh(t,i){var o=t;return o instanceof Ye&&(o=o.value()),wa(i,function(u,d){return d.func.apply(d.thisArg,Di([u],d.args))},o)}function Wa(t,i,o){var u=t.length;if(u<2)return u?Oi(t[0]):[];for(var d=-1,_=V(u);++d<u;)for(var D=t[d],P=-1;++P<u;)P!=d&&(_[d]=Wn(_[d]||D,t[P],i,o));return Oi(Yt(_,1),i,o)}function wh(t,i,o){for(var u=-1,d=t.length,_=i.length,D={};++u<d;){var P=u<_?i[u]:r;o(D,t[u],P)}return D}function Ga(t){return Nt(t)?t:[]}function Ya(t){return typeof t=="function"?t:yr}function Ci(t,i){return Ne(t)?t:nc(t,i)?[t]:Jh(it(t))}var A0=Ke;function Ai(t,i,o){var u=t.length;return o=o===r?u:o,!i&&o>=u?t:Fr(t,i,o)}var Eh=vg||function(t){return Xe.clearTimeout(t)};function Dh(t,i){if(i)return t.slice();var o=t.length,u=Ku?Ku(o):new t.constructor(o);return t.copy(u),u}function Ja(t){var i=new t.constructor(t.byteLength);return new Ys(i).set(new Ys(t)),i}function P0(t,i){var o=i?Ja(t.buffer):t.buffer;return new t.constructor(o,t.byteOffset,t.byteLength)}function T0(t){var i=new t.constructor(t.source,Cr.exec(t));return i.lastIndex=t.lastIndex,i}function N0(t){return kn?ht(kn.call(t)):{}}function Sh(t,i){var o=i?Ja(t.buffer):t.buffer;return new t.constructor(o,t.byteOffset,t.length)}function Ih(t,i){if(t!==i){var o=t!==r,u=t===null,d=t===t,_=Dr(t),D=i!==r,P=i===null,j=i===i,te=Dr(i);if(!P&&!te&&!_&&t>i||_&&D&&j&&!P&&!te||u&&D&&j||!o&&j||!d)return 1;if(!u&&!_&&!te&&t<i||te&&o&&d&&!u&&!_||P&&o&&d||!D&&d||!j)return-1}return 0}function R0(t,i,o){for(var u=-1,d=t.criteria,_=i.criteria,D=d.length,P=o.length;++u<D;){var j=Ih(d[u],_[u]);if(j){if(u>=P)return j;var te=o[u];return j*(te=="desc"?-1:1)}}return t.index-i.index}function xh(t,i,o,u){for(var d=-1,_=t.length,D=o.length,P=-1,j=i.length,te=kt(_-D,0),re=V(j+te),oe=!u;++P<j;)re[P]=i[P];for(;++d<D;)(oe||d<_)&&(re[o[d]]=t[d]);for(;te--;)re[P++]=t[d++];return re}function Oh(t,i,o,u){for(var d=-1,_=t.length,D=-1,P=o.length,j=-1,te=i.length,re=kt(_-P,0),oe=V(re+te),le=!u;++d<re;)oe[d]=t[d];for(var ye=d;++j<te;)oe[ye+j]=i[j];for(;++D<P;)(le||d<_)&&(oe[ye+o[D]]=t[d++]);return oe}function pr(t,i){var o=-1,u=t.length;for(i||(i=V(u));++o<u;)i[o]=t[o];return i}function Qr(t,i,o,u){var d=!o;o||(o={});for(var _=-1,D=i.length;++_<D;){var P=i[_],j=u?u(o[P],t[P],P,o,t):r;j===r&&(j=t[P]),d?ui(o,P,j):Vn(o,P,j)}return o}function F0(t,i){return Qr(t,ic(t),i)}function L0(t,i){return Qr(t,zh(t),i)}function ho(t,i){return function(o,u){var d=Ne(o)?zp:i0,_=i?i():{};return d(o,t,we(u,2),_)}}function En(t){return Ke(function(i,o){var u=-1,d=o.length,_=d>1?o[d-1]:r,D=d>2?o[2]:r;for(_=t.length>3&&typeof _=="function"?(d--,_):r,D&&sr(o[0],o[1],D)&&(_=d<3?r:_,d=1),i=ht(i);++u<d;){var P=o[u];P&&t(i,P,u,_)}return i})}function Ch(t,i){return function(o,u){if(o==null)return o;if(!gr(o))return t(o,u);for(var d=o.length,_=i?d:-1,D=ht(o);(i?_--:++_<d)&&u(D[_],_,D)!==!1;);return o}}function Ah(t){return function(i,o,u){for(var d=-1,_=ht(i),D=u(i),P=D.length;P--;){var j=D[t?P:++d];if(o(_[j],j,_)===!1)break}return i}}function U0(t,i,o){var u=i&W,d=Xn(t);function _(){var D=this&&this!==Xe&&this instanceof _?d:t;return D.apply(u?o:this,arguments)}return _}function Ph(t){return function(i){i=it(i);var o=gn(i)?Hr(i):r,u=o?o[0]:i.charAt(0),d=o?Ai(o,1).join(""):i.slice(1);return u[t]()+d}}function Dn(t){return function(i){return wa(Cl(Ol(i).replace(Mn,"")),t,"")}}function Xn(t){return function(){var i=arguments;switch(i.length){case 0:return new t;case 1:return new t(i[0]);case 2:return new t(i[0],i[1]);case 3:return new t(i[0],i[1],i[2]);case 4:return new t(i[0],i[1],i[2],i[3]);case 5:return new t(i[0],i[1],i[2],i[3],i[4]);case 6:return new t(i[0],i[1],i[2],i[3],i[4],i[5]);case 7:return new t(i[0],i[1],i[2],i[3],i[4],i[5],i[6])}var o=wn(t.prototype),u=t.apply(o,i);return wt(u)?u:o}}function $0(t,i,o){var u=Xn(t);function d(){for(var _=arguments.length,D=V(_),P=_,j=Sn(d);P--;)D[P]=arguments[P];var te=_<3&&D[0]!==j&&D[_-1]!==j?[]:Si(D,j);if(_-=te.length,_<o)return Lh(t,i,lo,d.placeholder,r,D,te,r,r,o-_);var re=this&&this!==Xe&&this instanceof d?u:t;return Vt(re,this,D)}return d}function Th(t){return function(i,o,u){var d=ht(i);if(!gr(i)){var _=we(o,3);i=Wt(i),o=function(P){return _(d[P],P,d)}}var D=t(i,o,u);return D>-1?d[_?i[D]:D]:r}}function Nh(t){return li(function(i){var o=i.length,u=o,d=Nr.prototype.thru;for(t&&i.reverse();u--;){var _=i[u];if(typeof _!="function")throw new Tr(p);if(d&&!D&&vo(_)=="wrapper")var D=new Nr([],!0)}for(u=D?u:o;++u<o;){_=i[u];var P=vo(_),j=P=="wrapper"?tc(_):r;j&&sc(j[0])&&j[1]==(c|U|C|y)&&!j[4].length&&j[9]==1?D=D[vo(j[0])].apply(D,j[3]):D=_.length==1&&sc(_)?D[P]():D.thru(_)}return function(){var te=arguments,re=te[0];if(D&&te.length==1&&Ne(re))return D.plant(re).value();for(var oe=0,le=o?i[oe].apply(this,te):re;++oe<o;)le=i[oe].call(this,le);return le}})}function lo(t,i,o,u,d,_,D,P,j,te){var re=i&c,oe=i&W,le=i&ae,ye=i&(U|E),Ee=i&J,qe=le?r:Xn(t);function De(){for(var We=arguments.length,Qe=V(We),Sr=We;Sr--;)Qe[Sr]=arguments[Sr];if(ye)var or=Sn(De),Ir=Yp(Qe,or);if(u&&(Qe=xh(Qe,u,d,ye)),_&&(Qe=Oh(Qe,_,D,ye)),We-=Ir,ye&&We<te){var Rt=Si(Qe,or);return Lh(t,i,lo,De.placeholder,o,Qe,Rt,P,j,te-We)}var Vr=oe?o:this,gi=le?Vr[t]:t;return We=Qe.length,P?Qe=i1(Qe,P):Ee&&We>1&&Qe.reverse(),re&&j<We&&(Qe.length=j),this&&this!==Xe&&this instanceof De&&(gi=qe||Xn(gi)),gi.apply(Vr,Qe)}return De}function Rh(t,i){return function(o,u){return l0(o,t,i(u),{})}}function fo(t,i){return function(o,u){var d;if(o===r&&u===r)return i;if(o!==r&&(d=o),u!==r){if(d===r)return u;typeof o=="string"||typeof u=="string"?(o=Er(o),u=Er(u)):(o=_h(o),u=_h(u)),d=t(o,u)}return d}}function Xa(t){return li(function(i){return i=bt(i,wr(we())),Ke(function(o){var u=this;return t(i,function(d){return Vt(d,u,o)})})})}function po(t,i){i=i===r?" ":Er(i);var o=i.length;if(o<2)return o?Ka(i,t):i;var u=Ka(i,Zs(t/vn(i)));return gn(i)?Ai(Hr(u),0,t).join(""):u.slice(0,t)}function M0(t,i,o,u){var d=i&W,_=Xn(t);function D(){for(var P=-1,j=arguments.length,te=-1,re=u.length,oe=V(re+j),le=this&&this!==Xe&&this instanceof D?_:t;++te<re;)oe[te]=u[te];for(;j--;)oe[te++]=arguments[++P];return Vt(le,d?o:this,oe)}return D}function Fh(t){return function(i,o,u){return u&&typeof u!="number"&&sr(i,o,u)&&(o=u=r),i=pi(i),o===r?(o=i,i=0):o=pi(o),u=u===r?i<o?1:-1:pi(u),D0(i,o,u,t)}}function go(t){return function(i,o){return typeof i=="string"&&typeof o=="string"||(i=Ur(i),o=Ur(o)),t(i,o)}}function Lh(t,i,o,u,d,_,D,P,j,te){var re=i&U,oe=re?D:r,le=re?r:D,ye=re?_:r,Ee=re?r:_;i|=re?C:b,i&=~(re?b:C),i&T||(i&=~(W|ae));var qe=[t,i,d,ye,oe,Ee,le,P,j,te],De=o.apply(r,qe);return sc(t)&&Wh(De,qe),De.placeholder=u,Gh(De,t,i)}function Qa(t){var i=Kt[t];return function(o,u){if(o=Ur(o),u=u==null?0:Qt(Me(u),292),u&&Gu(o)){var d=(it(o)+"e").split("e"),_=i(d[0]+"e"+(+d[1]+u));return d=(it(_)+"e").split("e"),+(d[0]+"e"+(+d[1]-u))}return i(o)}}var j0=bn&&1/Hs(new bn([,-0]))[1]==ee?function(t){return new bn(t)}:mc;function Uh(t){return function(i){var o=Zt(i);return o==Ie?Ca(i):o==xe?rg(i):Gp(i,t(i))}}function hi(t,i,o,u,d,_,D,P){var j=i&ae;if(!j&&typeof t!="function")throw new Tr(p);var te=u?u.length:0;if(te||(i&=~(C|b),u=d=r),D=D===r?D:kt(Me(D),0),P=P===r?P:Me(P),te-=d?d.length:0,i&b){var re=u,oe=d;u=d=r}var le=j?r:tc(t),ye=[t,i,o,u,d,re,oe,_,D,P];if(le&&e1(ye,le),t=ye[0],i=ye[1],o=ye[2],u=ye[3],d=ye[4],P=ye[9]=ye[9]===r?j?0:t.length:kt(ye[9]-te,0),!P&&i&(U|E)&&(i&=~(U|E)),!i||i==W)var Ee=U0(t,i,o);else i==U||i==E?Ee=$0(t,i,P):(i==C||i==(W|C))&&!d.length?Ee=M0(t,i,o,u):Ee=lo.apply(r,ye);var qe=le?vh:Wh;return Gh(qe(Ee,ye),t,i)}function $h(t,i,o,u){return t===r||kr(t,_n[o])&&!nt.call(u,o)?i:t}function Mh(t,i,o,u,d,_){return wt(t)&&wt(i)&&(_.set(i,t),ao(t,i,r,Mh,_),_.delete(i)),t}function z0(t){return es(t)?r:t}function jh(t,i,o,u,d,_){var D=o&L,P=t.length,j=i.length;if(P!=j&&!(D&&j>P))return!1;var te=_.get(t),re=_.get(i);if(te&&re)return te==i&&re==t;var oe=-1,le=!0,ye=o&k?new Ki:r;for(_.set(t,i),_.set(i,t);++oe<P;){var Ee=t[oe],qe=i[oe];if(u)var De=D?u(qe,Ee,oe,i,t,_):u(Ee,qe,oe,t,i,_);if(De!==r){if(De)continue;le=!1;break}if(ye){if(!Ea(i,function(We,Qe){if(!zn(ye,Qe)&&(Ee===We||d(Ee,We,o,u,_)))return ye.push(Qe)})){le=!1;break}}else if(!(Ee===qe||d(Ee,qe,o,u,_))){le=!1;break}}return _.delete(t),_.delete(i),le}function q0(t,i,o,u,d,_,D){switch(o){case Ae:if(t.byteLength!=i.byteLength||t.byteOffset!=i.byteOffset)return!1;t=t.buffer,i=i.buffer;case Se:return!(t.byteLength!=i.byteLength||!_(new Ys(t),new Ys(i)));case q:case N:case Be:return kr(+t,+i);case O:return t.name==i.name&&t.message==i.message;case je:case Re:return t==i+"";case Ie:var P=Ca;case xe:var j=u&L;if(P||(P=Hs),t.size!=i.size&&!j)return!1;var te=D.get(t);if(te)return te==i;u|=k,D.set(t,i);var re=jh(P(t),P(i),u,d,_,D);return D.delete(t),re;case Fe:if(kn)return kn.call(t)==kn.call(i)}return!1}function B0(t,i,o,u,d,_){var D=o&L,P=Za(t),j=P.length,te=Za(i),re=te.length;if(j!=re&&!D)return!1;for(var oe=j;oe--;){var le=P[oe];if(!(D?le in i:nt.call(i,le)))return!1}var ye=_.get(t),Ee=_.get(i);if(ye&&Ee)return ye==i&&Ee==t;var qe=!0;_.set(t,i),_.set(i,t);for(var De=D;++oe<j;){le=P[oe];var We=t[le],Qe=i[le];if(u)var Sr=D?u(Qe,We,le,i,t,_):u(We,Qe,le,t,i,_);if(!(Sr===r?We===Qe||d(We,Qe,o,u,_):Sr)){qe=!1;break}De||(De=le=="constructor")}if(qe&&!De){var or=t.constructor,Ir=i.constructor;or!=Ir&&"constructor"in t&&"constructor"in i&&!(typeof or=="function"&&or instanceof or&&typeof Ir=="function"&&Ir instanceof Ir)&&(qe=!1)}return _.delete(t),_.delete(i),qe}function li(t){return ac(kh(t,r,el),t+"")}function Za(t){return sh(t,Wt,ic)}function ec(t){return sh(t,vr,zh)}var tc=to?function(t){return to.get(t)}:mc;function vo(t){for(var i=t.name+"",o=mn[i],u=nt.call(mn,i)?o.length:0;u--;){var d=o[u],_=d.func;if(_==null||_==t)return d.name}return i}function Sn(t){var i=nt.call(v,"placeholder")?v:t;return i.placeholder}function we(){var t=v.iteratee||_c;return t=t===_c?ch:t,arguments.length?t(arguments[0],arguments[1]):t}function yo(t,i){var o=t.__data__;return J0(i)?o[typeof i=="string"?"string":"hash"]:o.map}function rc(t){for(var i=Wt(t),o=i.length;o--;){var u=i[o],d=t[u];i[o]=[u,d,Hh(d)]}return i}function Wi(t,i){var o=Zp(t,i);return ah(o)?o:r}function H0(t){var i=nt.call(t,Bi),o=t[Bi];try{t[Bi]=r;var u=!0}catch{}var d=Ws.call(t);return u&&(i?t[Bi]=o:delete t[Bi]),d}var ic=Pa?function(t){return t==null?[]:(t=ht(t),Ei(Pa(t),function(i){return Vu.call(t,i)}))}:wc,zh=Pa?function(t){for(var i=[];t;)Di(i,ic(t)),t=Js(t);return i}:wc,Zt=nr;(Ta&&Zt(new Ta(new ArrayBuffer(1)))!=Ae||Bn&&Zt(new Bn)!=Ie||Na&&Zt(Na.resolve())!=gt||bn&&Zt(new bn)!=xe||Hn&&Zt(new Hn)!=Ce)&&(Zt=function(t){var i=nr(t),o=i==$e?t.constructor:r,u=o?Gi(o):"";if(u)switch(u){case Ig:return Ae;case xg:return Ie;case Og:return gt;case Cg:return xe;case Ag:return Ce}return i});function K0(t,i,o){for(var u=-1,d=o.length;++u<d;){var _=o[u],D=_.size;switch(_.type){case"drop":t+=D;break;case"dropRight":i-=D;break;case"take":i=Qt(i,t+D);break;case"takeRight":t=kt(t,i-D);break}}return{start:t,end:i}}function k0(t){var i=t.match(lt);return i?i[1].split(jt):[]}function qh(t,i,o){i=Ci(i,t);for(var u=-1,d=i.length,_=!1;++u<d;){var D=Zr(i[u]);if(!(_=t!=null&&o(t,D)))break;t=t[D]}return _||++u!=d?_:(d=t==null?0:t.length,!!d&&So(d)&&fi(D,d)&&(Ne(t)||Yi(t)))}function V0(t){var i=t.length,o=new t.constructor(i);return i&&typeof t[0]=="string"&&nt.call(t,"index")&&(o.index=t.index,o.input=t.input),o}function Bh(t){return typeof t.constructor=="function"&&!Qn(t)?wn(Js(t)):{}}function W0(t,i,o){var u=t.constructor;switch(i){case Se:return Ja(t);case q:case N:return new u(+t);case Ae:return P0(t,o);case He:case Oe:case Ve:case Ge:case et:case tt:case Je:case tr:case fr:return Sh(t,o);case Ie:return new u;case Be:case Re:return new u(t);case je:return T0(t);case xe:return new u;case Fe:return N0(t)}}function G0(t,i){var o=i.length;if(!o)return t;var u=o-1;return i[u]=(o>1?"& ":"")+i[u],i=i.join(o>2?", ":" "),t.replace(Ot,`{
/* [wrapped with `+i+`] */
`)}function Y0(t){return Ne(t)||Yi(t)||!!(Wu&&t&&t[Wu])}function fi(t,i){var o=typeof t;return i=i??X,!!i&&(o=="number"||o!="symbol"&&oa.test(t))&&t>-1&&t%1==0&&t<i}function sr(t,i,o){if(!wt(o))return!1;var u=typeof i;return(u=="number"?gr(o)&&fi(i,o.length):u=="string"&&i in o)?kr(o[i],t):!1}function nc(t,i){if(Ne(t))return!1;var o=typeof t;return o=="number"||o=="symbol"||o=="boolean"||t==null||Dr(t)?!0:Ut.test(t)||!_t.test(t)||i!=null&&t in ht(i)}function J0(t){var i=typeof t;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?t!=="__proto__":t===null}function sc(t){var i=vo(t),o=v[i];if(typeof o!="function"||!(i in Ye.prototype))return!1;if(t===o)return!0;var u=tc(o);return!!u&&t===u[0]}function X0(t){return!!Hu&&Hu in t}var Q0=ks?di:Ec;function Qn(t){var i=t&&t.constructor,o=typeof i=="function"&&i.prototype||_n;return t===o}function Hh(t){return t===t&&!wt(t)}function Kh(t,i){return function(o){return o==null?!1:o[t]===i&&(i!==r||t in ht(o))}}function Z0(t){var i=Eo(t,function(u){return o.size===w&&o.clear(),u}),o=i.cache;return i}function e1(t,i){var o=t[1],u=i[1],d=o|u,_=d<(W|ae|c),D=u==c&&o==U||u==c&&o==y&&t[7].length<=i[8]||u==(c|y)&&i[7].length<=i[8]&&o==U;if(!(_||D))return t;u&W&&(t[2]=i[2],d|=o&W?0:T);var P=i[3];if(P){var j=t[3];t[3]=j?xh(j,P,i[4]):P,t[4]=j?Si(t[3],I):i[4]}return P=i[5],P&&(j=t[5],t[5]=j?Oh(j,P,i[6]):P,t[6]=j?Si(t[5],I):i[6]),P=i[7],P&&(t[7]=P),u&c&&(t[8]=t[8]==null?i[8]:Qt(t[8],i[8])),t[9]==null&&(t[9]=i[9]),t[0]=i[0],t[1]=d,t}function t1(t){var i=[];if(t!=null)for(var o in ht(t))i.push(o);return i}function r1(t){return Ws.call(t)}function kh(t,i,o){return i=kt(i===r?t.length-1:i,0),function(){for(var u=arguments,d=-1,_=kt(u.length-i,0),D=V(_);++d<_;)D[d]=u[i+d];d=-1;for(var P=V(i+1);++d<i;)P[d]=u[d];return P[i]=o(D),Vt(t,this,P)}}function Vh(t,i){return i.length<2?t:Vi(t,Fr(i,0,-1))}function i1(t,i){for(var o=t.length,u=Qt(i.length,o),d=pr(t);u--;){var _=i[u];t[u]=fi(_,o)?d[_]:r}return t}function oc(t,i){if(!(i==="constructor"&&typeof t[i]=="function")&&i!="__proto__")return t[i]}var Wh=Yh(vh),Zn=_g||function(t,i){return Xe.setTimeout(t,i)},ac=Yh(x0);function Gh(t,i,o){var u=i+"";return ac(t,G0(u,n1(k0(u),o)))}function Yh(t){var i=0,o=0;return function(){var u=Eg(),d=Z-(u-o);if(o=u,d>0){if(++i>=K)return arguments[0]}else i=0;return t.apply(r,arguments)}}function _o(t,i){var o=-1,u=t.length,d=u-1;for(i=i===r?u:i;++o<i;){var _=Ha(o,d),D=t[_];t[_]=t[o],t[o]=D}return t.length=i,t}var Jh=Z0(function(t){var i=[];return t.charCodeAt(0)===46&&i.push(""),t.replace($t,function(o,u,d,_){i.push(d?_.replace(ea,"$1"):u||o)}),i});function Zr(t){if(typeof t=="string"||Dr(t))return t;var i=t+"";return i=="0"&&1/t==-ee?"-0":i}function Gi(t){if(t!=null){try{return Vs.call(t)}catch{}try{return t+""}catch{}}return""}function n1(t,i){return Pr(_e,function(o){var u="_."+o[0];i&o[1]&&!qs(t,u)&&t.push(u)}),t.sort()}function Xh(t){if(t instanceof Ye)return t.clone();var i=new Nr(t.__wrapped__,t.__chain__);return i.__actions__=pr(t.__actions__),i.__index__=t.__index__,i.__values__=t.__values__,i}function s1(t,i,o){(o?sr(t,i,o):i===r)?i=1:i=kt(Me(i),0);var u=t==null?0:t.length;if(!u||i<1)return[];for(var d=0,_=0,D=V(Zs(u/i));d<u;)D[_++]=Fr(t,d,d+=i);return D}function o1(t){for(var i=-1,o=t==null?0:t.length,u=0,d=[];++i<o;){var _=t[i];_&&(d[u++]=_)}return d}function a1(){var t=arguments.length;if(!t)return[];for(var i=V(t-1),o=arguments[0],u=t;u--;)i[u-1]=arguments[u];return Di(Ne(o)?pr(o):[o],Yt(i,1))}var c1=Ke(function(t,i){return Nt(t)?Wn(t,Yt(i,1,Nt,!0)):[]}),u1=Ke(function(t,i){var o=Lr(i);return Nt(o)&&(o=r),Nt(t)?Wn(t,Yt(i,1,Nt,!0),we(o,2)):[]}),h1=Ke(function(t,i){var o=Lr(i);return Nt(o)&&(o=r),Nt(t)?Wn(t,Yt(i,1,Nt,!0),r,o):[]});function l1(t,i,o){var u=t==null?0:t.length;return u?(i=o||i===r?1:Me(i),Fr(t,i<0?0:i,u)):[]}function f1(t,i,o){var u=t==null?0:t.length;return u?(i=o||i===r?1:Me(i),i=u-i,Fr(t,0,i<0?0:i)):[]}function d1(t,i){return t&&t.length?uo(t,we(i,3),!0,!0):[]}function p1(t,i){return t&&t.length?uo(t,we(i,3),!0):[]}function g1(t,i,o,u){var d=t==null?0:t.length;return d?(o&&typeof o!="number"&&sr(t,i,o)&&(o=0,u=d),a0(t,i,o,u)):[]}function Qh(t,i,o){var u=t==null?0:t.length;if(!u)return-1;var d=o==null?0:Me(o);return d<0&&(d=kt(u+d,0)),Bs(t,we(i,3),d)}function Zh(t,i,o){var u=t==null?0:t.length;if(!u)return-1;var d=u-1;return o!==r&&(d=Me(o),d=o<0?kt(u+d,0):Qt(d,u-1)),Bs(t,we(i,3),d,!0)}function el(t){var i=t==null?0:t.length;return i?Yt(t,1):[]}function v1(t){var i=t==null?0:t.length;return i?Yt(t,ee):[]}function y1(t,i){var o=t==null?0:t.length;return o?(i=i===r?1:Me(i),Yt(t,i)):[]}function _1(t){for(var i=-1,o=t==null?0:t.length,u={};++i<o;){var d=t[i];u[d[0]]=d[1]}return u}function tl(t){return t&&t.length?t[0]:r}function b1(t,i,o){var u=t==null?0:t.length;if(!u)return-1;var d=o==null?0:Me(o);return d<0&&(d=kt(u+d,0)),pn(t,i,d)}function m1(t){var i=t==null?0:t.length;return i?Fr(t,0,-1):[]}var w1=Ke(function(t){var i=bt(t,Ga);return i.length&&i[0]===t[0]?Ma(i):[]}),E1=Ke(function(t){var i=Lr(t),o=bt(t,Ga);return i===Lr(o)?i=r:o.pop(),o.length&&o[0]===t[0]?Ma(o,we(i,2)):[]}),D1=Ke(function(t){var i=Lr(t),o=bt(t,Ga);return i=typeof i=="function"?i:r,i&&o.pop(),o.length&&o[0]===t[0]?Ma(o,r,i):[]});function S1(t,i){return t==null?"":mg.call(t,i)}function Lr(t){var i=t==null?0:t.length;return i?t[i-1]:r}function I1(t,i,o){var u=t==null?0:t.length;if(!u)return-1;var d=u;return o!==r&&(d=Me(o),d=d<0?kt(u+d,0):Qt(d,u-1)),i===i?ng(t,i,d):Bs(t,Lu,d,!0)}function x1(t,i){return t&&t.length?fh(t,Me(i)):r}var O1=Ke(rl);function rl(t,i){return t&&t.length&&i&&i.length?Ba(t,i):t}function C1(t,i,o){return t&&t.length&&i&&i.length?Ba(t,i,we(o,2)):t}function A1(t,i,o){return t&&t.length&&i&&i.length?Ba(t,i,r,o):t}var P1=li(function(t,i){var o=t==null?0:t.length,u=Fa(t,i);return gh(t,bt(i,function(d){return fi(d,o)?+d:d}).sort(Ih)),u});function T1(t,i){var o=[];if(!(t&&t.length))return o;var u=-1,d=[],_=t.length;for(i=we(i,3);++u<_;){var D=t[u];i(D,u,t)&&(o.push(D),d.push(u))}return gh(t,d),o}function cc(t){return t==null?t:Sg.call(t)}function N1(t,i,o){var u=t==null?0:t.length;return u?(o&&typeof o!="number"&&sr(t,i,o)?(i=0,o=u):(i=i==null?0:Me(i),o=o===r?u:Me(o)),Fr(t,i,o)):[]}function R1(t,i){return co(t,i)}function F1(t,i,o){return ka(t,i,we(o,2))}function L1(t,i){var o=t==null?0:t.length;if(o){var u=co(t,i);if(u<o&&kr(t[u],i))return u}return-1}function U1(t,i){return co(t,i,!0)}function $1(t,i,o){return ka(t,i,we(o,2),!0)}function M1(t,i){var o=t==null?0:t.length;if(o){var u=co(t,i,!0)-1;if(kr(t[u],i))return u}return-1}function j1(t){return t&&t.length?yh(t):[]}function z1(t,i){return t&&t.length?yh(t,we(i,2)):[]}function q1(t){var i=t==null?0:t.length;return i?Fr(t,1,i):[]}function B1(t,i,o){return t&&t.length?(i=o||i===r?1:Me(i),Fr(t,0,i<0?0:i)):[]}function H1(t,i,o){var u=t==null?0:t.length;return u?(i=o||i===r?1:Me(i),i=u-i,Fr(t,i<0?0:i,u)):[]}function K1(t,i){return t&&t.length?uo(t,we(i,3),!1,!0):[]}function k1(t,i){return t&&t.length?uo(t,we(i,3)):[]}var V1=Ke(function(t){return Oi(Yt(t,1,Nt,!0))}),W1=Ke(function(t){var i=Lr(t);return Nt(i)&&(i=r),Oi(Yt(t,1,Nt,!0),we(i,2))}),G1=Ke(function(t){var i=Lr(t);return i=typeof i=="function"?i:r,Oi(Yt(t,1,Nt,!0),r,i)});function Y1(t){return t&&t.length?Oi(t):[]}function J1(t,i){return t&&t.length?Oi(t,we(i,2)):[]}function X1(t,i){return i=typeof i=="function"?i:r,t&&t.length?Oi(t,r,i):[]}function uc(t){if(!(t&&t.length))return[];var i=0;return t=Ei(t,function(o){if(Nt(o))return i=kt(o.length,i),!0}),xa(i,function(o){return bt(t,Da(o))})}function il(t,i){if(!(t&&t.length))return[];var o=uc(t);return i==null?o:bt(o,function(u){return Vt(i,r,u)})}var Q1=Ke(function(t,i){return Nt(t)?Wn(t,i):[]}),Z1=Ke(function(t){return Wa(Ei(t,Nt))}),ev=Ke(function(t){var i=Lr(t);return Nt(i)&&(i=r),Wa(Ei(t,Nt),we(i,2))}),tv=Ke(function(t){var i=Lr(t);return i=typeof i=="function"?i:r,Wa(Ei(t,Nt),r,i)}),rv=Ke(uc);function iv(t,i){return wh(t||[],i||[],Vn)}function nv(t,i){return wh(t||[],i||[],Jn)}var sv=Ke(function(t){var i=t.length,o=i>1?t[i-1]:r;return o=typeof o=="function"?(t.pop(),o):r,il(t,o)});function nl(t){var i=v(t);return i.__chain__=!0,i}function ov(t,i){return i(t),t}function bo(t,i){return i(t)}var av=li(function(t){var i=t.length,o=i?t[0]:0,u=this.__wrapped__,d=function(_){return Fa(_,t)};return i>1||this.__actions__.length||!(u instanceof Ye)||!fi(o)?this.thru(d):(u=u.slice(o,+o+(i?1:0)),u.__actions__.push({func:bo,args:[d],thisArg:r}),new Nr(u,this.__chain__).thru(function(_){return i&&!_.length&&_.push(r),_}))});function cv(){return nl(this)}function uv(){return new Nr(this.value(),this.__chain__)}function hv(){this.__values__===r&&(this.__values__=_l(this.value()));var t=this.__index__>=this.__values__.length,i=t?r:this.__values__[this.__index__++];return{done:t,value:i}}function lv(){return this}function fv(t){for(var i,o=this;o instanceof io;){var u=Xh(o);u.__index__=0,u.__values__=r,i?d.__wrapped__=u:i=u;var d=u;o=o.__wrapped__}return d.__wrapped__=t,i}function dv(){var t=this.__wrapped__;if(t instanceof Ye){var i=t;return this.__actions__.length&&(i=new Ye(this)),i=i.reverse(),i.__actions__.push({func:bo,args:[cc],thisArg:r}),new Nr(i,this.__chain__)}return this.thru(cc)}function pv(){return mh(this.__wrapped__,this.__actions__)}var gv=ho(function(t,i,o){nt.call(t,o)?++t[o]:ui(t,o,1)});function vv(t,i,o){var u=Ne(t)?Ru:o0;return o&&sr(t,i,o)&&(i=r),u(t,we(i,3))}function yv(t,i){var o=Ne(t)?Ei:ih;return o(t,we(i,3))}var _v=Th(Qh),bv=Th(Zh);function mv(t,i){return Yt(mo(t,i),1)}function wv(t,i){return Yt(mo(t,i),ee)}function Ev(t,i,o){return o=o===r?1:Me(o),Yt(mo(t,i),o)}function sl(t,i){var o=Ne(t)?Pr:xi;return o(t,we(i,3))}function ol(t,i){var o=Ne(t)?qp:rh;return o(t,we(i,3))}var Dv=ho(function(t,i,o){nt.call(t,o)?t[o].push(i):ui(t,o,[i])});function Sv(t,i,o,u){t=gr(t)?t:xn(t),o=o&&!u?Me(o):0;var d=t.length;return o<0&&(o=kt(d+o,0)),Io(t)?o<=d&&t.indexOf(i,o)>-1:!!d&&pn(t,i,o)>-1}var Iv=Ke(function(t,i,o){var u=-1,d=typeof i=="function",_=gr(t)?V(t.length):[];return xi(t,function(D){_[++u]=d?Vt(i,D,o):Gn(D,i,o)}),_}),xv=ho(function(t,i,o){ui(t,o,i)});function mo(t,i){var o=Ne(t)?bt:uh;return o(t,we(i,3))}function Ov(t,i,o,u){return t==null?[]:(Ne(i)||(i=i==null?[]:[i]),o=u?r:o,Ne(o)||(o=o==null?[]:[o]),dh(t,i,o))}var Cv=ho(function(t,i,o){t[o?0:1].push(i)},function(){return[[],[]]});function Av(t,i,o){var u=Ne(t)?wa:$u,d=arguments.length<3;return u(t,we(i,4),o,d,xi)}function Pv(t,i,o){var u=Ne(t)?Bp:$u,d=arguments.length<3;return u(t,we(i,4),o,d,rh)}function Tv(t,i){var o=Ne(t)?Ei:ih;return o(t,Do(we(i,3)))}function Nv(t){var i=Ne(t)?Qu:S0;return i(t)}function Rv(t,i,o){(o?sr(t,i,o):i===r)?i=1:i=Me(i);var u=Ne(t)?t0:I0;return u(t,i)}function Fv(t){var i=Ne(t)?r0:O0;return i(t)}function Lv(t){if(t==null)return 0;if(gr(t))return Io(t)?vn(t):t.length;var i=Zt(t);return i==Ie||i==xe?t.size:za(t).length}function Uv(t,i,o){var u=Ne(t)?Ea:C0;return o&&sr(t,i,o)&&(i=r),u(t,we(i,3))}var $v=Ke(function(t,i){if(t==null)return[];var o=i.length;return o>1&&sr(t,i[0],i[1])?i=[]:o>2&&sr(i[0],i[1],i[2])&&(i=[i[0]]),dh(t,Yt(i,1),[])}),wo=yg||function(){return Xe.Date.now()};function Mv(t,i){if(typeof i!="function")throw new Tr(p);return t=Me(t),function(){if(--t<1)return i.apply(this,arguments)}}function al(t,i,o){return i=o?r:i,i=t&&i==null?t.length:i,hi(t,c,r,r,r,r,i)}function cl(t,i){var o;if(typeof i!="function")throw new Tr(p);return t=Me(t),function(){return--t>0&&(o=i.apply(this,arguments)),t<=1&&(i=r),o}}var hc=Ke(function(t,i,o){var u=W;if(o.length){var d=Si(o,Sn(hc));u|=C}return hi(t,u,i,o,d)}),ul=Ke(function(t,i,o){var u=W|ae;if(o.length){var d=Si(o,Sn(ul));u|=C}return hi(i,u,t,o,d)});function hl(t,i,o){i=o?r:i;var u=hi(t,U,r,r,r,r,r,i);return u.placeholder=hl.placeholder,u}function ll(t,i,o){i=o?r:i;var u=hi(t,E,r,r,r,r,r,i);return u.placeholder=ll.placeholder,u}function fl(t,i,o){var u,d,_,D,P,j,te=0,re=!1,oe=!1,le=!0;if(typeof t!="function")throw new Tr(p);i=Ur(i)||0,wt(o)&&(re=!!o.leading,oe="maxWait"in o,_=oe?kt(Ur(o.maxWait)||0,i):_,le="trailing"in o?!!o.trailing:le);function ye(Rt){var Vr=u,gi=d;return u=d=r,te=Rt,D=t.apply(gi,Vr),D}function Ee(Rt){return te=Rt,P=Zn(We,i),re?ye(Rt):D}function qe(Rt){var Vr=Rt-j,gi=Rt-te,Tl=i-Vr;return oe?Qt(Tl,_-gi):Tl}function De(Rt){var Vr=Rt-j,gi=Rt-te;return j===r||Vr>=i||Vr<0||oe&&gi>=_}function We(){var Rt=wo();if(De(Rt))return Qe(Rt);P=Zn(We,qe(Rt))}function Qe(Rt){return P=r,le&&u?ye(Rt):(u=d=r,D)}function Sr(){P!==r&&Eh(P),te=0,u=j=d=P=r}function or(){return P===r?D:Qe(wo())}function Ir(){var Rt=wo(),Vr=De(Rt);if(u=arguments,d=this,j=Rt,Vr){if(P===r)return Ee(j);if(oe)return Eh(P),P=Zn(We,i),ye(j)}return P===r&&(P=Zn(We,i)),D}return Ir.cancel=Sr,Ir.flush=or,Ir}var jv=Ke(function(t,i){return th(t,1,i)}),zv=Ke(function(t,i,o){return th(t,Ur(i)||0,o)});function qv(t){return hi(t,J)}function Eo(t,i){if(typeof t!="function"||i!=null&&typeof i!="function")throw new Tr(p);var o=function(){var u=arguments,d=i?i.apply(this,u):u[0],_=o.cache;if(_.has(d))return _.get(d);var D=t.apply(this,u);return o.cache=_.set(d,D)||_,D};return o.cache=new(Eo.Cache||ci),o}Eo.Cache=ci;function Do(t){if(typeof t!="function")throw new Tr(p);return function(){var i=arguments;switch(i.length){case 0:return!t.call(this);case 1:return!t.call(this,i[0]);case 2:return!t.call(this,i[0],i[1]);case 3:return!t.call(this,i[0],i[1],i[2])}return!t.apply(this,i)}}function Bv(t){return cl(2,t)}var Hv=A0(function(t,i){i=i.length==1&&Ne(i[0])?bt(i[0],wr(we())):bt(Yt(i,1),wr(we()));var o=i.length;return Ke(function(u){for(var d=-1,_=Qt(u.length,o);++d<_;)u[d]=i[d].call(this,u[d]);return Vt(t,this,u)})}),lc=Ke(function(t,i){var o=Si(i,Sn(lc));return hi(t,C,r,i,o)}),dl=Ke(function(t,i){var o=Si(i,Sn(dl));return hi(t,b,r,i,o)}),Kv=li(function(t,i){return hi(t,y,r,r,r,i)});function kv(t,i){if(typeof t!="function")throw new Tr(p);return i=i===r?i:Me(i),Ke(t,i)}function Vv(t,i){if(typeof t!="function")throw new Tr(p);return i=i==null?0:kt(Me(i),0),Ke(function(o){var u=o[i],d=Ai(o,0,i);return u&&Di(d,u),Vt(t,this,d)})}function Wv(t,i,o){var u=!0,d=!0;if(typeof t!="function")throw new Tr(p);return wt(o)&&(u="leading"in o?!!o.leading:u,d="trailing"in o?!!o.trailing:d),fl(t,i,{leading:u,maxWait:i,trailing:d})}function Gv(t){return al(t,1)}function Yv(t,i){return lc(Ya(i),t)}function Jv(){if(!arguments.length)return[];var t=arguments[0];return Ne(t)?t:[t]}function Xv(t){return Rr(t,F)}function Qv(t,i){return i=typeof i=="function"?i:r,Rr(t,F,i)}function Zv(t){return Rr(t,R|F)}function ey(t,i){return i=typeof i=="function"?i:r,Rr(t,R|F,i)}function ty(t,i){return i==null||eh(t,i,Wt(i))}function kr(t,i){return t===i||t!==t&&i!==i}var ry=go($a),iy=go(function(t,i){return t>=i}),Yi=oh(function(){return arguments}())?oh:function(t){return Ct(t)&&nt.call(t,"callee")&&!Vu.call(t,"callee")},Ne=V.isArray,ny=ir?wr(ir):f0;function gr(t){return t!=null&&So(t.length)&&!di(t)}function Nt(t){return Ct(t)&&gr(t)}function sy(t){return t===!0||t===!1||Ct(t)&&nr(t)==q}var Pi=bg||Ec,oy=Br?wr(Br):d0;function ay(t){return Ct(t)&&t.nodeType===1&&!es(t)}function cy(t){if(t==null)return!0;if(gr(t)&&(Ne(t)||typeof t=="string"||typeof t.splice=="function"||Pi(t)||In(t)||Yi(t)))return!t.length;var i=Zt(t);if(i==Ie||i==xe)return!t.size;if(Qn(t))return!za(t).length;for(var o in t)if(nt.call(t,o))return!1;return!0}function uy(t,i){return Yn(t,i)}function hy(t,i,o){o=typeof o=="function"?o:r;var u=o?o(t,i):r;return u===r?Yn(t,i,r,o):!!u}function fc(t){if(!Ct(t))return!1;var i=nr(t);return i==O||i==h||typeof t.message=="string"&&typeof t.name=="string"&&!es(t)}function ly(t){return typeof t=="number"&&Gu(t)}function di(t){if(!wt(t))return!1;var i=nr(t);return i==ue||i==de||i==H||i==vt}function pl(t){return typeof t=="number"&&t==Me(t)}function So(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=X}function wt(t){var i=typeof t;return t!=null&&(i=="object"||i=="function")}function Ct(t){return t!=null&&typeof t=="object"}var gl=Ar?wr(Ar):g0;function fy(t,i){return t===i||ja(t,i,rc(i))}function dy(t,i,o){return o=typeof o=="function"?o:r,ja(t,i,rc(i),o)}function py(t){return vl(t)&&t!=+t}function gy(t){if(Q0(t))throw new Pe(l);return ah(t)}function vy(t){return t===null}function yy(t){return t==null}function vl(t){return typeof t=="number"||Ct(t)&&nr(t)==Be}function es(t){if(!Ct(t)||nr(t)!=$e)return!1;var i=Js(t);if(i===null)return!0;var o=nt.call(i,"constructor")&&i.constructor;return typeof o=="function"&&o instanceof o&&Vs.call(o)==dg}var dc=Jr?wr(Jr):v0;function _y(t){return pl(t)&&t>=-X&&t<=X}var yl=jn?wr(jn):y0;function Io(t){return typeof t=="string"||!Ne(t)&&Ct(t)&&nr(t)==Re}function Dr(t){return typeof t=="symbol"||Ct(t)&&nr(t)==Fe}var In=qi?wr(qi):_0;function by(t){return t===r}function my(t){return Ct(t)&&Zt(t)==Ce}function wy(t){return Ct(t)&&nr(t)==Le}var Ey=go(qa),Dy=go(function(t,i){return t<=i});function _l(t){if(!t)return[];if(gr(t))return Io(t)?Hr(t):pr(t);if(qn&&t[qn])return tg(t[qn]());var i=Zt(t),o=i==Ie?Ca:i==xe?Hs:xn;return o(t)}function pi(t){if(!t)return t===0?t:0;if(t=Ur(t),t===ee||t===-ee){var i=t<0?-1:1;return i*G}return t===t?t:0}function Me(t){var i=pi(t),o=i%1;return i===i?o?i-o:i:0}function bl(t){return t?ki(Me(t),0,se):0}function Ur(t){if(typeof t=="number")return t;if(Dr(t))return Y;if(wt(t)){var i=typeof t.valueOf=="function"?t.valueOf():t;t=wt(i)?i+"":i}if(typeof t!="string")return t===0?t:+t;t=Mu(t);var o=ia.test(t);return o||sa.test(t)?Te(t.slice(2),o?2:8):ra.test(t)?Y:+t}function ml(t){return Qr(t,vr(t))}function Sy(t){return t?ki(Me(t),-X,X):t===0?t:0}function it(t){return t==null?"":Er(t)}var Iy=En(function(t,i){if(Qn(i)||gr(i)){Qr(i,Wt(i),t);return}for(var o in i)nt.call(i,o)&&Vn(t,o,i[o])}),wl=En(function(t,i){Qr(i,vr(i),t)}),xo=En(function(t,i,o,u){Qr(i,vr(i),t,u)}),xy=En(function(t,i,o,u){Qr(i,Wt(i),t,u)}),Oy=li(Fa);function Cy(t,i){var o=wn(t);return i==null?o:Zu(o,i)}var Ay=Ke(function(t,i){t=ht(t);var o=-1,u=i.length,d=u>2?i[2]:r;for(d&&sr(i[0],i[1],d)&&(u=1);++o<u;)for(var _=i[o],D=vr(_),P=-1,j=D.length;++P<j;){var te=D[P],re=t[te];(re===r||kr(re,_n[te])&&!nt.call(t,te))&&(t[te]=_[te])}return t}),Py=Ke(function(t){return t.push(r,Mh),Vt(El,r,t)});function Ty(t,i){return Fu(t,we(i,3),Xr)}function Ny(t,i){return Fu(t,we(i,3),Ua)}function Ry(t,i){return t==null?t:La(t,we(i,3),vr)}function Fy(t,i){return t==null?t:nh(t,we(i,3),vr)}function Ly(t,i){return t&&Xr(t,we(i,3))}function Uy(t,i){return t&&Ua(t,we(i,3))}function $y(t){return t==null?[]:oo(t,Wt(t))}function My(t){return t==null?[]:oo(t,vr(t))}function pc(t,i,o){var u=t==null?r:Vi(t,i);return u===r?o:u}function jy(t,i){return t!=null&&qh(t,i,c0)}function gc(t,i){return t!=null&&qh(t,i,u0)}var zy=Rh(function(t,i,o){i!=null&&typeof i.toString!="function"&&(i=Ws.call(i)),t[i]=o},yc(yr)),qy=Rh(function(t,i,o){i!=null&&typeof i.toString!="function"&&(i=Ws.call(i)),nt.call(t,i)?t[i].push(o):t[i]=[o]},we),By=Ke(Gn);function Wt(t){return gr(t)?Xu(t):za(t)}function vr(t){return gr(t)?Xu(t,!0):b0(t)}function Hy(t,i){var o={};return i=we(i,3),Xr(t,function(u,d,_){ui(o,i(u,d,_),u)}),o}function Ky(t,i){var o={};return i=we(i,3),Xr(t,function(u,d,_){ui(o,d,i(u,d,_))}),o}var ky=En(function(t,i,o){ao(t,i,o)}),El=En(function(t,i,o,u){ao(t,i,o,u)}),Vy=li(function(t,i){var o={};if(t==null)return o;var u=!1;i=bt(i,function(_){return _=Ci(_,t),u||(u=_.length>1),_}),Qr(t,ec(t),o),u&&(o=Rr(o,R|B|F,z0));for(var d=i.length;d--;)Va(o,i[d]);return o});function Wy(t,i){return Dl(t,Do(we(i)))}var Gy=li(function(t,i){return t==null?{}:w0(t,i)});function Dl(t,i){if(t==null)return{};var o=bt(ec(t),function(u){return[u]});return i=we(i),ph(t,o,function(u,d){return i(u,d[0])})}function Yy(t,i,o){i=Ci(i,t);var u=-1,d=i.length;for(d||(d=1,t=r);++u<d;){var _=t==null?r:t[Zr(i[u])];_===r&&(u=d,_=o),t=di(_)?_.call(t):_}return t}function Jy(t,i,o){return t==null?t:Jn(t,i,o)}function Xy(t,i,o,u){return u=typeof u=="function"?u:r,t==null?t:Jn(t,i,o,u)}var Sl=Uh(Wt),Il=Uh(vr);function Qy(t,i,o){var u=Ne(t),d=u||Pi(t)||In(t);if(i=we(i,4),o==null){var _=t&&t.constructor;d?o=u?new _:[]:wt(t)?o=di(_)?wn(Js(t)):{}:o={}}return(d?Pr:Xr)(t,function(D,P,j){return i(o,D,P,j)}),o}function Zy(t,i){return t==null?!0:Va(t,i)}function e_(t,i,o){return t==null?t:bh(t,i,Ya(o))}function t_(t,i,o,u){return u=typeof u=="function"?u:r,t==null?t:bh(t,i,Ya(o),u)}function xn(t){return t==null?[]:Oa(t,Wt(t))}function r_(t){return t==null?[]:Oa(t,vr(t))}function i_(t,i,o){return o===r&&(o=i,i=r),o!==r&&(o=Ur(o),o=o===o?o:0),i!==r&&(i=Ur(i),i=i===i?i:0),ki(Ur(t),i,o)}function n_(t,i,o){return i=pi(i),o===r?(o=i,i=0):o=pi(o),t=Ur(t),h0(t,i,o)}function s_(t,i,o){if(o&&typeof o!="boolean"&&sr(t,i,o)&&(i=o=r),o===r&&(typeof i=="boolean"?(o=i,i=r):typeof t=="boolean"&&(o=t,t=r)),t===r&&i===r?(t=0,i=1):(t=pi(t),i===r?(i=t,t=0):i=pi(i)),t>i){var u=t;t=i,i=u}if(o||t%1||i%1){var d=Yu();return Qt(t+d*(i-t+ct("1e-"+((d+"").length-1))),i)}return Ha(t,i)}var o_=Dn(function(t,i,o){return i=i.toLowerCase(),t+(o?xl(i):i)});function xl(t){return vc(it(t).toLowerCase())}function Ol(t){return t=it(t),t&&t.replace(si,Jp).replace(_a,"")}function a_(t,i,o){t=it(t),i=Er(i);var u=t.length;o=o===r?u:ki(Me(o),0,u);var d=o;return o-=i.length,o>=0&&t.slice(o,d)==i}function c_(t){return t=it(t),t&&yt.test(t)?t.replace(Ui,Xp):t}function u_(t){return t=it(t),t&&Mt.test(t)?t.replace(It,"\\$&"):t}var h_=Dn(function(t,i,o){return t+(o?"-":"")+i.toLowerCase()}),l_=Dn(function(t,i,o){return t+(o?" ":"")+i.toLowerCase()}),f_=Ph("toLowerCase");function d_(t,i,o){t=it(t),i=Me(i);var u=i?vn(t):0;if(!i||u>=i)return t;var d=(i-u)/2;return po(eo(d),o)+t+po(Zs(d),o)}function p_(t,i,o){t=it(t),i=Me(i);var u=i?vn(t):0;return i&&u<i?t+po(i-u,o):t}function g_(t,i,o){t=it(t),i=Me(i);var u=i?vn(t):0;return i&&u<i?po(i-u,o)+t:t}function v_(t,i,o){return o||i==null?i=0:i&&(i=+i),Dg(it(t).replace(xt,""),i||0)}function y_(t,i,o){return(o?sr(t,i,o):i===r)?i=1:i=Me(i),Ka(it(t),i)}function __(){var t=arguments,i=it(t[0]);return t.length<3?i:i.replace(t[1],t[2])}var b_=Dn(function(t,i,o){return t+(o?"_":"")+i.toLowerCase()});function m_(t,i,o){return o&&typeof o!="number"&&sr(t,i,o)&&(i=o=r),o=o===r?se:o>>>0,o?(t=it(t),t&&(typeof i=="string"||i!=null&&!dc(i))&&(i=Er(i),!i&&gn(t))?Ai(Hr(t),0,o):t.split(i,o)):[]}var w_=Dn(function(t,i,o){return t+(o?" ":"")+vc(i)});function E_(t,i,o){return t=it(t),o=o==null?0:ki(Me(o),0,t.length),i=Er(i),t.slice(o,o+i.length)==i}function D_(t,i,o){var u=v.templateSettings;o&&sr(t,i,o)&&(i=r),t=it(t),i=xo({},i,u,$h);var d=xo({},i.imports,u.imports,$h),_=Wt(d),D=Oa(d,_),P,j,te=0,re=i.interpolate||an,oe="__p += '",le=Aa((i.escape||an).source+"|"+re.source+"|"+(re===mt?ta:an).source+"|"+(i.evaluate||an).source+"|$","g"),ye="//# sourceURL="+(nt.call(i,"sourceURL")?(i.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ba+"]")+`
`;t.replace(le,function(De,We,Qe,Sr,or,Ir){return Qe||(Qe=Sr),oe+=t.slice(te,Ir).replace(aa,Qp),We&&(P=!0,oe+=`' +
__e(`+We+`) +
'`),or&&(j=!0,oe+=`';
`+or+`;
__p += '`),Qe&&(oe+=`' +
((__t = (`+Qe+`)) == null ? '' : __t) +
'`),te=Ir+De.length,De}),oe+=`';
`;var Ee=nt.call(i,"variable")&&i.variable;if(!Ee)oe=`with (obj) {
`+oe+`
}
`;else if(Zo.test(Ee))throw new Pe(f);oe=(j?oe.replace(Gr,""):oe).replace(rr,"$1").replace(ni,"$1;"),oe="function("+(Ee||"obj")+`) {
`+(Ee?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(P?", __e = _.escape":"")+(j?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+oe+`return __p
}`;var qe=Al(function(){return rt(_,ye+"return "+oe).apply(r,D)});if(qe.source=oe,fc(qe))throw qe;return qe}function S_(t){return it(t).toLowerCase()}function I_(t){return it(t).toUpperCase()}function x_(t,i,o){if(t=it(t),t&&(o||i===r))return Mu(t);if(!t||!(i=Er(i)))return t;var u=Hr(t),d=Hr(i),_=ju(u,d),D=zu(u,d)+1;return Ai(u,_,D).join("")}function O_(t,i,o){if(t=it(t),t&&(o||i===r))return t.slice(0,Bu(t)+1);if(!t||!(i=Er(i)))return t;var u=Hr(t),d=zu(u,Hr(i))+1;return Ai(u,0,d).join("")}function C_(t,i,o){if(t=it(t),t&&(o||i===r))return t.replace(xt,"");if(!t||!(i=Er(i)))return t;var u=Hr(t),d=ju(u,Hr(i));return Ai(u,d).join("")}function A_(t,i){var o=x,u=z;if(wt(i)){var d="separator"in i?i.separator:d;o="length"in i?Me(i.length):o,u="omission"in i?Er(i.omission):u}t=it(t);var _=t.length;if(gn(t)){var D=Hr(t);_=D.length}if(o>=_)return t;var P=o-vn(u);if(P<1)return u;var j=D?Ai(D,0,P).join(""):t.slice(0,P);if(d===r)return j+u;if(D&&(P+=j.length-P),dc(d)){if(t.slice(P).search(d)){var te,re=j;for(d.global||(d=Aa(d.source,it(Cr.exec(d))+"g")),d.lastIndex=0;te=d.exec(re);)var oe=te.index;j=j.slice(0,oe===r?P:oe)}}else if(t.indexOf(Er(d),P)!=P){var le=j.lastIndexOf(d);le>-1&&(j=j.slice(0,le))}return j+u}function P_(t){return t=it(t),t&&Et.test(t)?t.replace(mi,sg):t}var T_=Dn(function(t,i,o){return t+(o?" ":"")+i.toUpperCase()}),vc=Ph("toUpperCase");function Cl(t,i,o){return t=it(t),i=o?r:i,i===r?eg(t)?cg(t):kp(t):t.match(i)||[]}var Al=Ke(function(t,i){try{return Vt(t,r,i)}catch(o){return fc(o)?o:new Pe(o)}}),N_=li(function(t,i){return Pr(i,function(o){o=Zr(o),ui(t,o,hc(t[o],t))}),t});function R_(t){var i=t==null?0:t.length,o=we();return t=i?bt(t,function(u){if(typeof u[1]!="function")throw new Tr(p);return[o(u[0]),u[1]]}):[],Ke(function(u){for(var d=-1;++d<i;){var _=t[d];if(Vt(_[0],this,u))return Vt(_[1],this,u)}})}function F_(t){return s0(Rr(t,R))}function yc(t){return function(){return t}}function L_(t,i){return t==null||t!==t?i:t}var U_=Nh(),$_=Nh(!0);function yr(t){return t}function _c(t){return ch(typeof t=="function"?t:Rr(t,R))}function M_(t){return hh(Rr(t,R))}function j_(t,i){return lh(t,Rr(i,R))}var z_=Ke(function(t,i){return function(o){return Gn(o,t,i)}}),q_=Ke(function(t,i){return function(o){return Gn(t,o,i)}});function bc(t,i,o){var u=Wt(i),d=oo(i,u);o==null&&!(wt(i)&&(d.length||!u.length))&&(o=i,i=t,t=this,d=oo(i,Wt(i)));var _=!(wt(o)&&"chain"in o)||!!o.chain,D=di(t);return Pr(d,function(P){var j=i[P];t[P]=j,D&&(t.prototype[P]=function(){var te=this.__chain__;if(_||te){var re=t(this.__wrapped__),oe=re.__actions__=pr(this.__actions__);return oe.push({func:j,args:arguments,thisArg:t}),re.__chain__=te,re}return j.apply(t,Di([this.value()],arguments))})}),t}function B_(){return Xe._===this&&(Xe._=pg),this}function mc(){}function H_(t){return t=Me(t),Ke(function(i){return fh(i,t)})}var K_=Xa(bt),k_=Xa(Ru),V_=Xa(Ea);function Pl(t){return nc(t)?Da(Zr(t)):E0(t)}function W_(t){return function(i){return t==null?r:Vi(t,i)}}var G_=Fh(),Y_=Fh(!0);function wc(){return[]}function Ec(){return!1}function J_(){return{}}function X_(){return""}function Q_(){return!0}function Z_(t,i){if(t=Me(t),t<1||t>X)return[];var o=se,u=Qt(t,se);i=we(i),t-=se;for(var d=xa(u,i);++o<t;)i(o);return d}function eb(t){return Ne(t)?bt(t,Zr):Dr(t)?[t]:pr(Jh(it(t)))}function tb(t){var i=++fg;return it(t)+i}var rb=fo(function(t,i){return t+i},0),ib=Qa("ceil"),nb=fo(function(t,i){return t/i},1),sb=Qa("floor");function ob(t){return t&&t.length?so(t,yr,$a):r}function ab(t,i){return t&&t.length?so(t,we(i,2),$a):r}function cb(t){return Uu(t,yr)}function ub(t,i){return Uu(t,we(i,2))}function hb(t){return t&&t.length?so(t,yr,qa):r}function lb(t,i){return t&&t.length?so(t,we(i,2),qa):r}var fb=fo(function(t,i){return t*i},1),db=Qa("round"),pb=fo(function(t,i){return t-i},0);function gb(t){return t&&t.length?Ia(t,yr):0}function vb(t,i){return t&&t.length?Ia(t,we(i,2)):0}return v.after=Mv,v.ary=al,v.assign=Iy,v.assignIn=wl,v.assignInWith=xo,v.assignWith=xy,v.at=Oy,v.before=cl,v.bind=hc,v.bindAll=N_,v.bindKey=ul,v.castArray=Jv,v.chain=nl,v.chunk=s1,v.compact=o1,v.concat=a1,v.cond=R_,v.conforms=F_,v.constant=yc,v.countBy=gv,v.create=Cy,v.curry=hl,v.curryRight=ll,v.debounce=fl,v.defaults=Ay,v.defaultsDeep=Py,v.defer=jv,v.delay=zv,v.difference=c1,v.differenceBy=u1,v.differenceWith=h1,v.drop=l1,v.dropRight=f1,v.dropRightWhile=d1,v.dropWhile=p1,v.fill=g1,v.filter=yv,v.flatMap=mv,v.flatMapDeep=wv,v.flatMapDepth=Ev,v.flatten=el,v.flattenDeep=v1,v.flattenDepth=y1,v.flip=qv,v.flow=U_,v.flowRight=$_,v.fromPairs=_1,v.functions=$y,v.functionsIn=My,v.groupBy=Dv,v.initial=m1,v.intersection=w1,v.intersectionBy=E1,v.intersectionWith=D1,v.invert=zy,v.invertBy=qy,v.invokeMap=Iv,v.iteratee=_c,v.keyBy=xv,v.keys=Wt,v.keysIn=vr,v.map=mo,v.mapKeys=Hy,v.mapValues=Ky,v.matches=M_,v.matchesProperty=j_,v.memoize=Eo,v.merge=ky,v.mergeWith=El,v.method=z_,v.methodOf=q_,v.mixin=bc,v.negate=Do,v.nthArg=H_,v.omit=Vy,v.omitBy=Wy,v.once=Bv,v.orderBy=Ov,v.over=K_,v.overArgs=Hv,v.overEvery=k_,v.overSome=V_,v.partial=lc,v.partialRight=dl,v.partition=Cv,v.pick=Gy,v.pickBy=Dl,v.property=Pl,v.propertyOf=W_,v.pull=O1,v.pullAll=rl,v.pullAllBy=C1,v.pullAllWith=A1,v.pullAt=P1,v.range=G_,v.rangeRight=Y_,v.rearg=Kv,v.reject=Tv,v.remove=T1,v.rest=kv,v.reverse=cc,v.sampleSize=Rv,v.set=Jy,v.setWith=Xy,v.shuffle=Fv,v.slice=N1,v.sortBy=$v,v.sortedUniq=j1,v.sortedUniqBy=z1,v.split=m_,v.spread=Vv,v.tail=q1,v.take=B1,v.takeRight=H1,v.takeRightWhile=K1,v.takeWhile=k1,v.tap=ov,v.throttle=Wv,v.thru=bo,v.toArray=_l,v.toPairs=Sl,v.toPairsIn=Il,v.toPath=eb,v.toPlainObject=ml,v.transform=Qy,v.unary=Gv,v.union=V1,v.unionBy=W1,v.unionWith=G1,v.uniq=Y1,v.uniqBy=J1,v.uniqWith=X1,v.unset=Zy,v.unzip=uc,v.unzipWith=il,v.update=e_,v.updateWith=t_,v.values=xn,v.valuesIn=r_,v.without=Q1,v.words=Cl,v.wrap=Yv,v.xor=Z1,v.xorBy=ev,v.xorWith=tv,v.zip=rv,v.zipObject=iv,v.zipObjectDeep=nv,v.zipWith=sv,v.entries=Sl,v.entriesIn=Il,v.extend=wl,v.extendWith=xo,bc(v,v),v.add=rb,v.attempt=Al,v.camelCase=o_,v.capitalize=xl,v.ceil=ib,v.clamp=i_,v.clone=Xv,v.cloneDeep=Zv,v.cloneDeepWith=ey,v.cloneWith=Qv,v.conformsTo=ty,v.deburr=Ol,v.defaultTo=L_,v.divide=nb,v.endsWith=a_,v.eq=kr,v.escape=c_,v.escapeRegExp=u_,v.every=vv,v.find=_v,v.findIndex=Qh,v.findKey=Ty,v.findLast=bv,v.findLastIndex=Zh,v.findLastKey=Ny,v.floor=sb,v.forEach=sl,v.forEachRight=ol,v.forIn=Ry,v.forInRight=Fy,v.forOwn=Ly,v.forOwnRight=Uy,v.get=pc,v.gt=ry,v.gte=iy,v.has=jy,v.hasIn=gc,v.head=tl,v.identity=yr,v.includes=Sv,v.indexOf=b1,v.inRange=n_,v.invoke=By,v.isArguments=Yi,v.isArray=Ne,v.isArrayBuffer=ny,v.isArrayLike=gr,v.isArrayLikeObject=Nt,v.isBoolean=sy,v.isBuffer=Pi,v.isDate=oy,v.isElement=ay,v.isEmpty=cy,v.isEqual=uy,v.isEqualWith=hy,v.isError=fc,v.isFinite=ly,v.isFunction=di,v.isInteger=pl,v.isLength=So,v.isMap=gl,v.isMatch=fy,v.isMatchWith=dy,v.isNaN=py,v.isNative=gy,v.isNil=yy,v.isNull=vy,v.isNumber=vl,v.isObject=wt,v.isObjectLike=Ct,v.isPlainObject=es,v.isRegExp=dc,v.isSafeInteger=_y,v.isSet=yl,v.isString=Io,v.isSymbol=Dr,v.isTypedArray=In,v.isUndefined=by,v.isWeakMap=my,v.isWeakSet=wy,v.join=S1,v.kebabCase=h_,v.last=Lr,v.lastIndexOf=I1,v.lowerCase=l_,v.lowerFirst=f_,v.lt=Ey,v.lte=Dy,v.max=ob,v.maxBy=ab,v.mean=cb,v.meanBy=ub,v.min=hb,v.minBy=lb,v.stubArray=wc,v.stubFalse=Ec,v.stubObject=J_,v.stubString=X_,v.stubTrue=Q_,v.multiply=fb,v.nth=x1,v.noConflict=B_,v.noop=mc,v.now=wo,v.pad=d_,v.padEnd=p_,v.padStart=g_,v.parseInt=v_,v.random=s_,v.reduce=Av,v.reduceRight=Pv,v.repeat=y_,v.replace=__,v.result=Yy,v.round=db,v.runInContext=M,v.sample=Nv,v.size=Lv,v.snakeCase=b_,v.some=Uv,v.sortedIndex=R1,v.sortedIndexBy=F1,v.sortedIndexOf=L1,v.sortedLastIndex=U1,v.sortedLastIndexBy=$1,v.sortedLastIndexOf=M1,v.startCase=w_,v.startsWith=E_,v.subtract=pb,v.sum=gb,v.sumBy=vb,v.template=D_,v.times=Z_,v.toFinite=pi,v.toInteger=Me,v.toLength=bl,v.toLower=S_,v.toNumber=Ur,v.toSafeInteger=Sy,v.toString=it,v.toUpper=I_,v.trim=x_,v.trimEnd=O_,v.trimStart=C_,v.truncate=A_,v.unescape=P_,v.uniqueId=tb,v.upperCase=T_,v.upperFirst=vc,v.each=sl,v.eachRight=ol,v.first=tl,bc(v,function(){var t={};return Xr(v,function(i,o){nt.call(v.prototype,o)||(t[o]=i)}),t}(),{chain:!1}),v.VERSION=s,Pr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){v[t].placeholder=v}),Pr(["drop","take"],function(t,i){Ye.prototype[t]=function(o){o=o===r?1:kt(Me(o),0);var u=this.__filtered__&&!i?new Ye(this):this.clone();return u.__filtered__?u.__takeCount__=Qt(o,u.__takeCount__):u.__views__.push({size:Qt(o,se),type:t+(u.__dir__<0?"Right":"")}),u},Ye.prototype[t+"Right"]=function(o){return this.reverse()[t](o).reverse()}}),Pr(["filter","map","takeWhile"],function(t,i){var o=i+1,u=o==S||o==ie;Ye.prototype[t]=function(d){var _=this.clone();return _.__iteratees__.push({iteratee:we(d,3),type:o}),_.__filtered__=_.__filtered__||u,_}}),Pr(["head","last"],function(t,i){var o="take"+(i?"Right":"");Ye.prototype[t]=function(){return this[o](1).value()[0]}}),Pr(["initial","tail"],function(t,i){var o="drop"+(i?"":"Right");Ye.prototype[t]=function(){return this.__filtered__?new Ye(this):this[o](1)}}),Ye.prototype.compact=function(){return this.filter(yr)},Ye.prototype.find=function(t){return this.filter(t).head()},Ye.prototype.findLast=function(t){return this.reverse().find(t)},Ye.prototype.invokeMap=Ke(function(t,i){return typeof t=="function"?new Ye(this):this.map(function(o){return Gn(o,t,i)})}),Ye.prototype.reject=function(t){return this.filter(Do(we(t)))},Ye.prototype.slice=function(t,i){t=Me(t);var o=this;return o.__filtered__&&(t>0||i<0)?new Ye(o):(t<0?o=o.takeRight(-t):t&&(o=o.drop(t)),i!==r&&(i=Me(i),o=i<0?o.dropRight(-i):o.take(i-t)),o)},Ye.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Ye.prototype.toArray=function(){return this.take(se)},Xr(Ye.prototype,function(t,i){var o=/^(?:filter|find|map|reject)|While$/.test(i),u=/^(?:head|last)$/.test(i),d=v[u?"take"+(i=="last"?"Right":""):i],_=u||/^find/.test(i);d&&(v.prototype[i]=function(){var D=this.__wrapped__,P=u?[1]:arguments,j=D instanceof Ye,te=P[0],re=j||Ne(D),oe=function(We){var Qe=d.apply(v,Di([We],P));return u&&le?Qe[0]:Qe};re&&o&&typeof te=="function"&&te.length!=1&&(j=re=!1);var le=this.__chain__,ye=!!this.__actions__.length,Ee=_&&!le,qe=j&&!ye;if(!_&&re){D=qe?D:new Ye(this);var De=t.apply(D,P);return De.__actions__.push({func:bo,args:[oe],thisArg:r}),new Nr(De,le)}return Ee&&qe?t.apply(this,P):(De=this.thru(oe),Ee?u?De.value()[0]:De.value():De)})}),Pr(["pop","push","shift","sort","splice","unshift"],function(t){var i=Ks[t],o=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",u=/^(?:pop|shift)$/.test(t);v.prototype[t]=function(){var d=arguments;if(u&&!this.__chain__){var _=this.value();return i.apply(Ne(_)?_:[],d)}return this[o](function(D){return i.apply(Ne(D)?D:[],d)})}}),Xr(Ye.prototype,function(t,i){var o=v[i];if(o){var u=o.name+"";nt.call(mn,u)||(mn[u]=[]),mn[u].push({name:i,func:o})}}),mn[lo(r,ae).name]=[{name:"wrapper",func:r}],Ye.prototype.clone=Pg,Ye.prototype.reverse=Tg,Ye.prototype.value=Ng,v.prototype.at=av,v.prototype.chain=cv,v.prototype.commit=uv,v.prototype.next=hv,v.prototype.plant=fv,v.prototype.reverse=dv,v.prototype.toJSON=v.prototype.valueOf=v.prototype.value=pv,v.prototype.first=v.prototype.head,qn&&(v.prototype[qn]=lv),v},yn=ug();Tt?((Tt.exports=yn)._=yn,ut._=yn):Xe._=yn}).call(fs)})(iu,iu.exports);var d5=Object.defineProperty,p5=Object.defineProperties,g5=Object.getOwnPropertyDescriptors,od=Object.getOwnPropertySymbols,v5=Object.prototype.hasOwnProperty,y5=Object.prototype.propertyIsEnumerable,ad=(n,e,r)=>e in n?d5(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,Co=(n,e)=>{for(var r in e||(e={}))v5.call(e,r)&&ad(n,r,e[r]);if(od)for(var r of od(e))y5.call(e,r)&&ad(n,r,e[r]);return n},_5=(n,e)=>p5(n,g5(e));function jr(n,e,r){let s;const a=nu(n);return e.rpcMap&&(s=e.rpcMap[a]),s||(s=`${f5}?chainId=eip155:${a}&projectId=${r}`),s}function nu(n){return n.includes("eip155")?Number(n.split(":")[1]):Number(n)}function b5(n,e){if(!e.includes(n))throw new Error(`Chain '${n}' not approved. Please use one of the following: ${e.toString()}`)}function m5(n){return n.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function w5(n,e){const r=Object.keys(e.namespaces).filter(a=>a.includes(n));if(!r.length)return[];const s=[];return r.forEach(a=>{const l=e.namespaces[a].accounts;s.push(...l)}),s}function E5(n,e={}){const r=cd(n),s=cd(e);return iu.exports.merge(r,s)}function cd(n){var e,r,s,a;const l={};if(!Nn(n))return l;for(const[p,f]of Object.entries(n)){const g=tp(p)?[p]:f.chains,w=f.methods||[],I=f.events||[],R=f.rpcMap||{},B=No(p);l[B]=_5(Co(Co({},l[B]),f),{chains:Cc(g,(e=l[B])==null?void 0:e.chains),methods:Cc(w,(r=l[B])==null?void 0:r.methods),events:Cc(I,(s=l[B])==null?void 0:s.events),rpcMap:Co(Co({},R),(a=l[B])==null?void 0:a.rpcMap)})}return l}const jp={},Lt=n=>jp[n],zc=(n,e)=>{jp[n]=e};class D5{constructor(e){this.name="polkadot",this.namespace=e.namespace,this.events=Lt("events"),this.client=Lt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(this.chainId=e,!this.httpProviders[e]){const s=r||jr(`${this.name}:${e}`,this.namespace);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.events.emit(Li.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var s;e[r]=this.createHttpProvider(r,(s=this.namespace.rpcMap)==null?void 0:s[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const s=this.createHttpProvider(e,r);s&&(this.httpProviders[e]=s)}createHttpProvider(e,r){const s=r||jr(e,this.namespace);return typeof s>"u"?void 0:new Fi(new on(s,Lt("disableProviderPing")))}}class S5{constructor(e){this.name="eip155",this.namespace=e.namespace,this.events=Lt("events"),this.client=Lt("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){var r;switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return this.handleSwitchChain(e.request.params?(r=e.request.params[0])==null?void 0:r.chainId:"0x0"),null;case"eth_chainId":return parseInt(this.getDefaultChain())}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,r){const s=nu(e);if(!this.httpProviders[s]){const a=r||jr(`${this.name}:${s}`,this.namespace,this.client.core.projectId);if(!a)throw new Error(`No RPC url provided for chainId: ${s}`);this.setHttpProvider(s,a)}this.chainId=s,this.events.emit(Li.DEFAULT_CHAIN_CHANGED,`${this.name}:${s}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,r){const s=r||jr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Fi(new on(s,Lt("disableProviderPing")))}setHttpProvider(e,r){const s=this.createHttpProvider(e,r);s&&(this.httpProviders[e]=s)}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var s;const a=nu(r);e[a]=this.createHttpProvider(a,(s=this.namespace.rpcMap)==null?void 0:s[r])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}handleSwitchChain(e){const r=parseInt(e,16),s=`${this.name}:${r}`;b5(s,this.namespace.chains),this.setDefaultChain(`${r}`)}}class I5{constructor(e){this.name="solana",this.namespace=e.namespace,this.events=Lt("events"),this.client=Lt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(!this.httpProviders[e]){const s=r||jr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.chainId=e,this.events.emit(Li.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var s;e[r]=this.createHttpProvider(r,(s=this.namespace.rpcMap)==null?void 0:s[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const s=this.createHttpProvider(e,r);s&&(this.httpProviders[e]=s)}createHttpProvider(e,r){const s=r||jr(e,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Fi(new on(s,Lt("disableProviderPing")))}}class x5{constructor(e){this.name="cosmos",this.namespace=e.namespace,this.events=Lt("events"),this.client=Lt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(this.chainId=e,!this.httpProviders[e]){const s=r||jr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.events.emit(Li.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var s;e[r]=this.createHttpProvider(r,(s=this.namespace.rpcMap)==null?void 0:s[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const s=this.createHttpProvider(e,r);s&&(this.httpProviders[e]=s)}createHttpProvider(e,r){const s=r||jr(e,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Fi(new on(s,Lt("disableProviderPing")))}}class O5{constructor(e){this.name="cip34",this.namespace=e.namespace,this.events=Lt("events"),this.client=Lt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(this.chainId=e,!this.httpProviders[e]){const s=r||this.getCardanoRPCUrl(e);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.events.emit(Li.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{const s=this.getCardanoRPCUrl(r);e[r]=this.createHttpProvider(r,s)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}getCardanoRPCUrl(e){const r=this.namespace.rpcMap;if(r)return r[e]}setHttpProvider(e,r){const s=this.createHttpProvider(e,r);s&&(this.httpProviders[e]=s)}createHttpProvider(e,r){const s=r||this.getCardanoRPCUrl(e);return typeof s>"u"?void 0:new Fi(new on(s,Lt("disableProviderPing")))}}class C5{constructor(e){this.name="elrond",this.namespace=e.namespace,this.events=Lt("events"),this.client=Lt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(!this.httpProviders[e]){const s=r||jr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.chainId=e,this.events.emit(Li.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var s;e[r]=this.createHttpProvider(r,(s=this.namespace.rpcMap)==null?void 0:s[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const s=this.createHttpProvider(e,r);s&&(this.httpProviders[e]=s)}createHttpProvider(e,r){const s=r||jr(e,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Fi(new on(s,Lt("disableProviderPing")))}}class A5{constructor(e){this.name="multiversx",this.namespace=e.namespace,this.events=Lt("events"),this.client=Lt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(!this.httpProviders[e]){const s=r||jr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.chainId=e,this.events.emit(Li.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var s;e[r]=this.createHttpProvider(r,(s=this.namespace.rpcMap)==null?void 0:s[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const s=this.createHttpProvider(e,r);s&&(this.httpProviders[e]=s)}createHttpProvider(e,r){const s=r||jr(e,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Fi(new on(s,Lt("disableProviderPing")))}}var P5=Object.defineProperty,T5=Object.defineProperties,N5=Object.getOwnPropertyDescriptors,ud=Object.getOwnPropertySymbols,R5=Object.prototype.hasOwnProperty,F5=Object.prototype.propertyIsEnumerable,hd=(n,e,r)=>e in n?P5(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,Ao=(n,e)=>{for(var r in e||(e={}))R5.call(e,r)&&hd(n,r,e[r]);if(ud)for(var r of ud(e))F5.call(e,r)&&hd(n,r,e[r]);return n},qc=(n,e)=>T5(n,N5(e));class Tu{constructor(e){this.events=new hu,this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Ze.pino(Ze.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||nd})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const r=new Tu(e);return await r.initialize(),r}async request(e,r){const[s,a]=this.validateChain(r);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:Ao({},e),chainId:`${s}:${a}`,topic:this.session.topic})}sendAsync(e,r,s){this.request(e,s).then(a=>r(null,a)).catch(a=>r(a,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:Ft("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}removeListener(e,r){this.events.removeListener(e,r)}off(e,r){this.events.off(e,r)}get isWalletConnect(){return!0}async pair(e){this.shouldAbortPairingAttempt=!1;let r=0;do{if(this.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(r>=this.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:s,approval:a}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});s&&(this.uri=s,this.events.emit("display_uri",s)),await a().then(l=>{this.session=l}).catch(l=>{if(l.message!==$p)throw l;r++})}while(!this.session);return this.onConnect(),this.session}setDefaultChain(e,r){try{const[s,a]=this.validateChain(e);this.getProvider(s).setDefaultChain(a,r)}catch(s){if(!/Please call connect/.test(s.message))throw s}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const r=this.client.pairing.getAll();if(bi(r)){for(const s of r)e.deletePairings?this.client.core.expirer.set(s.topic,0):await this.client.core.relayer.subscriber.unsubscribe(s.topic);this.logger.info(`Inactive pairings cleared: ${r.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const e=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[e]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await s5.init({logger:this.providerOpts.logger||nd,relayUrl:this.providerOpts.relayUrl||u5,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,name:this.providerOpts.name}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(r=>No(r)))];zc("client",this.client),zc("events",this.events),zc("disableProviderPing",this.disableProviderPing),e.forEach(r=>{if(!this.session)return;const s=w5(r,this.session),a=m5(s),l=E5(this.namespaces,this.optionalNamespaces),p=qc(Ao({},l[r]),{accounts:s,chains:a});switch(r){case"eip155":this.rpcProviders[r]=new S5({namespace:p});break;case"solana":this.rpcProviders[r]=new I5({namespace:p});break;case"cosmos":this.rpcProviders[r]=new x5({namespace:p});break;case"polkadot":this.rpcProviders[r]=new D5({namespace:p});break;case"cip34":this.rpcProviders[r]=new O5({namespace:p});break;case"elrond":this.rpcProviders[r]=new C5({namespace:p});break;case"multiversx":this.rpcProviders[r]=new A5({namespace:p});break}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{const{params:r}=e,{event:s}=r;s.name==="accountsChanged"?this.events.emit("accountsChanged",s.data):s.name==="chainChanged"?this.onChainChanged(r.chainId):this.events.emit(s.name,s.data),this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:r})=>{var s;const{namespaces:a}=r,l=(s=this.client)==null?void 0:s.session.get(e);this.session=qc(Ao({},l),{namespaces:a}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:r})}),this.client.on("session_delete",async e=>{await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",qc(Ao({},Ft("USER_DISCONNECTED")),{data:e.topic}))}),this.on(Li.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){if(!this.rpcProviders[e])throw new Error(`Provider not found: ${e}`);return this.rpcProviders[e]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var r;this.getProvider(e).updateNamespace((r=this.session)==null?void 0:r.namespaces[e])})}setNamespaces(e){const{namespaces:r,optionalNamespaces:s,sessionProperties:a}=e;if(!r||!Object.keys(r).length)throw new Error("Namespaces must be not empty");this.namespaces=r,this.optionalNamespaces=s,this.sessionProperties=a,this.persist("namespaces",r),this.persist("optionalNamespaces",s)}validateChain(e){const[r,s]=(e==null?void 0:e.split(":"))||["",""];if(r&&!Object.keys(this.namespaces).map(p=>No(p)).includes(r))throw new Error(`Namespace '${r}' is not configured. Please call connect() first with namespace config.`);if(r&&s)return[r,s];const a=No(Object.keys(this.namespaces)[0]),l=this.rpcProviders[a].getDefaultChain();return[a,l]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}onChainChanged(e,r=!1){var s;const[a,l]=this.validateChain(e);r||this.getProvider(a).setDefaultChain(l),((s=this.namespaces[a])!=null?s:this.namespaces[`${a}:${l}`]).defaultChain=l,this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",l)}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0})}persist(e,r){this.client.core.storage.setItem(`${sd}/${e}`,r)}async getFromStore(e){return await this.client.core.storage.getItem(`${sd}/${e}`)}}const L5=Tu,U5="wc",$5="ethereum_provider",M5=`${U5}@2:${$5}:`,j5="https://rpc.walletconnect.com/v1/",su=["eth_sendTransaction","personal_sign"],eS=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"],ou=["chainChanged","accountsChanged"],tS=["message","disconnect","connect"];var z5=Object.defineProperty,q5=Object.defineProperties,B5=Object.getOwnPropertyDescriptors,ld=Object.getOwnPropertySymbols,H5=Object.prototype.hasOwnProperty,K5=Object.prototype.propertyIsEnumerable,fd=(n,e,r)=>e in n?z5(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,Bc=(n,e)=>{for(var r in e||(e={}))H5.call(e,r)&&fd(n,r,e[r]);if(ld)for(var r of ld(e))K5.call(e,r)&&fd(n,r,e[r]);return n},dd=(n,e)=>q5(n,B5(e));function au(n){return Number(n[0].split(":")[1])}function Hc(n){return`0x${n.toString(16)}`}function k5(n){const{chains:e,optionalChains:r,methods:s,optionalMethods:a,events:l,optionalEvents:p,rpcMap:f}=n;if(!bi(e))throw new Error("Invalid chains");const g=e,w=s||su,I=l||ou,R={[au(g)]:f[au(g)]},B={chains:g,methods:w,events:I,rpcMap:R},F=l==null?void 0:l.filter(ae=>!ou.includes(ae)),L=s==null?void 0:s.filter(ae=>!su.includes(ae));if(!r&&!p&&!a&&!(F!=null&&F.length)&&!(L!=null&&L.length))return{required:B};const k=(F==null?void 0:F.length)&&(L==null?void 0:L.length)||!r,W={chains:[...new Set(k?g.concat(r||[]):r)],methods:[...new Set(w.concat(a||[]))],events:[...new Set(I.concat(p||[]))],rpcMap:f};return{required:B,optional:W}}class Nu{constructor(){this.events=new xr.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY=M5,this.on=(e,r)=>(this.events.on(e,r),this),this.once=(e,r)=>(this.events.once(e,r),this),this.removeListener=(e,r)=>(this.events.removeListener(e,r),this),this.off=(e,r)=>(this.events.off(e,r),this),this.parseAccount=e=>this.isCompatibleChainId(e)?this.parseAccountId(e).address:e,this.signer={},this.rpc={}}static async init(e){const r=new Nu;return await r.initialize(e),r}async request(e){return await this.signer.request(e,this.formatChainId(this.chainId))}sendAsync(e,r){this.signer.sendAsync(e,r,this.formatChainId(this.chainId))}get connected(){return this.signer.client?this.signer.client.core.relayer.connected:!1}get connecting(){return this.signer.client?this.signer.client.core.relayer.connecting:!1}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(e){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(e);const{required:r,optional:s}=k5(this.rpc);try{const a=await new Promise(async(p,f)=>{var g;this.rpc.showQrModal&&((g=this.modal)==null||g.subscribeModal(w=>{!w.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),f(new Error("Connection request reset. Please try again.")))})),await this.signer.connect(dd(Bc({namespaces:{[this.namespace]:r}},s&&{optionalNamespaces:{[this.namespace]:s}}),{pairingTopic:e==null?void 0:e.pairingTopic})).then(w=>{p(w)}).catch(w=>{f(new Error(w.message))})});if(!a)return;this.setChainIds(this.rpc.chains);const l=Jw(a.namespaces,[this.namespace]);this.setAccounts(l),this.events.emit("connect",{chainId:Hc(this.chainId)})}catch(a){throw this.signer.logger.error(a),a}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",e=>{const{params:r}=e,{event:s}=r;s.name==="accountsChanged"?(this.accounts=this.parseAccounts(s.data),this.events.emit("accountsChanged",this.accounts)):s.name==="chainChanged"?this.setChainId(this.formatChainId(s.data)):this.events.emit(s.name,s.data),this.events.emit("session_event",e)}),this.signer.on("chainChanged",e=>{const r=parseInt(e);this.chainId=r,this.events.emit("chainChanged",Hc(this.chainId)),this.persist()}),this.signer.on("session_update",e=>{this.events.emit("session_update",e)}),this.signer.on("session_delete",e=>{this.reset(),this.events.emit("session_delete",e),this.events.emit("disconnect",dd(Bc({},Ft("USER_DISCONNECTED")),{data:e.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",e=>{var r,s;this.rpc.showQrModal&&((r=this.modal)==null||r.closeModal(),(s=this.modal)==null||s.openModal({uri:e})),this.events.emit("display_uri",e)})}setHttpProvider(e){this.request({method:"wallet_switchEthereumChain",params:[{chainId:e.toString(16)}]})}isCompatibleChainId(e){return typeof e=="string"?e.startsWith(`${this.namespace}:`):!1}formatChainId(e){return`${this.namespace}:${e}`}parseChainId(e){return Number(e.split(":")[1])}setChainIds(e){const r=e.filter(s=>this.isCompatibleChainId(s)).map(s=>this.parseChainId(s));r.length&&(this.chainId=r[0],this.events.emit("chainChanged",Hc(this.chainId)),this.persist())}setChainId(e){if(this.isCompatibleChainId(e)){const r=this.parseChainId(e);this.chainId=r,this.setHttpProvider(r)}}parseAccountId(e){const[r,s,a]=e.split(":");return{chainId:`${r}:${s}`,address:a}}setAccounts(e){this.accounts=e.filter(r=>this.parseChainId(this.parseAccountId(r).chainId)===this.chainId).map(r=>this.parseAccountId(r).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(e){var r,s;return{chains:((r=e.chains)==null?void 0:r.map(a=>this.formatChainId(a)))||[`${this.namespace}:1`],optionalChains:e.optionalChains?e.optionalChains.map(a=>this.formatChainId(a)):void 0,methods:(e==null?void 0:e.methods)||su,events:(e==null?void 0:e.events)||ou,optionalMethods:(e==null?void 0:e.optionalMethods)||[],optionalEvents:(e==null?void 0:e.optionalEvents)||[],rpcMap:(e==null?void 0:e.rpcMap)||this.buildRpcMap(e.chains.concat(e.optionalChains||[]),e.projectId),showQrModal:!!(e!=null&&e.showQrModal),qrModalOptions:(s=e==null?void 0:e.qrModalOptions)!=null?s:void 0,projectId:e.projectId,metadata:e.metadata}}buildRpcMap(e,r){const s={};return e.forEach(a=>{s[a]=this.getRpcUrl(a,r)}),s}async initialize(e){if(this.rpc=this.getRpcConfig(e),this.chainId=au(this.rpc.chains),this.signer=await L5.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:e.disableProviderPing}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let r;try{const{WalletConnectModal:s}=await bb(()=>import("./index-28c4b113.js").then(a=>a.a),["assets/index-28c4b113.js","assets/index-ac64f58d.js","assets/index-8ba69dd1.css"]);r=s}catch{throw new Error("To use QR modal, please install @walletconnect/modal package")}if(r)try{this.modal=new r(Bc({walletConnectVersion:2,projectId:this.rpc.projectId,standaloneChains:this.rpc.chains},this.rpc.qrModalOptions))}catch(s){throw this.signer.logger.error(s),new Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(e){if(!e)return;const{chains:r,optionalChains:s,rpcMap:a}=e;r&&bi(r)&&(this.rpc.chains=r.map(l=>this.formatChainId(l)),r.forEach(l=>{this.rpc.rpcMap[l]=(a==null?void 0:a[l])||this.getRpcUrl(l)})),s&&bi(s)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=s==null?void 0:s.map(l=>this.formatChainId(l)),s.forEach(l=>{this.rpc.rpcMap[l]=(a==null?void 0:a[l])||this.getRpcUrl(l)}))}getRpcUrl(e,r){var s;return((s=this.rpc.rpcMap)==null?void 0:s[e])||`${j5}?chainId=eip155:${e}&projectId=${r||this.rpc.projectId}`}async loadPersistedSession(){if(!this.session)return;const e=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`);this.setChainIds(e?[this.formatChainId(e)]:this.session.namespaces[this.namespace].accounts),this.setAccounts(this.session.namespaces[this.namespace].accounts)}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(e){return typeof e=="string"||e instanceof String?[this.parseAccount(e)]:e.map(r=>this.parseAccount(r))}}const rS=Nu;export{rS as EthereumProvider,tS as OPTIONAL_EVENTS,eS as OPTIONAL_METHODS,ou as REQUIRED_EVENTS,su as REQUIRED_METHODS,Nu as default};
